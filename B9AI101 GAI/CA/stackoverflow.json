{"items":[{"tags":["neo4j","cypher","neo4j-apoc"],"answers":[{"comments":[{"owner":{"reputation":1,"user_id":11364877,"user_type":"registered","profile_image":"https://graph.facebook.com/1021182598065385/picture?type=large","display_name":"Kosmas Diamantis","link":"https://stackoverflow.com/users/11364877/kosmas-diamantis"},"edited":false,"score":0,"creation_date":1681405782,"post_id":76008026,"comment_id":134054889,"link":"https://stackoverflow.com/questions/76007652/neo4j-return-nodes-that-are-directly-connected-as-group-with-path-length-as-lev/76008026#comment134054889_76008026"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":1,"user_id":11364877,"user_type":"registered","profile_image":"https://graph.facebook.com/1021182598065385/picture?type=large","display_name":"Kosmas Diamantis","link":"https://stackoverflow.com/users/11364877/kosmas-diamantis"},"edited":false,"score":0,"creation_date":1681406575,"post_id":76008026,"comment_id":134055037,"link":"https://stackoverflow.com/questions/76007652/neo4j-return-nodes-that-are-directly-connected-as-group-with-path-length-as-lev/76008026#comment134055037_76008026"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681406567,"last_edit_date":1681406567,"creation_date":1681404976,"answer_id":76008026,"question_id":76007652,"share_link":"https://stackoverflow.com/a/76008026","body_markdown":"[UPDATED]\r\n\r\nYou can use the APOC function [apoc.map.fromPairs](https://neo4j.com/labs/apoc/4.1/overview/apoc.map/apoc.map.fromPairs/) to create maps with dynamic keys. For example:\r\n\r\n    MATCH path = (l:Partner)-[:HAS_MT4]-&gt;(n:Mt4)-[:HAS_REF*]-&gt;(:Mt4)&lt;-[:HAS_MT4]-(m:Partner)\r\n    WHERE m.partner_id IN [39001174]\r\n      AND n.mt4_id IS NOT NULL\r\n      AND n.account_type &lt;&gt; &#39;demo&#39;\r\n    RETURN\r\n      m.partner_id AS partner_id,\r\n      apoc.map.fromPairs(COLLECT([l.partner_id, LENGTH(path)])) AS sub_partner\r\n\r\n","link":"https://stackoverflow.com/questions/76007652/neo4j-return-nodes-that-are-directly-connected-as-group-with-path-length-as-lev/76008026#76008026","title":"Neo4j: return nodes that are directly connected as group with path length as level"}],"owner":{"reputation":1,"user_id":11364877,"user_type":"registered","profile_image":"https://graph.facebook.com/1021182598065385/picture?type=large","display_name":"Kosmas Diamantis","link":"https://stackoverflow.com/users/11364877/kosmas-diamantis"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681406567,"creation_date":1681402414,"last_edit_date":1681404934,"question_id":76007652,"share_link":"https://stackoverflow.com/q/76007652","body_markdown":"I have this Cypher query:\r\n\r\n```\r\nMATCH path = (l:Partner)-[:HAS_MT4]-&gt;(n:Mt4)-[:HAS_REF*]-&gt;(:Mt4)&lt;-[:HAS_MT4]-(m:Partner)\r\nWHERE m.partner_id IN [39001174]\r\n  AND EXISTS(n.mt4_id)\r\n  AND n.account_type &lt;&gt; &#39;demo&#39;\r\nRETURN m.partner_id AS partner_id, l.partner_id AS sub_partner, LENGTH(path) AS level\r\n```\r\n\r\nNode labels are `Partner` and `Mt4` and the relationship types are\r\n`HAS_MT4` and `HAS_REF`.\r\n\r\nThere are 3 partners (123456, 852963, 741852), and also a master partner 39001174.\r\n\r\n123456 is under 39001174 and this is a direct relationship.\r\n741852 is under 852963 who is under 39001174.\r\nSo here we have two levels that should appear together.\r\n\r\nIf I run the query above for this example I will get the following result:\r\n\r\n    partner id = [39001174,39001174,39001174]\r\n    sub partner = [123456,852963,741852]`\r\n    level = [1,1,2]\r\n\r\nBut what I want to get is something like this:\r\n\r\n    partner id = [39001174,39001174]\r\n    sub partner = [{123456:1},{852963:1,741852:2}]\r\n\r\nI tried something like this:\r\n\r\n```\r\nMATCH path = (l:Partner)-[r:HAS_MT4]-&gt;(n:Mt4)-[:HAS_REF*]-&gt;(k:Mt4)&lt;-[:HAS_MT4]-(m:Partner)\r\nWHERE m.partner_id in [39001174]\r\nAND exists(n.mt4_id)\r\nAND n.account_type &lt;&gt;&#39;demo&#39;\r\nWITH m.partner_id as partner_id, l.partner_id as sub_partner, length(path) as level\r\nWITH partner_id, collect({sub_partner: sub_partner, level: level}) as pairs\r\nWITH partner_id, apoc.map.groupBy(pairs, &#39;pair.sub_partner&#39;) as grouped_pairs\r\nRETURN partner_id, [key IN keys(grouped_pairs) | apoc.map.fromPairs([(pair.sub_partner, pair.level)      pair IN grouped_pairs[key]])] as sub_partner\r\n```\r\n\r\n\r\nbut I am getting syntax errors. I am not very experienced with neo4j","link":"https://stackoverflow.com/questions/76007652/neo4j-return-nodes-that-are-directly-connected-as-group-with-path-length-as-lev","title":"Neo4j: return nodes that are directly connected as group with path length as level"},{"tags":["neo4j","neo4jclient"],"answers":[{"tags":[],"owner":{"reputation":4432,"user_id":74057,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/43b366c599e4af01190174ee63f6b611?s=256&d=identicon&r=PG","display_name":"aldrin","link":"https://stackoverflow.com/users/74057/aldrin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681400022,"creation_date":1681400022,"answer_id":76007285,"question_id":76007106,"share_link":"https://stackoverflow.com/a/76007285","body_markdown":"Use back-ticks ` for the labels, like so,\r\n\r\n    match(n:DATA_CATEGORY_TYPE) remove n:`client-18d1b5fb-c7b5-4769-9b75-363ec596b012` return n","link":"https://stackoverflow.com/questions/76007106/neo4j-remove-labels-invalid-input/76007285#76007285","title":"neo4j remove labels , invalid input -"}],"owner":{"reputation":69,"user_id":12969843,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8bd564421c901dd06e117069c30f8c67?s=256&d=identicon&r=PG&f=1","display_name":"tom","link":"https://stackoverflow.com/users/12969843/tom"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76007285,"answer_count":1,"score":0,"last_activity_date":1681400022,"creation_date":1681398840,"question_id":76007106,"share_link":"https://stackoverflow.com/q/76007106","body_markdown":"In the neo4j browser i try to execute the following command:\r\n\r\n    match(n:DATA_CATEGORY_TYPE) remove n:client-18d1b5fb-c7b5-4769-9b75-363ec596b012 return n\r\n\r\nI get the following error: \r\n\r\n        Invalid input &#39;-&#39;: expected\r\n      &quot;,&quot;\r\n      &quot;CALL&quot;\r\n      &quot;CREATE&quot;\r\n      &quot;DELETE&quot;\r\n      &quot;DETACH&quot;\r\n      &quot;FOREACH&quot;\r\n      &quot;LOAD&quot;\r\n      &quot;MATCH&quot;\r\n      &quot;MERGE&quot;\r\n      &quot;OPTIONAL&quot;\r\n      &quot;REMOVE&quot;\r\n      &quot;RETURN&quot;\r\n      &quot;SET&quot;\r\n      &quot;UNION&quot;\r\n      &quot;UNWIND&quot;\r\n      &quot;USE&quot;\r\n      &quot;WITH&quot;\r\n      &lt;EOF&gt; (line 1, column 44 (offset: 43))\r\n    &quot;match(n:DATA_CATEGORY_TYPE) remove n:client-18d1b5fb-c7b5-4769-9b75-363ec596b012 return n&quot;\r\n\r\nSomething is wrong with the use of &quot;-&quot; in the label, but cannot change it. How can i deal with this error?","link":"https://stackoverflow.com/questions/76007106/neo4j-remove-labels-invalid-input","title":"neo4j remove labels , invalid input -"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":743,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"edited":false,"score":0,"creation_date":1681398322,"post_id":76005068,"comment_id":134053012,"link":"https://stackoverflow.com/questions/76005068/optimazing-neo4j-cypher-query-for-recommendation#comment134053012_76005068"}],"answers":[{"tags":[],"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681398772,"creation_date":1681398772,"answer_id":76007093,"question_id":76005068,"share_link":"https://stackoverflow.com/a/76007093","body_markdown":"I would suggest a minor tweak in your schema. In the `NamedEntity` node, store an additional property named `multiplicationFactor`, which will store the values `2, 1.5, 1.0, 0.5` that you are using in your case statements. After analyzing the profile graph, I have noticed that the aggregation operations are more expensive than the graph traversals. So this one change should help a lot. Set the new property using this query:\r\n\r\n    MATCH (n:NamedEntity)\r\n    WITH n, CASE\r\n                WHEN n.category in [&#39;persName&#39;, &#39;orgName&#39;] THEN 2\r\n                WHEN n.category in [&#39;persName_surname&#39;, &#39;persName_addName&#39;] THEN 1.5\r\n                WHEN n.category in [&#39;date&#39;, &#39;time&#39;, &#39;persName_forename&#39;] THEN 0.5\r\n                ELSE 1.0\r\n            END AS multiplicationFactor\r\n    SET n.multiplicationFactor = multiplicationFactor\r\n\r\nYour recommendation query will now become this:\r\n\r\n    MATCH (t:Trend)--(x:NamedEntity)-[xv:OCCUR]-(a:Article)-[v:OCCUR]-(n:NamedEntity)\r\n    WHERE n.id IN [&quot;polski związek narciarski_orgName&quot;, &quot;Polska_placeName_country&quot;, &quot;Kamila Stoch_persName&quot;, &quot;Kamila_persName_surname&quot;, &quot;Stoch_persName_surname&quot;, &quot;Innsbruck_placeName_settlement&quot;, &quot;Bischofshofen_placeName_settlement&quot;, &quot;niemiecki_placeName_country&quot;, &quot;Oberstdorfie_placeName_settlement&quot;, &quot;47_placeName_settlement&quot;, &quot;Garmisch_placeName_settlement&quot;, &quot;Partenkirchen.nTo_placeName_settlement&quot;, &quot;Stoch_persName&quot;, &quot;katowicki_placeName_settlement&quot;, &quot;AWF.nTCS_orgName&quot;, &quot;polski_placeName_country&quot;, &quot;Polak_placeName_country&quot;, &quot;Adam Małysz_persName&quot;, &quot;Adam_persName_forename&quot;, &quot;Małysz_persName_surname&quot;, &quot;Kamil Stoch_persName&quot;, &quot;Kamil_persName_forename&quot;, &quot;Piotr Żyła_persName&quot;, &quot;Piotr_persName_forename&quot;, &quot;żyć_persName_surname&quot;, &quot;Stoch_persName_addName&quot;, &quot;Kaczmarski_persName&quot;, &quot;Kaczmarski_persName_surname&quot;] and t.date &gt; date(datetime($currentDay) - duration({days: $daysDelta})) and a.publication_datetime &gt; datetime($currentDay) - duration({days: $daysDelta})\r\n    WITH a,t, collect(distinct n) as distinctLinkNes, collect(distinct x) as distinctTrendNes,\r\n                sum(n.multiplicationFactor * v.amount) as linkSum,\r\n                sum(x.multiplicationFactor * xv.amount) as trendSum\r\n    WITH a,t, linkSum, trendSum,\r\n                reduce(total=0, ne in distinctLinkNes |\r\n                total + ne.multiplicationFactor) as distinctLinkNesAmount,\r\n                reduce(total=0, ne in distinctTrendNes |\r\n                total + ne.multiplicationFactor) as distinctTrendNesAmount\r\n    WITH a, t, distinctTrendNesAmount, trendSum, distinctLinkNesAmount, linkSum,\r\n                (3*distinctTrendNesAmount + trendSum) * t.hits / 1000 as trendScore, \r\n                (3*distinctLinkNesAmount + linkSum) * ($daysDelta - duration.between(a.publication_datetime, date($currentDay)).days) as articleScore\r\n    WITH a, t, distinctTrendNesAmount, trendSum, trendScore, distinctLinkNesAmount, linkSum, articleScore,\r\n                (articleScore + trendScore) as score\r\n    ORDER BY score DESC\r\n    RETURN a as article, t, distinctTrendNesAmount, trendSum, trendScore, distinctLinkNesAmount, linkSum, articleScore, score\r\n    LIMIT 30","link":"https://stackoverflow.com/questions/76005068/optimazing-neo4j-cypher-query-for-recommendation/76007093#76007093","title":"Optimazing neo4j cypher query for recommendation"}],"owner":{"reputation":314,"user_id":12196899,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-HXJFTYIXgCQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9EmuGCi5wXoezJmn8Fo2Hia7c3Q/photo.jpg?sz=256","display_name":"Michał Bogusz","link":"https://stackoverflow.com/users/12196899/micha%c5%82-bogusz"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681398772,"creation_date":1681386585,"question_id":76005068,"share_link":"https://stackoverflow.com/q/76005068","body_markdown":"This is my neo4j db schema:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThere is around 2.5 millions of Article nodes, 0.5 million of NamedEntityNodes and few thousand of Trend nodes. Articles have publication datetime and they are from about last two years. \r\nAs an input from a user I get list of NamedEntitiesIds. And I want to have query which will find articles with best connections between those input NamedEntitiesIds and Trends from my database. Query is quite long because I am doing some scoring but I want to put it whole here.\r\n```\r\nMATCH (t:Trend)--(x:NamedEntity)-[xv:OCCUR]-(a:Article)-[v:OCCUR]-(n:NamedEntity)\r\n        WHERE n.id IN [&quot;polski związek narciarski_orgName&quot;, &quot;Polska_placeName_country&quot;, &quot;Kamila Stoch_persName&quot;, &quot;Kamila_persName_surname&quot;, &quot;Stoch_persName_surname&quot;, &quot;Innsbruck_placeName_settlement&quot;, &quot;Bischofshofen_placeName_settlement&quot;, &quot;niemiecki_placeName_country&quot;, &quot;Oberstdorfie_placeName_settlement&quot;, &quot;47_placeName_settlement&quot;, &quot;Garmisch_placeName_settlement&quot;, &quot;Partenkirchen.nTo_placeName_settlement&quot;, &quot;Stoch_persName&quot;, &quot;katowicki_placeName_settlement&quot;, &quot;AWF.nTCS_orgName&quot;, &quot;polski_placeName_country&quot;, &quot;Polak_placeName_country&quot;, &quot;Adam Małysz_persName&quot;, &quot;Adam_persName_forename&quot;, &quot;Małysz_persName_surname&quot;, &quot;Kamil Stoch_persName&quot;, &quot;Kamil_persName_forename&quot;, &quot;Piotr Żyła_persName&quot;, &quot;Piotr_persName_forename&quot;, &quot;żyć_persName_surname&quot;, &quot;Stoch_persName_addName&quot;, &quot;Kaczmarski_persName&quot;, &quot;Kaczmarski_persName_surname&quot;] and t.date &gt; date(datetime($currentDay) - duration({days: $daysDelta})) and a.publication_datetime &gt; datetime($currentDay) - duration({days: $daysDelta})\r\n        WITH a,t, collect(distinct n) as distinctLinkNes, collect(distinct x) as distinctTrendNes,\r\n            sum(\r\n                CASE\r\n                    WHEN n.category in [&#39;persName&#39;, &#39;orgName&#39;] THEN 2*v.amount\r\n                    WHEN n.category in [&#39;persName_surname&#39;, &#39;persName_addName&#39;] THEN 1.5*v.amount\r\n                    WHEN n.category in [&#39;date&#39;, &#39;time&#39;, &#39;persName_forename&#39;] THEN 0.5*v.amount\r\n                    ELSE 1.0*v.amount\r\n                END) as linkSum,\r\n            sum(\r\n                CASE\r\n                    WHEN x.category in [&#39;persName&#39;, &#39;orgName&#39;] THEN 2*xv.amount\r\n                    WHEN x.category in [&#39;persName_surname&#39;, &#39;persName_addName&#39;] THEN 1.5*xv.amount\r\n                    WHEN x.category in [&#39;date&#39;, &#39;time&#39;, &#39;persName_forename&#39;] THEN 0.5*xv.amount\r\n                    ELSE 1.0*xv.amount\r\n                END) as trendSum\r\n        WITH a,t, linkSum, trendSum,\r\n            reduce(total=0, ne in distinctLinkNes |\r\n            total + \r\n            CASE\r\n                WHEN ne.category in [&#39;persName&#39;, &#39;orgName&#39;] THEN 2\r\n                WHEN ne.category in [&#39;persName_surname&#39;, &#39;persName_addName&#39;] THEN 1.5\r\n                WHEN ne.category in [&#39;date&#39;, &#39;time&#39;, &#39;persName_forename&#39;] THEN 0.5\r\n                ELSE 1.0\r\n            END) as distinctLinkNesAmount,\r\n            reduce(total=0, ne in distinctTrendNes |\r\n            total + \r\n            CASE\r\n                WHEN ne.category in [&#39;persName&#39;, &#39;orgName&#39;] THEN 2\r\n                WHEN ne.category in [&#39;persName_surname&#39;, &#39;persName_addName&#39;] THEN 1.5\r\n                WHEN ne.category in [&#39;date&#39;, &#39;time&#39;, &#39;persName_forename&#39;] THEN 0.5\r\n                ELSE 1.0\r\n            END) as distinctTrendNesAmount\r\n        WITH a, t, distinctTrendNesAmount, trendSum, distinctLinkNesAmount, linkSum,\r\n            (3*distinctTrendNesAmount + trendSum) * t.hits / 1000 as trendScore, \r\n            (3*distinctLinkNesAmount + linkSum) * ($daysDelta - duration.between(a.publication_datetime, date($currentDay)).days) as articleScore\r\n        WITH a, t, distinctTrendNesAmount, trendSum, trendScore, distinctLinkNesAmount, linkSum, articleScore,\r\n            (articleScore + trendScore) as score\r\n        ORDER BY score DESC\r\n        RETURN a as article, t, distinctTrendNesAmount, trendSum, trendScore, distinctLinkNesAmount, linkSum, articleScore, score\r\n        LIMIT 30\r\n```\r\n`daysDelta` will be usually latest 7-14 days. This query is pretty slow. Depending on the input NamedEntitiesId i takes from few seconds up to few minutes. I tried to debug this using PROFILE here it is the result:\r\n[![enter image description here][2]][2]\r\n\r\nFrom what I had read I should decrease cardinality. (or maybe something else I am happy for suggestions). But I have no idea how to do it in my query. When I have to do all this scoring. And in my query I will never have to get more then 30 results.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qBdju.png\r\n  [2]: https://i.stack.imgur.com/MjU9o.png","link":"https://stackoverflow.com/questions/76005068/optimazing-neo4j-cypher-query-for-recommendation","title":"Optimazing neo4j cypher query for recommendation"},{"tags":["neo4j","py2neo","graphene-python","flask-graphql"],"owner":{"reputation":1,"user_id":21629037,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AGNmyxYveDVPI5VieQSh4CP2iSdeZW1VCIu3tfUkmL5C=k-s256","display_name":"Martin","link":"https://stackoverflow.com/users/21629037/martin"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681352495,"creation_date":1681331942,"last_edit_date":1681352495,"question_id":75999638,"share_link":"https://stackoverflow.com/q/75999638","body_markdown":"for a project I am trying to implement a graphql endpoint via flask in order to query a neo4j-DB using py2neo and graphene.\r\n\r\nWithin a docker container I am using python 3.9 and the follwing packages are installed:\r\n- Flask==2.2.3\r\n- graphene&gt;=3.0\r\n- py2neo==2021.2.3\r\n- graphql-server[flask]\r\n- graphql-core==3.1.0\r\n\r\n\r\nMy py2neo.ogm Graph-Object looks like that:\r\n```\r\nclass Movie(BaseModel):\r\n    __primarykey__=&#39;title&#39;\r\n\r\n    id = graphene.Int()\r\n    title = graphene.String()\r\n    year = graphene.Int()\r\n    persons = RelatedFrom(&quot;Person&quot;, &quot;ACTED_IN&quot;)\r\n\r\n    def as_dict(self):\r\n        return {\r\n            &#39;id&#39;: self.id,\r\n            &#39;title&#39;: self.title,\r\n            &#39;year&#39;: self.year,\r\n        }\r\n    \r\n    def fetch(self):\r\n        return self.match(graph, self.title).first()\r\n```\r\n\r\n\r\nMy graphene schema and query class are definied like that\r\n```\r\nclass MovieSchema(graphene.ObjectType):\r\n    id = graphene.String()\r\n    title = graphene.String()\r\n    year = graphene.Int()\r\n\r\nclass Query(graphene.ObjectType):\r\n    # Hello is only used for test purposes\r\n    hello = graphene.String(description=&#39;A typical hello world&#39;)\r\n    movie = graphene.Field(lambda: MovieSchema, title=graphene.String())\r\n\r\n    def resolve_hello(self, info):\r\n        return &#39;World&#39;\r\n    \r\n    def resolve_movie(self, info, title):\r\n        return Movie.fetch(title=title)\r\n\r\nschema = graphene.Schema(query=Query)\r\n```\r\n\r\nAfter building the services using docker-compose I am receiving the following error on start-up:\r\n\r\n    Traceback (most recent call last):\r\n      File &quot;/usr/local/lib/python3.9/site-packages/graphql/type/definition.py&quot;, line 735, in fields\r\n        fields = resolve_thunk(self._fields) \r\n      File &quot;/usr/local/lib/python3.9/site-packages/graphql/type/definition.py&quot;, line 293, in resolve_thunk\r\n        return thunk() if callable(thunk) else thunk \r\n      File &quot;/usr/local/lib/python3.9/site-packages/graphene/types/schema.py&quot;, line 326, in create_fields_for_type\r\n        args[processed_arg_name] = GraphQLArgument( TypeError: __init__() got an unexpected keyword argument &#39;deprecation_reason&#39;| During handling of the above exception, another exception occurred: \r\n      File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1030, in _gcd_import \r\n      File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1007, in _find_and_load \r\n      File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 986, in _find_and_load_unlocked \r\n      File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 680, in _load_unlocked \r\n      File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 850, in exec_module \r\n      File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 228, in _call_with_frames_removed \r\n      File &quot;/var/www/server.py&quot;, line 11, in &lt;module&gt;\r\n        from src.graphql.schemas import schema \r\n      File &quot;/var/www/src/graphql/schemas.py&quot;, line 47, in &lt;module&gt;\r\n        schema = graphene.Schema(query=Query) \r\n      File &quot;/usr/local/lib/python3.9/site-packages/graphene/types/schema.py&quot;, line 440, in __init__\r\n        self.graphql_schema = GraphQLSchema( \r\n      File &quot;/usr/local/lib/python3.9/site-packages/graphql/type/schema.py&quot;, line 205, in __init__\r\n         collect_referenced_types(query) \r\n      File &quot;/usr/local/lib/python3.9/site-packages/graphql/type/schema.py&quot;, line 382, in collect_referenced_types\r\n        for field in named_type.fields.values(): \r\n      File &quot;/usr/local/lib/python3.9/functools.py&quot;, line 993, in __get__\r\n        val = self.func(instance) \r\n      File &quot;/usr/local/lib/python3.9/site-packages/graphql/type/definition.py&quot;, line 737, in fields\r\n        raise TypeError(f&quot;{self.name} fields cannot be resolved. {error}&quot;) TypeError: Query fields cannot be resolved. __init__() got an unexpected keyword argument &#39;deprecation_reason&#39;\r\n\r\nThe problem is definitely caused by the title argument in this line:\r\n`movie = graphene.Field(lambda: MovieSchema, title=graphene.String())`\r\n\r\nWhenever I try to run the container without the title argument in the query class the container starts as expected and I can see the correct schema via the graphql interface. \r\n\r\nMany thanks in advance for your help!","link":"https://stackoverflow.com/questions/75999638/using-flask-with-graphene-and-py2neo-cannot-use-variables-in-query-class-resolv","title":"Using Flask with graphene and py2neo: Cannot use variables in Query Class/resolver"},{"tags":["neo4j","graphql","neo4j-ogm","neo4j-graphql-js"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1681330180,"post_id":75999123,"comment_id":134040920,"link":"https://stackoverflow.com/questions/75999123/neo4j-graphql-error-implementing-interface#comment134040920_75999123"},{"owner":{"reputation":55,"user_id":919820,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b19b0be1c78febb7124389b020c71d09?s=256&d=identicon&r=PG","display_name":"ltmutiwekuziwa","link":"https://stackoverflow.com/users/919820/ltmutiwekuziwa"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1681331985,"post_id":75999123,"comment_id":134041276,"link":"https://stackoverflow.com/questions/75999123/neo4j-graphql-error-implementing-interface#comment134041276_75999123"}],"owner":{"reputation":55,"user_id":919820,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b19b0be1c78febb7124389b020c71d09?s=256&d=identicon&r=PG","display_name":"ltmutiwekuziwa","link":"https://stackoverflow.com/users/919820/ltmutiwekuziwa"},"last_editor":{"reputation":55,"user_id":919820,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b19b0be1c78febb7124389b020c71d09?s=256&d=identicon&r=PG","display_name":"ltmutiwekuziwa","link":"https://stackoverflow.com/users/919820/ltmutiwekuziwa"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681400606,"creation_date":1681327677,"last_edit_date":1681400606,"question_id":75999123,"share_link":"https://stackoverflow.com/q/75999123","body_markdown":"I have a graphql interface like this\r\n\r\n```\r\ninterface Verifiable {\r\n    verifications: [Verification!]!\r\n}\r\n```\r\nI then implement that interface like this:\r\n\r\n```\r\ntype Address implements Verifiable  @node(labels: [&quot;Address&quot;, &quot;Verifiable&quot;]) @key(fields:&quot;id&quot;){\r\n  id: ID! @id\r\n  street: String\r\n  suburb: String\r\n  city: String\r\n  stateProvince: String\r\n  country: String\r\n  verifications: [Verification!]! @relationship(type: &quot;VERIFIED&quot;, direction: OUT)\r\n}\r\n```\r\nOn running the project, I am getting this error:\r\n\r\n```\r\nApr-12-2023 21:16:52    error   GQL API        The schema is not a valid GraphQL schema.. Caused by:\r\n[&lt;unnamed&gt;] Interface field VerifiableEventPayload.verifications expected but AddressEventPayload does not provide it.\r\n\r\nGraphQL request:582:3\r\n581 | interface VerifiableEventPayload {\r\n582 |   verifications: [Verification!]!\r\n    |   ^\r\n583 | }\r\n\r\nGraphQL request:712:1\r\n711 |\r\n712 | type AddressEventPayload implements VerifiableEventPayload {\r\n    | ^\r\n713 |   id: ID!\r\n```\r\nImplementing my graphql server with apollo server v4. The error however occurs at getting the neo4j schema before I instantiate the apollo server.\r\n\r\nMy package.json dependencies:\r\n\r\n```\r\n&quot;dependencies&quot;: {\r\n    &quot;@apollo/server&quot;: &quot;^4.5.0&quot;,\r\n    &quot;@apollo/subgraph&quot;: &quot;^2.3.4&quot;,\r\n    &quot;@escape.tech/graphql-armor&quot;: &quot;1.8.1&quot;,\r\n    &quot;@graphql-tools/load&quot;: &quot;^7.8.13&quot;,\r\n    &quot;@graphql-tools/load-files&quot;: &quot;^6.6.1&quot;,\r\n    &quot;@graphql-tools/merge&quot;: &quot;^8.4.0&quot;,\r\n    &quot;@graphql-tools/schema&quot;: &quot;^9.0.17&quot;,\r\n    &quot;@graphql-tools/utils&quot;: &quot;^9.2.1&quot;,\r\n    &quot;@neo4j/cypher-builder&quot;: &quot;^0.2.1&quot;,\r\n    &quot;@neo4j/graphql&quot;: &quot;^3.17.1&quot;,\r\n    &quot;@neo4j/graphql-ogm&quot;: &quot;^3.17.1&quot;,\r\n    &quot;@neo4j/graphql-plugin-auth&quot;: &quot;^2.1.0&quot;,\r\n    &quot;@neo4j/introspector&quot;: &quot;^1.0.3&quot;,\r\n    &quot;bcrypt&quot;: &quot;^5.1.0&quot;,\r\n    &quot;cookie-parser&quot;: &quot;^1.4.6&quot;,\r\n    &quot;cors&quot;: &quot;^2.8.5&quot;,\r\n    &quot;dotenv&quot;: &quot;^16.0.3&quot;,\r\n    &quot;express&quot;: &quot;^4.18.2&quot;,\r\n    &quot;graphql&quot;: &quot;^16.6.0&quot;,\r\n    &quot;graphql-tag&quot;: &quot;^2.12.6&quot;,\r\n    &quot;jsonwebtoken&quot;: &quot;^9.0.0&quot;,\r\n    &quot;lodash&quot;: &quot;^4.17.21&quot;,\r\n    &quot;neo4j-driver&quot;: &quot;^5.6.0&quot;,\r\n    &quot;nodemailer&quot;: &quot;^6.9.1&quot;,\r\n    &quot;winston&quot;: &quot;^3.8.2&quot;\r\n  }\r\n```\r\n\r\nAny ideas what i am getting wrong?\r\n\r\nThanks in advance.","link":"https://stackoverflow.com/questions/75999123/neo4j-graphql-error-implementing-interface","title":"Neo4j Graphql Error Implementing Interface"},{"tags":["neo4j","neo4j-driver"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1681313653,"post_id":75996997,"comment_id":134037161,"link":"https://stackoverflow.com/questions/75996997/stop-neo4j-from-racing-to-execute-command#comment134037161_75996997"},{"owner":{"reputation":241,"user_id":15014953,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-dyZtrmkpyWc/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm9_T1SWJWfoG9CKBPuzHA785bmBw/s96-c/photo.jpg?sz=256","display_name":"le Minh Nguyen","link":"https://stackoverflow.com/users/15014953/le-minh-nguyen"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1681314108,"post_id":75996997,"comment_id":134037277,"link":"https://stackoverflow.com/questions/75996997/stop-neo4j-from-racing-to-execute-command#comment134037277_75996997"}],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681317721,"creation_date":1681317721,"answer_id":75997933,"question_id":75996997,"share_link":"https://stackoverflow.com/a/75997933","body_markdown":"It looks like `set_label_query` expects `{vertical_original}` to be replaced with some value, but your code is only replacing `{vertical}` with a value. Therefore, `set_label_query` ends up not doing anything.","link":"https://stackoverflow.com/questions/75996997/stop-neo4j-from-racing-to-execute-command/75997933#75997933","title":"stop neo4j from racing to execute command"}],"owner":{"reputation":241,"user_id":15014953,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-dyZtrmkpyWc/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm9_T1SWJWfoG9CKBPuzHA785bmBw/s96-c/photo.jpg?sz=256","display_name":"le Minh Nguyen","link":"https://stackoverflow.com/users/15014953/le-minh-nguyen"},"last_editor":{"reputation":241,"user_id":15014953,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-dyZtrmkpyWc/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm9_T1SWJWfoG9CKBPuzHA785bmBw/s96-c/photo.jpg?sz=256","display_name":"le Minh Nguyen","link":"https://stackoverflow.com/users/15014953/le-minh-nguyen"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75997933,"answer_count":1,"score":0,"last_activity_date":1681317721,"creation_date":1681311583,"last_edit_date":1681314086,"question_id":75996997,"share_link":"https://stackoverflow.com/q/75996997","body_markdown":"In my following block of code, sometime a DataFrame is created, sometime it is not.\r\n\r\nIt seems like the issue is due to the fact that neo4j is racing to execute the command. I have tried to split the run commands into multiple session like the code below, I have also tried to include all of them into 1 session. Yet the consistency of the number of time something is return is still low. How can I stop this eager operation?\r\n\r\n    set_label_query = &quot;&quot;&quot;\r\n    MATCH (s:Startup)\r\n    WHERE &quot;{vertical_original}&quot; IN s.Verticals\r\n    WITH s\r\n    MATCH (s)&lt;-[:INVESTOR_INVESTED_IN]-(i:Investor)\r\n    WITH s, i\r\n    MATCH(i)&lt;-[:MADE_LP_COMMITMENT_TO_VC]-(l:Limited_Partner)\r\n    SET i:{vertical}, l:{vertical}, s:{vertical}\r\n    RETURN COUNT(i)\r\n    ;\r\n    &quot;&quot;&quot;\r\n    create_gds_project_query = &#39;&#39;&#39;\r\n    CALL gds.graph.project(\r\n      \t\t&#39;climate_cleantech_undirected&#39;,\r\n      \t\t[&#39;{vertical}&#39;, &#39;Limited_Partner&#39;, &#39;Investor&#39;, &#39;Startup&#39;],\r\n      \t\t{{INVESTOR_INVESTED_IN: {{orientation: &#39;UNDIRECTED&#39;}},\r\n            MADE_LP_COMMITMENT_TO_VC: {{orientation: &#39;UNDIRECTED&#39;}}\r\n     \t\t}}\r\n    \t\t);\r\n    &#39;&#39;&#39;\r\n    \r\n    create_rank_query = &#39;&#39;&#39;\r\n    CALL gds.pageRank.stream(&#39;climate_cleantech_undirected&#39;, {{\r\n      \t\t\tnodeLabels:[&#39;{vertical}&#39;] ,\r\n      \t\t\tmaxIterations: 20,\r\n      \t\t\tdampingFactor: 0.85\r\n    \t\t}})\r\n    \t\tYIELD nodeId, score\r\n    \t\tWITH gds.util.asNode(nodeId) AS node, score\r\n    \t\tWHERE &#39;Investor&#39; IN labels(node)\r\n    \t\tRETURN node.Name, node.Website, score\r\n    \t\tORDER BY score DESC;\r\n    &#39;&#39;&#39;\r\n    \r\n    remove_graph_query = &quot;CALL gds.graph.drop(&#39;climate_cleantech_undirected&#39;, false)&quot;\r\n    with neo4j_driver.session() as session:\r\n        with session.begin_transaction() as tx:\r\n            tx.run(set_label_query.format(vertical=vertical))\r\n            tx.run(create_gds_project_query.format(vertical=vertical))\r\n            result_data = tx.run(create_rank_query.format(vertical=vertical)).data()\r\n            df = pd.DataFrame(result_data)\r\n            print(df)\r\n            tx.commit()\r\n    print(&#39;execute 2&#39;)\r\n    with neo4j_driver.session() as session:\r\n        with session.begin_transaction() as tx:\r\n            tx.run(remove_label_query.format(vertical=vertical))\r\n            tx.run(remove_graph_query)\r\n            tx.commit()\r\n\r\nresult when something is return:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Xc6U2.png","link":"https://stackoverflow.com/questions/75996997/stop-neo4j-from-racing-to-execute-command","title":"stop neo4j from racing to execute command"},{"tags":["database","database-design","neo4j"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681319964,"last_edit_date":1681319964,"creation_date":1681318812,"answer_id":75998084,"question_id":75995357,"share_link":"https://stackoverflow.com/a/75998084","body_markdown":"There is not enough info about your specific use case to determine the proper data model, so here are some general ideas.\r\n\r\nA `Course` should contain *course-specific* properties that rarely need to change across sections and lecturers (maybe `building`, `room`, etc.).\r\n\r\nIdeally, you should only need a single `TEACHES` relationship between a lecturer and a course (or section). You would need to arrange the properties to make that possible. For example, some of its properties could be lists instead of scalars.\r\n\r\nIf a `Course` can have multiple sections and lecturers, then you could introduce `Section` nodes containing section-specific properties (some properties, like `weekday`, probably should be lists instead of scalars).","link":"https://stackoverflow.com/questions/75995357/what-is-the-best-practice-to-store-time-related-events-in-neo4j/75998084#75998084","title":"What is the best practice to store time-related events in neo4j"}],"owner":{"reputation":43,"user_id":15101361,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/80627fb19fc7b81388b93244907dedb7?s=256&d=identicon&r=PG&f=1","display_name":"Navxihziq","link":"https://stackoverflow.com/users/15101361/navxihziq"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681319964,"creation_date":1681301826,"question_id":75995357,"share_link":"https://stackoverflow.com/q/75995357","body_markdown":"I am trying to create a contact network on a neo4j graph database instance. When I am fumbling around with the relationships between Lecturers and Lectures, I need to store the time schedules of each lecture session. \r\n\r\nMy previous idea was to embed such info as attributes of relations. However, it made the graph look messy and **took forever to create all relations**. I wonder what is the best practice to store the event/transaction-like data in a graph database?\r\n\r\nI will frequently retrieve the lectures that the teachers teach at each time slot. This means I need to retrieve the entire course schedule of a given faculty at a given academic week and day.\r\n\r\nHere is a snapshot of a subplot containing courses and teachers.\r\n\r\n[![visualisation of a subplot][1]][1]\r\n\r\nThe green nodes are lectures. And the yellow ones denote lecturers. The relationships are named &#39;TEACHES&#39; and each of them has a few specific attributes, including:\r\n\r\n```\r\n&lt;id&gt;: 1331\r\nbuilding: Humanities Building\r\nperiod: 6\r\nroom: 806\r\nweek: 12\r\nweekday: 5\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/hP4nt.png","link":"https://stackoverflow.com/questions/75995357/what-is-the-best-practice-to-store-time-related-events-in-neo4j","title":"What is the best practice to store time-related events in neo4j"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1681294952,"post_id":75993856,"comment_id":134032311,"link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union#comment134032311_75993856"},{"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1681295437,"post_id":75993856,"comment_id":134032444,"link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union#comment134032444_75993856"}],"answers":[{"comments":[{"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"edited":false,"score":0,"creation_date":1681296416,"post_id":75994508,"comment_id":134032656,"link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union/75994508#comment134032656_75994508"},{"owner":{"reputation":12305,"user_id":18482310,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/46b636fc38a1c0e7399038d23fbe718d?s=256&d=identicon&r=PG&f=1","display_name":"nimrod serok","link":"https://stackoverflow.com/users/18482310/nimrod-serok"},"edited":false,"score":0,"creation_date":1681296519,"post_id":75994508,"comment_id":134032679,"link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union/75994508#comment134032679_75994508"},{"owner":{"reputation":12305,"user_id":18482310,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/46b636fc38a1c0e7399038d23fbe718d?s=256&d=identicon&r=PG&f=1","display_name":"nimrod serok","link":"https://stackoverflow.com/users/18482310/nimrod-serok"},"edited":false,"score":0,"creation_date":1681296650,"post_id":75994508,"comment_id":134032711,"link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union/75994508#comment134032711_75994508"},{"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"edited":false,"score":0,"creation_date":1681297046,"post_id":75994508,"comment_id":134032793,"link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union/75994508#comment134032793_75994508"},{"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"edited":false,"score":0,"creation_date":1681299351,"post_id":75994508,"comment_id":134033281,"link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union/75994508#comment134033281_75994508"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"reply_to_user":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"edited":false,"score":0,"creation_date":1681299414,"post_id":75994508,"comment_id":134033295,"link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union/75994508#comment134033295_75994508"}],"tags":[],"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"last_editor":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681297551,"last_edit_date":1681297551,"creation_date":1681296031,"answer_id":75994508,"question_id":75993856,"share_link":"https://stackoverflow.com/a/75994508","body_markdown":"Your schema can be modeled in a better way. Instead of having company names as Node Labels, you can store them as a part of the company node property let&#39;s say `name`. And instead of storing preferences as a concatenated String, you can store user-preferred companies in an array, like this: `[&quot;HP&quot;, &quot;IBM&quot;]`, now your cypher query becomes fairly simple, like this:\r\n\r\n    MATCH (u:USER {id: 101})\r\n    MATCH (n:computer)-[:MANUFACTURED_BY]-&gt;(c:Company)\r\n    WHERE c.name IN u.preferences \r\n    RETURN n;\r\n\r\nIf you want to keep the current schema itself, then try this:\r\n\r\n    MATCH (u:USER {id: 101})\r\n    RETURN  \r\n    CASE u.preference \r\n    WHEN &#39;HP&#39;    THEN  [(n:computer)-[r: MANUFACTURED_BY]-&gt;(c:HP) | n]\r\n    WHEN &#39;IBM&#39;   THEN [(n:computer)-[r:ASSEMBELED_BY]-&gt;(c:IBM) | n] \r\n    WHEN &#39;HP_IBM&#39; THEN [(n:computer)-[r]-&gt;(c) WHERE ANY(x IN split(c.preference, &#39;_&#39;) WHERE x IN labels(c)) | n] END\r\n    AS result;\r\n\r\nNotice, that I have removed the relationship type from the path match because your relationship type varies with the company, so if your computer nodes are linked with the company, via a lot of distinct relationship types. This query might not work.","link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union/75994508#75994508","title":"neo4j: cypher case and union"}],"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"last_editor":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75994508,"answer_count":1,"score":1,"last_activity_date":1681297551,"creation_date":1681291383,"last_edit_date":1681297201,"question_id":75993856,"share_link":"https://stackoverflow.com/q/75993856","body_markdown":"We are using neo4j v4.\r\n\r\nI have USER, COMPUTER, COMPANY nodes(IBM, HP, DELL etc),\r\n\r\nHow can I make the HP_IBM case work(i.e. when u.preference is HP_IBM, I want the computers manufactured by both HP and IBM)?\r\n\r\n\r\n    MATCH (u:USER {id: 101})\r\n    RETURN  \r\n    CASE u.preference \r\n    WHEN &#39;HP&#39;    THEN  [(n:computer)-[r: MANUFACTURED_BY]-&gt;(c:HP) | n]\r\n    WHEN &#39;IBM&#39;   THEN [(n:computer)-[r:ASSEMBELED_BY]-&gt;(c:IBM) | n] \r\n    WHEN &#39;DELL&#39;   THEN [(n:computer)-[r:ASSEMBELED_BY]-&gt;(c:DELL) | n] \r\n    WHEN &#39;HP_IBM&#39; THEN xxxxxxx END\r\n    AS result;\r\n\r\nAny other queries/approaches are welcome!","link":"https://stackoverflow.com/questions/75993856/neo4j-cypher-case-and-union","title":"neo4j: cypher case and union"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":2,"creation_date":1681289206,"post_id":75993236,"comment_id":134030951,"link":"https://stackoverflow.com/questions/75993236/neo4j-cypher-match-nodes-by-multiple-lables-or-clause#comment134030951_75993236"},{"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1681291741,"post_id":75993236,"comment_id":134031522,"link":"https://stackoverflow.com/questions/75993236/neo4j-cypher-match-nodes-by-multiple-lables-or-clause#comment134031522_75993236"}],"answers":[{"tags":[],"owner":{"reputation":1123,"user_id":2230325,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e55799b07b888d8fe05edc45fcece474?s=256&d=identicon&r=PG","display_name":"rMonteiro","link":"https://stackoverflow.com/users/2230325/rmonteiro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681370112,"creation_date":1681370112,"answer_id":76002634,"question_id":75993236,"share_link":"https://stackoverflow.com/a/76002634","body_markdown":"You can use the `UNION` operator in Cypher\r\n```\r\nMATCH (c:computer)&lt;-[:MANUFACTURED_BY]-(comp:HP)\r\nRETURN c\r\nUNION\r\nMATCH (c:computer)&lt;-[:MANUFACTURED_BY]-(comp:IBM)\r\nRETURN c\r\n```","link":"https://stackoverflow.com/questions/75993236/neo4j-cypher-match-nodes-by-multiple-lables-or-clause/76002634#76002634","title":"neo4j: cypher match nodes by multiple lables OR clause"}],"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681370112,"creation_date":1681286741,"question_id":75993236,"share_link":"https://stackoverflow.com/q/75993236","body_markdown":"I have computer nodes, company nodes(IBM, HP, DELL etc),\r\n\r\nIS it possible to fetch all computers that are manufactured by IBM OR HP, **without using WHERE clause**?\r\n\r\nBelow cyphers are giving syntax error:\r\n\r\n    MATCH (c:computer)&lt;-[:MANUFACTURED_BY]-(comp:HP|IBM) return c\r\n    MATCH (c:computer)&lt;-[:MANUFACTURED_BY]-(comp:HP|:IBM) return c\r\n    MATCH (c:computer)&lt;-[:MANUFACTURED_BY]-(comp:HP OR :IBM) return c\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/75993236/neo4j-cypher-match-nodes-by-multiple-lables-or-clause","title":"neo4j: cypher match nodes by multiple lables OR clause"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1681260199,"post_id":75990790,"comment_id":134026907,"link":"https://stackoverflow.com/questions/75990790/neo4j-traverse-api-vs-cypher#comment134026907_75990790"},{"owner":{"reputation":35,"user_id":15778625,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/86f676726276eeff2428fee92ddcdd91?s=256&d=identicon&r=PG&f=1","display_name":"jvav","link":"https://stackoverflow.com/users/15778625/jvav"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1681289847,"post_id":75990790,"comment_id":134031103,"link":"https://stackoverflow.com/questions/75990790/neo4j-traverse-api-vs-cypher#comment134031103_75990790"}],"answers":[{"comments":[{"owner":{"reputation":35,"user_id":15778625,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/86f676726276eeff2428fee92ddcdd91?s=256&d=identicon&r=PG&f=1","display_name":"jvav","link":"https://stackoverflow.com/users/15778625/jvav"},"edited":false,"score":0,"creation_date":1681290124,"post_id":75990993,"comment_id":134031176,"link":"https://stackoverflow.com/questions/75990790/neo4j-traverse-api-vs-cypher/75990993#comment134031176_75990993"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681260240,"last_edit_date":1681260240,"creation_date":1681258863,"answer_id":75990993,"question_id":75990790,"share_link":"https://stackoverflow.com/a/75990993","body_markdown":"There is no need to write a custom procedure. It is easy to simplify your `Cypher` query to handle any number of tags.\r\n\r\nFor example, this query assumes you pass it a `$tagNames` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) containing a list of tag names:\r\n\r\n    MATCH (image:Image)\r\n    WHERE ALL(t IN $tagNames WHERE EXISTS((image)-[:has_tag]-&gt;({name: t})))\r\n    RETURN image","link":"https://stackoverflow.com/questions/75990790/neo4j-traverse-api-vs-cypher/75990993#75990993","title":"Neo4j Traverse API vs Cypher"}],"owner":{"reputation":35,"user_id":15778625,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/86f676726276eeff2428fee92ddcdd91?s=256&d=identicon&r=PG&f=1","display_name":"jvav","link":"https://stackoverflow.com/users/15778625/jvav"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75990993,"answer_count":1,"score":0,"last_activity_date":1681260240,"creation_date":1681255467,"question_id":75990790,"share_link":"https://stackoverflow.com/q/75990790","body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lcP3v.pngI\r\n\r\nI am trying to verify if an image Node is connected with a group of tags.\r\nThe picture above shows my procedure code which can be called like this: `&quot;CALL myProcedure(imageNode, [&#39;tag1&#39;, &#39;tag2&#39;]) YIELD node RETURN node&quot;`.\r\n\r\nThe procedure is 2x slower than cypher query: `&quot;MATCH (imageNode)-[:has_tag]-&gt;(t:Tag) WHERE t.name=&#39;tag1&#39; WITH imageNode MATCH (imageNode)-[:has_tag]-&gt;(t:Tag) WHERE t.name=&#39;tag2&#39; RETURN imageNode&quot;`\r\n\r\nWhy this could be happend? Did i make some mistake in my procedure? If there are too more tags the cypher query will be too long， this is why i am writing directly the verification logic into a procedure.\r\n\r\nAny suggestions welcome, thanks :).","link":"https://stackoverflow.com/questions/75990790/neo4j-traverse-api-vs-cypher","title":"Neo4j Traverse API vs Cypher"},{"tags":["json","go","neo4j","graph-theory"],"answers":[{"comments":[{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1681283765,"post_id":75989452,"comment_id":134029691,"link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#comment134029691_75989452"},{"owner":{"reputation":18426,"user_id":16582,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG","display_name":"ravenspoint","link":"https://stackoverflow.com/users/16582/ravenspoint"},"reply_to_user":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1681309470,"post_id":75989452,"comment_id":134035963,"link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#comment134035963_75989452"},{"owner":{"reputation":19,"user_id":10037345,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-grwn0QykOQE/AAAAAAAAAAI/AAAAAAAAIuQ/O3IttKb8DzU/photo.jpg?sz=256","display_name":"EricM","link":"https://stackoverflow.com/users/10037345/ericm"},"edited":false,"score":0,"creation_date":1681372623,"post_id":75989452,"comment_id":134046464,"link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#comment134046464_75989452"},{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1681388830,"post_id":75989452,"comment_id":134050369,"link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#comment134050369_75989452"},{"owner":{"reputation":18426,"user_id":16582,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG","display_name":"ravenspoint","link":"https://stackoverflow.com/users/16582/ravenspoint"},"reply_to_user":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1681393488,"post_id":75989452,"comment_id":134051581,"link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#comment134051581_75989452"},{"owner":{"reputation":18426,"user_id":16582,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG","display_name":"ravenspoint","link":"https://stackoverflow.com/users/16582/ravenspoint"},"reply_to_user":{"reputation":19,"user_id":10037345,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-grwn0QykOQE/AAAAAAAAAAI/AAAAAAAAIuQ/O3IttKb8DzU/photo.jpg?sz=256","display_name":"EricM","link":"https://stackoverflow.com/users/10037345/ericm"},"edited":false,"score":0,"creation_date":1681393529,"post_id":75989452,"comment_id":134051597,"link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#comment134051597_75989452"},{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1681402193,"post_id":75989452,"comment_id":134054096,"link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#comment134054096_75989452"},{"owner":{"reputation":18426,"user_id":16582,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG","display_name":"ravenspoint","link":"https://stackoverflow.com/users/16582/ravenspoint"},"edited":false,"score":0,"creation_date":1681403227,"post_id":75989452,"comment_id":134054352,"link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#comment134054352_75989452"}],"tags":[],"owner":{"reputation":18426,"user_id":16582,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG","display_name":"ravenspoint","link":"https://stackoverflow.com/users/16582/ravenspoint"},"last_editor":{"reputation":18426,"user_id":16582,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG","display_name":"ravenspoint","link":"https://stackoverflow.com/users/16582/ravenspoint"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681241628,"last_edit_date":1681241628,"creation_date":1681240925,"answer_id":75989452,"question_id":75989141,"share_link":"https://stackoverflow.com/a/75989452","body_markdown":"Give each node a unique index.\r\n\r\nReplace\r\n\r\n    Siblings    []*Node \r\n\r\nwith\r\n\r\n    std::vector&lt;int&gt; sibling_index","link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings/75989452#75989452","title":"How to represent a Neo4J GoGM node related to siblings?"}],"owner":{"reputation":19,"user_id":10037345,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-grwn0QykOQE/AAAAAAAAAAI/AAAAAAAAIuQ/O3IttKb8DzU/photo.jpg?sz=256","display_name":"EricM","link":"https://stackoverflow.com/users/10037345/ericm"},"last_editor":{"reputation":18426,"user_id":16582,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=256&d=identicon&r=PG","display_name":"ravenspoint","link":"https://stackoverflow.com/users/16582/ravenspoint"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681241628,"creation_date":1681238511,"last_edit_date":1681240939,"question_id":75989141,"share_link":"https://stackoverflow.com/q/75989141","body_markdown":"I&#39;ve create a graph database where a node can be related to other nodes of the same type/label: I could get such nodes by running a simple query like:\r\n`MATCH (n1:Node)-[]-(n2:Node) RETURN n1,n2`\r\n\r\nI&#39;m using GoGMv2 to map the Neo4J nodes to their struct counterparts.\r\nThe Node GoGM struct would looks like\r\n```\r\ntype Node struct {\r\n\t// provides required node fields\r\n\tgogm.BaseNode\r\n\r\n\tName        string        `gogm:&quot;name=name&quot; json:&quot;name&quot;`\r\n\tSiblings    []*Node       `gogm:&quot;direction=both;relationship=RELATES_TO&quot; json:&quot;siblings&quot;`\r\n}\r\n```\r\n\r\n\r\nIt&#39;s super classic with graphs but the serialization as JSON fails with the Marshal or Encode functions because they can&#39;t represent cyclic structs (Marshal returns a value error: `json: unsupported value: encountered a cycle via []*Node`)\r\n\r\nAny (re)design or implementation ideas?","link":"https://stackoverflow.com/questions/75989141/how-to-represent-a-neo4j-gogm-node-related-to-siblings","title":"How to represent a Neo4J GoGM node related to siblings?"},{"tags":["neo4j"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1681229164,"post_id":75986855,"comment_id":134021340,"link":"https://stackoverflow.com/questions/75986855/neo4j-server-plugin-directory#comment134021340_75986855"}],"answers":[{"comments":[{"owner":{"reputation":13,"user_id":19281880,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG","display_name":"Raha","link":"https://stackoverflow.com/users/19281880/raha"},"edited":false,"score":0,"creation_date":1681290535,"post_id":75988271,"comment_id":134031268,"link":"https://stackoverflow.com/questions/75986855/neo4j-server-plugin-directory/75988271#comment134031268_75988271"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":13,"user_id":19281880,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG","display_name":"Raha","link":"https://stackoverflow.com/users/19281880/raha"},"edited":false,"score":0,"creation_date":1681312585,"post_id":75988271,"comment_id":134036872,"link":"https://stackoverflow.com/questions/75986855/neo4j-server-plugin-directory/75988271#comment134036872_75988271"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681231505,"last_edit_date":1681231505,"creation_date":1681231172,"answer_id":75988271,"question_id":75986855,"share_link":"https://stackoverflow.com/a/75988271","body_markdown":"You do not need to create the `plugins` directory unless you want it in a non-default location.\r\n\r\nOn EC2, the neo4j directories (like `plugins)` are *usually* under `/var/lib/neo4j`. And the configuration files are *usually* under `/etc/neo4j`.\r\n\r\nAnd here is how to figure out the location for sure, assuming the neo4j server is already installed:\r\n\r\n 1. Execute `sudo systemctl status neo4j`.\r\n 2. Look at the &quot;Loaded: ...&quot; line in the result, and copy the `neo4j.service` path (e.g., &quot;/usr/lib/systemd/system/neo4j.service&quot;).\r\n 3. Execute `grep Environment &lt;...neo4j.service path...&gt;`. You&#39;ll get a result like:\r\n\r\n        Environment=&quot;NEO4J_CONF=/etc/neo4j&quot; &quot;NEO4J_HOME=/var/lib/neo4j&quot;\r\n 5. The config files are under the `NEO4J_CONF` directory, and the special neo4j directories are under the `NEO4J_HOME` directory.\r\n\r\nUnfortunately, the above environment variables are not available from the command line.\r\n\r\nAs for your second question (which should have been posed in a new SO Question), all neo4j commands need to be executed as the `neo4j` user. To do that, you can use this command: `sudo -u neo4j &lt;neo4j-command&gt;`","link":"https://stackoverflow.com/questions/75986855/neo4j-server-plugin-directory/75988271#75988271","title":"Neo4j server plugin directory"}],"owner":{"reputation":13,"user_id":19281880,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f1e65a6d7ba066d572a5b8f0f0fe4cf4?s=256&d=identicon&r=PG","display_name":"Raha","link":"https://stackoverflow.com/users/19281880/raha"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75988271,"answer_count":1,"score":0,"last_activity_date":1681231505,"creation_date":1681222065,"last_edit_date":1681229139,"question_id":75986855,"share_link":"https://stackoverflow.com/q/75986855","body_markdown":"I am trying to install GDS on a neo4j server (`Linux`, `EC2`), community edition. But there is no `plugins` directory, I only have `bin` and `lib`.\r\n\r\nIs it possible to create one next to `lib` and `bin`?\r\n\r\nAlso when I try to dump my graph I get permission error. How can I resolve this?","link":"https://stackoverflow.com/questions/75986855/neo4j-server-plugin-directory","title":"Neo4j server plugin directory"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":12305,"user_id":18482310,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/46b636fc38a1c0e7399038d23fbe718d?s=256&d=identicon&r=PG&f=1","display_name":"nimrod serok","link":"https://stackoverflow.com/users/18482310/nimrod-serok"},"last_editor":{"reputation":12305,"user_id":18482310,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/46b636fc38a1c0e7399038d23fbe718d?s=256&d=identicon&r=PG&f=1","display_name":"nimrod serok","link":"https://stackoverflow.com/users/18482310/nimrod-serok"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681109700,"last_edit_date":1681109700,"creation_date":1681109068,"answer_id":75974852,"question_id":75974701,"share_link":"https://stackoverflow.com/a/75974852","body_markdown":"For a specific folder, one option is:\r\n```\r\nMATCH (n:FOLDER)\r\nWHERE n.key = 1\r\nOPTIONAL MATCH (n)--(m)\r\nWITH DISTINCT labels(m) AS type, COLLECT (id(m)) AS res\r\nORDER BY type[0]\r\nLIMIT 1\r\nRETURN res\r\n```\r\nWhich returns the expected output on the sample data:\r\n```\r\nMERGE (a1:FOLDER {key:1})    \r\nMERGE (a2:TYPE_A {key:2})   \r\nMERGE (a3:TYPE_A {key:3})\r\nMERGE (a4:TYPE_B {key:4})\r\nMERGE (b1:FOLDER {key:5})\r\nMERGE (b2:TYPE_B {key:6})\r\nMERGE (c1:FOLDER {key:7})\r\n\r\nMERGE (a1)-[:CONTAINS]-(a2)\r\nMERGE (a1)-[:CONTAINS]-(a3)\r\nMERGE (a1)-[:CONTAINS]-(a4)\r\nMERGE (b1)-[:CONTAINS]-(b2)\r\n```\r\n\r\nIf you want the results for all your folders in one query, you can do:\r\n```\r\nMATCH (n:FOLDER)\r\nOPTIONAL MATCH (n)--(m)\r\nWITH DISTINCT labels(m) AS type, COLLECT (id(m)) AS res, id(n) AS folder\r\nORDER BY type[0]\r\nWITH DISTINCT folder, COLLECT (res) AS res\r\nRETURN res[0], folder\r\n```","link":"https://stackoverflow.com/questions/75974701/neo4j-cypher-if-else/75974852#75974852","title":"neo4j: cypher if else"},{"comments":[{"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"edited":false,"score":0,"creation_date":1681130388,"post_id":75975283,"comment_id":134002877,"link":"https://stackoverflow.com/questions/75974701/neo4j-cypher-if-else/75975283#comment134002877_75975283"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"reply_to_user":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"edited":false,"score":1,"creation_date":1681130636,"post_id":75975283,"comment_id":134002919,"link":"https://stackoverflow.com/questions/75974701/neo4j-cypher-if-else/75975283#comment134002919_75975283"}],"tags":[],"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"last_editor":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681124382,"last_edit_date":1681124382,"creation_date":1681113324,"answer_id":75975283,"question_id":75974701,"share_link":"https://stackoverflow.com/a/75975283","body_markdown":"One way is to use `apoc.do.when` to fetch the `ids` of `TYPE_B` conditionally, when no `TYPE_A` nodes are present. Like this:\r\n\r\n    MATCH (n:FOLDER)\r\n    OPTIONAL MATCH (n)-[:CONTAINS]-(m:TYPE_A)\r\n    WITH n, collect(id(m)) AS typeAIds\r\n    CALL apoc.do.when(\r\n       size(typeAIds) = 0, \r\n       &#39;OPTIONAL MATCH (n)-[:CONTAINS]-(m:TYPE_B) WITH n, collect(id(m)) AS typeBIds RETURN typeBIds&#39;, \r\n       &#39;RETURN [] as typeBIds&#39;, \r\n       {n: n}\r\n    ) \r\n    YIELD value\r\n    RETURN n, typeAIds + value.typeBIds AS ids\r\n\r\nIn this query, we first fetch the `TYPE_A` node ids and collect them in an array. If those `ids` are not present, then we fetch `TYPE_B` node ids, within [`apoc.do.when`][1]. Finally, we return the output. This is a bit more optimized as we only fetch the relationships if needed. You will need to install, `APOC` library for this query to work. Another variant of the same query is this:\r\n\r\n    MATCH (n:FOLDER)\r\n    CALL apoc.do.when(\r\n        SIZE([(n)-[:CONTAINS]-(:TYPE_A) | 1]) &lt;&gt; 0, \r\n        &#39;OPTIONAL MATCH (n)-[:CONTAINS]-(m:TYPE_A) WITH n, collect(id(m)) AS typeAIds RETURN typeAIds&#39;, \r\n        &#39;RETURN [] as typeAIds&#39;, \r\n        {n: n}\r\n    )\r\n    YIELD value AS v1\r\n    CALL apoc.do.when(\r\n        SIZE([(n)-[:CONTAINS]-(:TYPE_B) | 1]) &lt;&gt; 0 AND SIZE(v1.typeAIds) = 0, \r\n        &#39;OPTIONAL MATCH (n)-[:CONTAINS]-(m:TYPE_B) WITH n, collect(id(m)) AS typeBIds RETURN typeBIds&#39;, \r\n        &#39;RETURN [] as typeBIds&#39;, \r\n        {n: n}\r\n    )\r\n    YIELD value AS v2\r\n    RETURN n, v1.typeAIds + v2.typeBIds AS ids\r\n\r\n\r\n  [1]: https://neo4j.com/docs/apoc/5/overview/apoc.do/apoc.do.when/","link":"https://stackoverflow.com/questions/75974701/neo4j-cypher-if-else/75975283#75975283","title":"neo4j: cypher if else"},{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681149438,"last_edit_date":1681149438,"creation_date":1681147767,"answer_id":75979269,"question_id":75974701,"share_link":"https://stackoverflow.com/a/75979269","body_markdown":"This will return `a` and `b` lists (we return both lists, in case some folders or even some &quot;type&quot; nodes contain both labels):\r\n\r\n    MATCH (f:FOLDER)-[:CONTAINS]-&gt;(ty:TYPE_A|TYPE_B)\r\n    WHERE f.id = 123\r\n    WITH REDUCE(s={a:[], b:[]}, t IN COLLECT(ty) |\r\n      CASE WHEN ALL(w IN [&#39;TYPE_A&#39;,&#39;TYPE_B&#39;] WHERE w IN LABELS(t))\r\n        THEN {a: s.a+t, b: s.b+t}\r\n      CASE WHEN &#39;TYPE_A&#39; IN LABELS(t)\r\n        THEN {a: s.a+t, b: s.b}\r\n      ELSE {a: s.a, b: s.b+t} END) AS x\r\n    RETURN x.a AS a, x.b AS b\r\n\r\nThe query uses the [predicate label expression](https://neo4j.com/docs/cypher-manual/current/syntax/expressions/#label-expressions) `(ty:TYPE_A|TYPE_B)` to search for &quot;type&quot; nodes that end in either of the 2 desired labels. Support for such expressions were introduced in neo4j 5.0.\r\n\r\nThe [REDUCE](https://neo4j.com/docs/cypher-manual/current/functions/list/#functions-reduce) function is used to iterate through the matching &quot;type&quot; nodes to generate the lists. And a [CASE]( https://neo4j.com/docs/cypher-manual/current/syntax/expressions/#query-syntax-case) expression is used to do the `IF/THEN/ELSE` processing on each node.","link":"https://stackoverflow.com/questions/75974701/neo4j-cypher-if-else/75979269#75979269","title":"neo4j: cypher if else"}],"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75975283,"answer_count":3,"score":2,"last_activity_date":1681149438,"creation_date":1681107321,"question_id":75974701,"share_link":"https://stackoverflow.com/q/75974701","body_markdown":"I have 3 type of nodes: FOLDER, TYPE_A, TYPE_B and one relationship: CONTAINS;\r\n\r\nI am having difficulty in writing cypher, in a single query, to fetch this:\r\n\r\n    if(folder CONTAINS TYPE_A) {\r\n       return ids of TYPE_A\r\n    } else if (folder CONTAINS TYPE_B) {\r\n      then return ids of TYPE_B\r\n    } else {\r\n      return empty array;\r\n    }\r\n\r\nCan someone help?\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/75974701/neo4j-cypher-if-else","title":"neo4j: cypher if else"},{"tags":["java","neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":17,"user_id":12401486,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBTNS7XEXl7qVsT_0p0I5Dcs7vnoK2279ymIoGRKQ=k-s256","display_name":"Jia Weiぃも","link":"https://stackoverflow.com/users/12401486/jia-wei%e3%81%83%e3%82%82"},"edited":false,"score":0,"creation_date":1681274080,"post_id":75979721,"comment_id":134028145,"link":"https://stackoverflow.com/questions/75971178/understanding-ways-to-use-cypher-query-in-embedded-neo4j-app/75979721#comment134028145_75979721"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681151631,"creation_date":1681151631,"answer_id":75979721,"question_id":75971178,"share_link":"https://stackoverflow.com/a/75979721","body_markdown":"You would use the [neo4j Java API](https://neo4j.com/docs/java-reference/5/javadocs/index.html) with an embedded neo4j DB, not the [Java Driver API](https://neo4j.com/docs/java-reference/5/javadocs/index.html) (which is only for accessing un-embedded DBs).\r\n\r\nThe correct way to use Cypher with an embedded DB is [documented here](https://neo4j.com/docs/java-reference/current/java-embedded/cypher-java/).","link":"https://stackoverflow.com/questions/75971178/understanding-ways-to-use-cypher-query-in-embedded-neo4j-app/75979721#75979721","title":"understanding ways to use cypher query in embedded neo4j app"}],"owner":{"reputation":17,"user_id":12401486,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBTNS7XEXl7qVsT_0p0I5Dcs7vnoK2279ymIoGRKQ=k-s256","display_name":"Jia Weiぃも","link":"https://stackoverflow.com/users/12401486/jia-wei%e3%81%83%e3%82%82"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75979721,"answer_count":1,"score":0,"last_activity_date":1681151631,"creation_date":1681051745,"question_id":75971178,"share_link":"https://stackoverflow.com/q/75971178","body_markdown":"As far as I know there are 3 ways to run cypher query in with embedded java app.\r\n1. `org.neo4j.driver.Session session = GraphDatabase.driver(uri, AuthTokens.basic(user, password)).session().run(query)`\r\nsrc,chatgpt\r\n- known limitations,unable to use along with embedded neo4j app,since it needs user and password,I asssume it needs a neo4j/opencypher compatible server.\r\n\r\n2. `new GraphDatabaseFactory().newEmbeddedDatabase(STORE_DIR).execute(query)`\r\nsrc,[https://stackoverflow.com/questions/34400856/neo4j-slow-cypher-query-in-embedded-mode][1]\r\n- known limitations, excute(query); seems to not be in the current new api?[https://github.com/neo4j/neo4j/blob/5.6/community/graphdb-api/src/main/java/org/neo4j/graphdb/GraphDatabaseService.java][2]\r\n\r\n3. ` try (Transaction tx = graphDb.beginTx()) then org.neo4j.graphdb.Result result=tx.execute(query);`\r\nsrc,written by myself based on existing api,[https://github.com/neo4j/neo4j/blob/5.6/community/graphdb-api/src/main/java/org/neo4j/graphdb/Transaction.java][3]\r\n- known limitations, practically 99% of the codes needs to be rewritten since org.neo4j.graphdb.Result != org.neo4j.driver.Result and the api seems to be different.\r\n\r\n\r\nSo the main question is\r\n________\r\n- are there other better simpler ways to run cypher query that I didnt list here?\r\n- I am very new to database.Is my analysis of the limitations is (wrong/correct)?\r\n\r\nI believe some SO members might frown with 2 questions*.However I believed that the context is very important and it will clearly show my attempts and what I currently understood as.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/34400856/neo4j-slow-cypher-query-in-embedded-mode\r\n  [2]: https://github.com/neo4j/neo4j/blob/5.6/community/graphdb-api/src/main/java/org/neo4j/graphdb/GraphDatabaseService.java\r\n  [3]: https://github.com/neo4j/neo4j/blob/5.6/community/graphdb-api/src/main/java/org/neo4j/graphdb/Transaction.java","link":"https://stackoverflow.com/questions/75971178/understanding-ways-to-use-cypher-query-in-embedded-neo4j-app","title":"understanding ways to use cypher query in embedded neo4j app"},{"tags":["neo4j"],"owner":{"reputation":591,"user_id":4450691,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/81678affc524ea76b8318fa02dc2fe1a?s=256&d=identicon&r=PG&f=1","display_name":"Fred Snertz","link":"https://stackoverflow.com/users/4450691/fred-snertz"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680983018,"creation_date":1680983018,"question_id":75967348,"share_link":"https://stackoverflow.com/q/75967348","body_markdown":"I have just uninstalled neo4j-community-4.3.11 and I am attempting to install neo4j-community-5.6.0 community edition on a Windows 10 system.  I also just removed an older version of java and installed SE Development Kit 17.0.6.  I am running as a local administrator.  I see &quot;Invalid command line arguments&quot; and &quot;Access is denied&quot; but neither of those seem accurate descriptions of whatever is going wrong here.  Thanks for any help.\r\n\r\n```\r\nC:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\bin&gt;neo4j.bat windows-service install --verbose\r\nneo4j 5.6.0\r\nVM Name: Java HotSpot(TM) 64-Bit Server VM\r\nVM Vendor: Oracle Corporation\r\nVM Version: 17.0.6+9-LTS-190\r\nJIT compiler: HotSpot 64-Bit Tiered Compilers\r\nVM Arguments: [-Dbasedir=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0]\r\nConfiguration files used (ordered by priority):\r\nC:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\conf\\neo4j.conf\r\n--------------------\r\nExecuting command line: powershell.exe -OutputFormat Text -ExecutionPolicy Bypass -Command Get-Service neo4j | Format-Table -AutoSize\r\nExecuting command line: powershell.exe -OutputFormat Text -ExecutionPolicy Bypass -Command &amp; &#39;C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\bin\\tools\\prunsrv-amd64.exe&#39; &#39;//IS//neo4j&#39; &#39;--StartMode=jvm&#39; &#39;--StartMethod=start&#39; &#39;--ServiceUser=LocalSystem&#39; &#39;--StartPath=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0&#39; &#39;--StartParams=--config-dir=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\conf;--home-dir=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0&#39; &#39;--StopMode=jvm&#39; &#39;--StopMethod=stop&#39; &#39;--StopPath=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0&#39; &#39;--Description=Neo4j Graph Database - C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0&#39; &#39;--DisplayName=Neo4j Graph Database - neo4j&#39; &#39;--Jvm=C:\\Program Files\\Java\\jdk-17\\bin\\server\\jvm.dll&#39; &#39;--LogPath=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\logs&#39; &#39;--StdOutput=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\logs\\service-out.log&#39; &#39;--StdError=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\logs\\service-error.log&#39; &#39;--LogPrefix=neo4j-service&#39; &#39;--Classpath=C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\plugins\\*;C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\conf\\*;C:\\Data\\Tools\\BloodHound\\neo4j-community-5.6.0\\lib\\*&#39; &#39;--JvmOptions=-XX:+UseG1GC;-XX:-OmitStackTraceInFastThrow;-XX:+AlwaysPreTouch;-XX:+UnlockExperimentalVMOptions;-XX:+TrustFinalNonStaticFields;-XX:+DisableExplicitGC;-Djdk.nio.maxCachedBufferSize=1024;-Dio.netty.tryReflectionSetAccessible=true;-Djdk.tls.ephemeralDHKeySize=2048;-Djdk.tls.rejectClientInitiatedRenegotiation=true;-XX:FlightRecorderOptions=stackdepth=256;-XX:+UnlockDiagnosticVMOptions;-XX:+DebugNonSafepoints;--add-opens=java.base/java.nio=ALL-UNNAMED;--add-opens=java.base/java.io=ALL-UNNAMED;--add-opens=java.base/sun.nio.ch=ALL-UNNAMED;-Dlog4j2.disable.jmx=true;-Dfile.encoding=UTF-8&#39; &#39;--Startup=auto&#39; &#39;--StopClass=org.neo4j.server.CommunityEntryPoint&#39; &#39;--StartClass=org.neo4j.server.CommunityEntryPoint&#39;\r\n[2023-04-08 12:28:31] [error] [ 5948] Invalid command line arguments.\r\n[2023-04-08 12:28:31] [error] [ 5948] Access is denied.\r\n[2023-04-08 12:28:31] [error] [ 5948] Apache Commons Daemon procrun failed with exit value: 1 (failed to parse command line arguments).\r\n[2023-04-08 12:28:31] [error] [ 5948] Access is denied.\r\norg.neo4j.server.startup.BootProcessFailureException: Unexpected service command failure.\r\n        at org.neo4j.server.startup.ProcessManager.waitUntilSuccessful(ProcessManager.java:76)\r\n        at org.neo4j.server.startup.WindowsBootloaderOs$ServiceCommandProcess.postStart(WindowsBootloaderOs.java:146)\r\n        at org.neo4j.server.startup.ProcessManager.run(ProcessManager.java:52)\r\n        at org.neo4j.server.startup.WindowsBootloaderOs.runProcess(WindowsBootloaderOs.java:285)\r\n        at org.neo4j.server.startup.WindowsBootloaderOs.runServiceCommand(WindowsBootloaderOs.java:135)\r\n        at org.neo4j.server.startup.WindowsBootloaderOs.installService(WindowsBootloaderOs.java:94)\r\n        at org.neo4j.server.startup.Bootloader$Dbms.installService(Bootloader.java:529)\r\n        at org.neo4j.server.startup.WindowsServiceCommand$Install.execute(WindowsServiceCommand.java:56)\r\n        at org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:92)\r\n        at org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:37)\r\n        at picocli.CommandLine.executeUserObject(CommandLine.java:2041)\r\n        at picocli.CommandLine.access$1500(CommandLine.java:148)\r\n        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)\r\n        at picocli.CommandLine$RunLast.handle(CommandLine.java:2453)\r\n        at picocli.CommandLine$RunLast.handle(CommandLine.java:2415)\r\n        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)\r\n        at picocli.CommandLine$RunLast.execute(CommandLine.java:2417)\r\n        at picocli.CommandLine.execute(CommandLine.java:2170)\r\n        at org.neo4j.server.startup.Neo4jAdminCommand.call(Neo4jAdminCommand.java:123)\r\n        at org.neo4j.server.startup.Neo4jAdminCommand.call(Neo4jAdminCommand.java:42)\r\n        at picocli.CommandLine.executeUserObject(CommandLine.java:2041)\r\n        at picocli.CommandLine.access$1500(CommandLine.java:148)\r\n        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)\r\n        at picocli.CommandLine$RunLast.handle(CommandLine.java:2453)\r\n        at picocli.CommandLine$RunLast.handle(CommandLine.java:2415)\r\n        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)\r\n        at picocli.CommandLine$RunLast.execute(CommandLine.java:2417)\r\n        at picocli.CommandLine.execute(CommandLine.java:2170)\r\n        at org.neo4j.server.startup.Neo4jCommand.main(Neo4jCommand.java:41)\r\n```","link":"https://stackoverflow.com/questions/75967348/can-not-install-neo4j-5-6-0-service-on-windows","title":"Can not install neo4j 5.6.0 service on windows"},{"tags":["java","android-studio","neo4j"],"comments":[{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1681204690,"post_id":75964794,"comment_id":134014852,"link":"https://stackoverflow.com/questions/75964794/connection-from-android-studio-to-neo4j-database#comment134014852_75964794"},{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1681204951,"post_id":75964794,"comment_id":134014907,"link":"https://stackoverflow.com/questions/75964794/connection-from-android-studio-to-neo4j-database#comment134014907_75964794"}],"owner":{"reputation":1,"user_id":19734490,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e75dc33826e08e322c3bfe2deb755391?s=256&d=identicon&r=PG","display_name":"sinem","link":"https://stackoverflow.com/users/19734490/sinem"},"last_editor":{"reputation":124674,"user_id":354577,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/dI6cA.jpg?s=256&g=1","display_name":"Chris","link":"https://stackoverflow.com/users/354577/chris"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1681054856,"creation_date":1680951312,"last_edit_date":1681054856,"question_id":75964794,"share_link":"https://stackoverflow.com/q/75964794","body_markdown":"I wanna connect from Android Studio to Neo4j , but it didn&#39;t connect. Where am I doing wrong?\r\nI use Android Studio Electrical Eel, and I added neo4j driver dependencies:    \r\nimplementation &#39;org.neo4j.driver:neo4j-java-driver:4.4.11&#39;\r\n\r\ncode is here: \r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private EditText txtname;\r\n    private Button button;\r\n\r\n    static Driver initDriver(){\r\n        AuthToken auth= AuthTokens.basic(&quot;neo4j&quot;,&quot;password&quot;);\r\n        Driver driver= GraphDatabase.driver(&quot;bolt://localhost:7687&quot;,auth);\r\n        driver.verifyConnectivity();\r\n        return driver;\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        txtname=(EditText) findViewById(R.id.editTextTextPersonName);\r\n        button= (Button) findViewById(R.id.button);\r\n\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String name=txtname.getText().toString();\r\n\r\n                new Thread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n\r\n                        addPerson(name);\r\n                    }\r\n                }).start();\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void addPerson(String name) {\r\n\r\n        SessionConfig sessionConfig = SessionConfig.builder()\r\n                .withDefaultAccessMode(AccessMode.WRITE)\r\n                .withDatabase(&quot;neo4j&quot;)\r\n                .build();\r\n\r\n\r\n        try (Session session = initDriver().session(sessionConfig)){\r\n            session.writeTransaction(tx-&gt;\r\n                    tx.run(&quot;CREATE (d:Deneme{pname:$name}) RETURN d&quot;,\r\n                            Values.parameters(&quot;name&quot;,name)));\r\n\r\n\r\n        }catch(Exception e){\r\n\r\n        }\r\n\r\n\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/75964794/connection-from-android-studio-to-neo4j-database","title":"Connection from Android Studio to Neo4j Database"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680890589,"post_id":75955776,"comment_id":133977028,"link":"https://stackoverflow.com/questions/75955776/neo4j-weights-on-node-labels#comment133977028_75955776"}],"answers":[{"tags":[],"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680969978,"creation_date":1680969978,"answer_id":75966279,"question_id":75955776,"share_link":"https://stackoverflow.com/a/75966279","body_markdown":"Lucene query language also supports boosting the score of the results with the caret (^) operator. Suppose you add a string property called `weight` to all your nodes.\r\n\r\nCreate a sample dataset:\r\n\r\n    CREATE (:Person {name:&quot;Joan&quot; , weight:&quot;1&quot;}),\r\n           (:Company {name:&quot;Joan&quot; , weight:&quot;2&quot;}),\r\n           (:Movie {name:&quot;Joan&quot; , weight:&quot;3&quot;})\r\n\r\nNow create a full text index:\r\n\r\n    CREATE FULLTEXT INDEX example IF NOT EXISTS\r\n    FOR (n:Person|Company|Movie)\r\n    ON EACH [n.name, n.weight]\r\n\r\nFinally, you can query the index and provide custom boosting options:\r\n\r\n    CALL db.index.fulltext.queryNodes(&quot;example&quot;, &quot;name:Joan weight:1^1 weight:2^2 weight:3^3&quot;) \r\n    YIELD node, score\r\n    RETURN node.name, labels(node)[0] AS label, score\r\n\r\nResults:\r\n\r\nTable\r\nText\r\nCode\r\n\r\n    ╒═══════════╤═════════╤══════════════════╕\r\n    │&quot;node.name&quot;│&quot;label&quot;  │&quot;score&quot;           │\r\n    ╞═══════════╪═════════╪══════════════════╡\r\n    │&quot;Joan&quot;     │&quot;Movie&quot;  │1.3981904983520508│\r\n    ├───────────┼─────────┼──────────────────┤\r\n    │&quot;Joan&quot;     │&quot;Company&quot;│0.9523590207099915│\r\n    ├───────────┼─────────┼──────────────────┤\r\n    │&quot;Joan&quot;     │&quot;Person&quot; │0.5065275430679321│\r\n    └───────────┴─────────┴──────────────────┘\r\n\r\nYou can see how movie comes up with the highest score as it has the largest weight. And yes, you probably need to include the weight for every node, I don&#39;t know how to do something generic on node label level, except if you customize the lucene index yourself. Learn more about that in: https://neo4j.com/docs/java-reference/current/extending-neo4j/full-text-analyzer-provider/\r\n","link":"https://stackoverflow.com/questions/75955776/neo4j-weights-on-node-labels/75966279#75966279","title":"Neo4j weights on node labels"}],"owner":{"reputation":33,"user_id":8771724,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/536c5bd524047630d941221e3dad4d09?s=256&d=identicon&r=PG&f=1","display_name":"Anonymous","link":"https://stackoverflow.com/users/8771724/anonymous"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680969978,"creation_date":1680846679,"question_id":75955776,"share_link":"https://stackoverflow.com/q/75955776","body_markdown":"I have a requirement where I want to add weights to the node labels and return the queried list based on these weights. Suppose a person node has two labels company and title and a search query matches both these fields, since the company label has more weight assigned, it should be returned on top of the list. I have created FULLTEXT index on node labels for search already. \r\n\r\nIs it possible to do something like this with neo4j ?\r\n","link":"https://stackoverflow.com/questions/75955776/neo4j-weights-on-node-labels","title":"Neo4j weights on node labels"},{"tags":["neo4j","spring-data-neo4j"],"answers":[{"comments":[{"owner":{"reputation":1,"user_id":18764718,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14Gg7UWXqfZKxexCQsfUa9lHNKm_ncGll8Fsx85s_kw=k-s256","display_name":"ELMAHDY BOUSMITI","link":"https://stackoverflow.com/users/18764718/elmahdy-bousmiti"},"edited":false,"score":0,"creation_date":1680904507,"post_id":75954807,"comment_id":133979261,"link":"https://stackoverflow.com/questions/75954725/how-can-i-save-neo4j-output-graph-into-a-png-or-svg-file-using-only-the-terminal/75954807#comment133979261_75954807"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":1,"user_id":18764718,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14Gg7UWXqfZKxexCQsfUa9lHNKm_ncGll8Fsx85s_kw=k-s256","display_name":"ELMAHDY BOUSMITI","link":"https://stackoverflow.com/users/18764718/elmahdy-bousmiti"},"edited":false,"score":0,"creation_date":1680916166,"post_id":75954807,"comment_id":133980354,"link":"https://stackoverflow.com/questions/75954725/how-can-i-save-neo4j-output-graph-into-a-png-or-svg-file-using-only-the-terminal/75954807#comment133980354_75954807"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680916084,"last_edit_date":1680916084,"creation_date":1680829953,"answer_id":75954807,"question_id":75954725,"share_link":"https://stackoverflow.com/a/75954807","body_markdown":"The [Neo4j Browser](https://neo4j.com/docs/operations-manual/current/) and a [Neo4j Driver](https://neo4j.com/docs/bolt/current/neo4j-drivers/) are two different things.\r\n\r\nSince the Neo4j Browser can display visualizations, it can provide ways to download image captures of those visualizations.\r\n\r\nBut the Driver API has no visualization capabilities. So it does not make sense to expect it to provide any means to download image captures.\r\n\r\n[UPDATE]\r\n\r\nNeo4j documents a number of [non-neo4j graph visualization tools](https://neo4j.com/docs/getting-started/current/graph-visualization/graph-visualization/#other-vis) that you may find useful.","link":"https://stackoverflow.com/questions/75954725/how-can-i-save-neo4j-output-graph-into-a-png-or-svg-file-using-only-the-terminal/75954807#75954807","title":"How can I save Neo4j output graph into a PNG or SVG file using only the terminal/command line?"}],"owner":{"reputation":1,"user_id":18764718,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14Gg7UWXqfZKxexCQsfUa9lHNKm_ncGll8Fsx85s_kw=k-s256","display_name":"ELMAHDY BOUSMITI","link":"https://stackoverflow.com/users/18764718/elmahdy-bousmiti"},"comment_count":0,"delete_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1680916084,"creation_date":1680828398,"question_id":75954725,"share_link":"https://stackoverflow.com/q/75954725","body_markdown":" am using the Neo4j Driver Web Browser, and when I execute any command, it gives me the option to download an SVG or PNG file. I want to download this PNG or SVG file only using Neo4j in the command line, not with the GUI browser. Can you please help me with this?\r\n\r\nI am trying to find a command in Neo4j Driver that can save the output graph into a PNG or SVG file using the terminal/command line.","link":"https://stackoverflow.com/questions/75954725/how-can-i-save-neo4j-output-graph-into-a-png-or-svg-file-using-only-the-terminal","title":"How can I save Neo4j output graph into a PNG or SVG file using only the terminal/command line?"},{"tags":["neo4j","postman"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680815238,"post_id":75953487,"comment_id":133965739,"link":"https://stackoverflow.com/questions/75953487/configure-postman-to-call-neo4j-api#comment133965739_75953487"},{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1680863005,"post_id":75953487,"comment_id":133971610,"link":"https://stackoverflow.com/questions/75953487/configure-postman-to-call-neo4j-api#comment133971610_75953487"}],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680815160,"last_edit_date":1680815160,"creation_date":1680814854,"answer_id":75953744,"question_id":75953487,"share_link":"https://stackoverflow.com/a/75953744","body_markdown":"The article you cited was for neo4j 3.5.\r\n\r\nCurrent versions of Aura [do not support the HTTP API](https://aura.support.neo4j.com/hc/en-us/articles/1500004216022-Does-Aura-support-an-HTTP-API-).\r\n\r\n*And in any case, the [HTTP API](https://neo4j.com/docs/http-api/current/) uses the `http` or `https` protocols.*","link":"https://stackoverflow.com/questions/75953487/configure-postman-to-call-neo4j-api/75953744#75953744","title":"Configure Postman to call Neo4j API"}],"owner":{"reputation":374,"user_id":15797317,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9881d6ce201ea7eee0e67c29dec1e24c?s=256&d=identicon&r=PG&f=1","display_name":"spacedog","link":"https://stackoverflow.com/users/15797317/spacedog"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680815160,"creation_date":1680812667,"question_id":75953487,"share_link":"https://stackoverflow.com/q/75953487","body_markdown":"I&#39;m trying to configure Postman to test Neo4j API calls and am using this link which is the only thing I have found for help on this:\r\n\r\nhttps://neo4j.com/developer/kb/a-lightweight-approach-to-testing-the-neo4j-rest-api-with-authentication/\r\n\r\nIts an example of using a local instance rather than Aura\r\n\r\nThis is the URL I use when connecting via javascript and the Neo4j driver:\r\n\r\nneo4j+s://4c7b0c8b.databases.neo4j.io\r\n\r\nwhich gives me this error\r\n\r\n    GET neo4j+s://4c7b0c8b.databases.neo4j.io/\r\n    Error: Invalid protocol: neo4j+s:\r\n    Request Headers\r\n    Authorization: Basic bmVvNGo6STYzMGxxxxxxxxxxxxxxxxxxxxxxxxxxxxx0xfSFZURlUyNA==\r\n    User-Agent: PostmanRuntime/7.31.3\r\n    Accept: */*\r\n    Postman-Token: 6e90541b-465a-4c64-926e-22af04d41258\r\n    Host: 4c7b0c8b.databases.neo4j.io\r\n    Accept-Encoding: gzip, deflate, br\r\n    Connection: keep-alive\r\n\r\nEvidently it does not like &quot;neo4j+s:&quot;.\r\n\r\nIs possible to get step by step instrucitons on configuring Postman to connect to Aura?\r\n\r\nThanks.","link":"https://stackoverflow.com/questions/75953487/configure-postman-to-call-neo4j-api","title":"Configure Postman to call Neo4j API"},{"tags":["database","neo4j","relational-database","graph-databases","apache-age"],"comments":[{"owner":{"reputation":14736,"user_id":3404097,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=256&d=identicon&r=PG&f=1","display_name":"philipxy","link":"https://stackoverflow.com/users/3404097/philipxy"},"edited":false,"score":0,"creation_date":1680843200,"post_id":75952905,"comment_id":133968610,"link":"https://stackoverflow.com/questions/75952905/can-apache-age-be-a-cost-effective-alternative-to-neo4j-for-small-scale-graph-da#comment133968610_75952905"}],"answers":[{"tags":[],"owner":{"reputation":1,"user_id":18483009,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e91893457bfad3feeaa81d6af4d42dbd?s=256&d=identicon&r=PG","display_name":"user18483009","link":"https://stackoverflow.com/users/18483009/user18483009"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681149170,"creation_date":1681149170,"answer_id":75979461,"question_id":75952905,"share_link":"https://stackoverflow.com/a/75979461","body_markdown":"I would recommend Apache Age specifically if you have experience with database in general and PostgresSQL in specific. Having a powerful tool to support the scalability and complexity of your project and upcoming upgrades is a key consideration when choosing tools in general","link":"https://stackoverflow.com/questions/75952905/can-apache-age-be-a-cost-effective-alternative-to-neo4j-for-small-scale-graph-da/75979461#75979461","title":"Can Apache AGE be a cost-effective alternative to Neo4j for small-scale graph database projects?"}],"owner":{"reputation":1,"user_id":21559406,"user_type":"registered","profile_image":"https://i.stack.imgur.com/PsQHB.png?s=256&g=1","display_name":"ShaHeen","link":"https://stackoverflow.com/users/21559406/shaheen"},"last_editor":{"reputation":14736,"user_id":3404097,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=256&d=identicon&r=PG&f=1","display_name":"philipxy","link":"https://stackoverflow.com/users/3404097/philipxy"},"comment_count":1,"delete_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"answer_count":1,"score":-5,"last_activity_date":1681149170,"creation_date":1680807709,"last_edit_date":1680842183,"question_id":75952905,"share_link":"https://stackoverflow.com/q/75952905","body_markdown":"I want to design a graph relational database that models the relationship between a customer and their purchases. I am considering using either Apache AGE or Neo4j for this project, but I don&#39;t know which platform would be the best in terms of cost-effectiveness, ease of use, and developer community support.\r\n\r\nWhich one is better for a small-scale project?\r\n","link":"https://stackoverflow.com/questions/75952905/can-apache-age-be-a-cost-effective-alternative-to-neo4j-for-small-scale-graph-da","title":"Can Apache AGE be a cost-effective alternative to Neo4j for small-scale graph database projects?"},{"tags":["neo4j","cypher","graph-databases","memgraphdb","opencypher"],"comments":[{"owner":{"reputation":4432,"user_id":74057,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/43b366c599e4af01190174ee63f6b611?s=256&d=identicon&r=PG","display_name":"aldrin","link":"https://stackoverflow.com/users/74057/aldrin"},"edited":false,"score":0,"creation_date":1680800165,"post_id":75951904,"comment_id":133962606,"link":"https://stackoverflow.com/questions/75951904/rebuild-graph-by-related-entities-in-cypher#comment133962606_75951904"},{"owner":{"reputation":423,"user_id":5500634,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=256&d=identicon&r=PG&f=1","display_name":"TripleH","link":"https://stackoverflow.com/users/5500634/tripleh"},"reply_to_user":{"reputation":4432,"user_id":74057,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/43b366c599e4af01190174ee63f6b611?s=256&d=identicon&r=PG","display_name":"aldrin","link":"https://stackoverflow.com/users/74057/aldrin"},"edited":false,"score":0,"creation_date":1680800640,"post_id":75951904,"comment_id":133962729,"link":"https://stackoverflow.com/questions/75951904/rebuild-graph-by-related-entities-in-cypher#comment133962729_75951904"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680810188,"post_id":75951904,"comment_id":133964768,"link":"https://stackoverflow.com/questions/75951904/rebuild-graph-by-related-entities-in-cypher#comment133964768_75951904"}],"answers":[{"comments":[{"owner":{"reputation":423,"user_id":5500634,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=256&d=identicon&r=PG&f=1","display_name":"TripleH","link":"https://stackoverflow.com/users/5500634/tripleh"},"edited":false,"score":0,"creation_date":1680883563,"post_id":75953300,"comment_id":133975623,"link":"https://stackoverflow.com/questions/75951904/rebuild-graph-by-related-entities-in-cypher/75953300#comment133975623_75953300"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":423,"user_id":5500634,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=256&d=identicon&r=PG&f=1","display_name":"TripleH","link":"https://stackoverflow.com/users/5500634/tripleh"},"edited":false,"score":0,"creation_date":1680887976,"post_id":75953300,"comment_id":133976530,"link":"https://stackoverflow.com/questions/75951904/rebuild-graph-by-related-entities-in-cypher/75953300#comment133976530_75953300"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1680813753,"last_edit_date":1680813753,"creation_date":1680810990,"answer_id":75953300,"question_id":75951904,"share_link":"https://stackoverflow.com/a/75953300","body_markdown":"If you actually just want to see the names of `svc-1` and `svc-2` if a `PARENT_OF` path exists from `node-1` to `node-2`:\r\n\r\n    MATCH (s1:Service)&lt;-[:FROM_SERVICE]-(n1:Node)-[:PARENT_OF*..7]-&gt;(n2:Node)-[:FROM_SERVICE]-&gt;(s2:Service)\r\n    WHERE n1.name = &#39;frontend&#39; AND n2.name = &#39;payment&#39;\r\n    RETURN s1.name AS s1_name, s2.name AS s2_name\r\n\r\nI limited the variable-length path search to a somewhat-arbitray depth of 7, to avoid the query taking too long or running out of memory (if you had a lot of data).\r\n\r\nI would advise against actually creating a new relationship between `svc-1` and `svc-2` because that would be storing redundant information AND it may actually be confusing (since not all possible `PARENT_OF` paths would have the same pair of service nodes).","link":"https://stackoverflow.com/questions/75951904/rebuild-graph-by-related-entities-in-cypher/75953300#75953300","title":"Rebuild Graph by Related Entities in Cypher"}],"owner":{"reputation":423,"user_id":5500634,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=256&d=identicon&r=PG&f=1","display_name":"TripleH","link":"https://stackoverflow.com/users/5500634/tripleh"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680813753,"creation_date":1680799641,"last_edit_date":1680809681,"question_id":75951904,"share_link":"https://stackoverflow.com/q/75951904","body_markdown":"I am a Cypher beginner. I tried to google my issue but could not find an answer.\r\n\r\nAssume `node-1` has a relationship to `svc-1`, `node-2` has a relationship to `svc-2`, and `node-2` has a relationship to `node-1`.\r\n\r\nIs it possible to make a query that looks for a path between `node-1` and `node-2` in order to create a relationship between `svc-1` and `svc-2`? \r\n\r\nFor example, we have the following data\r\n```\r\n[\r\n    {\r\n        &quot;spanId&quot;:&quot;3&quot;,\r\n        &quot;name&quot;: &quot;checkOut&quot;,\r\n        &quot;parentId&quot;: &quot;2&quot;,\r\n        &quot;service_name&quot;: &quot;svc-2&quot;\r\n    },\r\n    {\r\n        &quot;spanId&quot;:&quot;4&quot;,\r\n        &quot;name&quot;: &quot;payment&quot;,\r\n        &quot;parentId&quot;: &quot;3&quot;,\r\n        &quot;service_name&quot;: &quot;svc-2&quot;\r\n    },\r\n    {\r\n        &quot;spanId&quot;:&quot;2&quot;,\r\n        &quot;name&quot;: &quot;addCart&quot;,\r\n        &quot;parentId&quot;: &quot;1&quot;,\r\n        &quot;service_name&quot;: &quot;svc-1&quot;\r\n    },\r\n    {\r\n        &quot;spanId&quot;:&quot;1&quot;,\r\n        &quot;name&quot;: &quot;frontend&quot;,\r\n        &quot;service_name&quot;: &quot;svc-1&quot;\r\n    }\r\n]\r\n```\r\nwe have \r\n  1. `frontend -&gt; addCart` for `svc-1`\r\n  2. `checkOut -&gt; payment` for `svc-2`\r\n  3. `addCart -&gt; checkOut`. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nFrom the span view, we have the path `frontend -&gt; addCart -&gt; checkOut -&gt; payment`, but from service, I wish to have `svc-1 -&gt; svc-2` and only show it. Is there cypher query to make it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G25EP.png","link":"https://stackoverflow.com/questions/75951904/rebuild-graph-by-related-entities-in-cypher","title":"Rebuild Graph by Related Entities in Cypher"},{"tags":["neo4j","export-to-csv","graph-databases","dump"],"answers":[{"tags":[],"owner":{"reputation":323,"user_id":11705601,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oFB1W.png?s=256&g=1","display_name":"Zach","link":"https://stackoverflow.com/users/11705601/zach"},"last_editor":{"reputation":323,"user_id":11705601,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oFB1W.png?s=256&g=1","display_name":"Zach","link":"https://stackoverflow.com/users/11705601/zach"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681322147,"last_edit_date":1681322147,"creation_date":1680823720,"answer_id":75954445,"question_id":75950156,"share_link":"https://stackoverflow.com/a/75954445","body_markdown":"The only way I&#39;ve gotten this to work is this. \r\n\r\nSteps: \r\n1. Get [Graph Database Data](https://github.com/ICIJ/offshoreleaks-data-packages/blob/eabbabfeaf1983c2b83c11125802fcdeda92d9ac/data/icij-offshoreleaks-44.dump) \r\n1. [Rename to dump extension as needed](https://neo4j.com/docs/operations-manual/current/backup-restore/planning/) \r\n1. [Create Neo4j-Docker-Container](https://hub.docker.com/_/neo4j)\r\n   ```bash \r\n    docker run -d \\\r\n       -p 7474:7474 -p 7687:7687 \\\r\n       -e apoc.export.file.enabled=true \\\r\n       -e apoc.import.file.enabled=true \\\r\n       -e apoc.import.file.use_neo4j_config=true \\\r\n       -e NEO4J_PLUGINS=\\[\\&quot;apoc\\&quot;\\] \\\r\n       neo4j\r\n   ```\r\n1. Create the Neo4j-Dumps Directory \r\n   1. [`winpty docker exec -it [neo4j_container] sh`](https://docs.docker.com/engine/reference/commandline/exec/)\r\n   1. `mkdir /var/lib/neo4j/data/dumps`\r\n1. [Import Data into Neo4j-Container](https://neo4j.com/docs/operations-manual/current/backup-restore/restore-backup/)\r\n   ```bash\r\n   docker cp [filename] [neo4j-container]:/var/lib/neo4j/data/dumps/\r\n   ```\r\n1. Create an `apoc.conf` that allows Neo4j-Dumps \r\n   1. [`winpty docker exec -it [neo4j_container] sh`](https://docs.docker.com/engine/reference/commandline/exec/)\r\n   1. Create `apoc.conf` \r\n      * `touch /var/lib/neo4j/conf/apoc.conf`\r\n   1. Add/Edit `apoc.conf`\r\n      * [CLI Editor Info](https://stackoverflow.com/questions/30853247/how-do-i-edit-a-file-after-i-shell-to-a-docker-container)\r\n      * [Docker UI File-Editor &gt; Files &gt; Edit (Right-click)](https://docs.docker.com/desktop/use-desktop/container/)\r\n      ```conf\r\n      apoc.export.file.enabled=true\r\n      apoc.import.file.enabled=true\r\n      apoc.import.file.use_neo4j_config=true\r\n      dbms.security.procedures.unrestricted=apoc.*\r\n      ```\r\n      * Needed if commands not working\r\n   1. Restart Neo4j-Container to take affect\r\n1. [Restore Database Dump](https://neo4j.com/docs/operations-manual/current/backup-restore/restore-dump/)\r\n   ```sh\r\n   bin/neo4j-admin database load [filename (no extension)] --overwrite-destination\r\n   ```\r\n1. [Migrate Database Dump to Neo4j v5.X.X](https://neo4j.com/docs/upgrade-migration-guide/current/version-5/) \r\n   ```sh \r\n   bin/neo4j-admin database migrate [filename (no extension)] --force-btree-indexes-to-range\r\n   ```\r\n1. Reassign the single User-Database that Neo4j allows \r\n   1. Edit `neo4j.conf`\r\n   2. Add / Uncomment-Edit \r\n      * The filename decides the database name\r\n      ```conf \r\n      initial.dbms.default_database=[filename (no extension)]\r\n      ``` \r\n   1. Restart Neo4j-Container to take affect\r\n1. Rename the Neo4j-Dump file as `neo4j.dump` \r\n   * This is because only the Neo4j-Database is allowed APOC commands \r\n   * Either edit the filename or readd \r\n1. [Restore Database Dump](https://neo4j.com/docs/operations-manual/current/backup-restore/restore-dump/)\r\n   ```sh\r\n   bin/neo4j-admin database load neo4j --overwrite-destination\r\n   ```\r\n1. [Migrate Database Dump to Neo4j v5.X.X](https://neo4j.com/docs/upgrade-migration-guide/current/version-5/) \r\n   ```sh \r\n   bin/neo4j-admin database migrate neo4j --force-btree-indexes-to-range\r\n   ```\r\n1. Reassign the single User-Database that Neo4j allows \r\n   1. Edit `neo4j.conf`\r\n   2. Add / Uncomment-Edit \r\n      ```conf \r\n      initial.dbms.default_database=neo4j\r\n      ```\r\n   1. Restart Neo4j-Container to take affect\r\n1. Restore Database Dump\r\n   ```\r\n   CALL apoc.export.csv.all(&quot;filename.csv&quot;, {})\r\n   ```\r\n   1. Use the Neo4j Studio (Website)\r\n   1. Use Command-Line \r\n      1. [Shell into the Neo4j-Container](https://docs.docker.com/engine/reference/commandline/exec/)\r\n      1. `/var/lib/neo4j/bin/neo4j` command \r\n1. Save `neo4j.csv` from `/var/lib/neo4j/import/neo4j.csv`","link":"https://stackoverflow.com/questions/75950156/convert-neo4j-database-dump-into-csv-file-without-neo4j-enterprise-server/75954445#75954445","title":"Convert Neo4j-Database-Dump Into CSV-File Without Neo4j-Enterprise-Server"}],"owner":{"reputation":323,"user_id":11705601,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oFB1W.png?s=256&g=1","display_name":"Zach","link":"https://stackoverflow.com/users/11705601/zach"},"last_editor":{"reputation":323,"user_id":11705601,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oFB1W.png?s=256&g=1","display_name":"Zach","link":"https://stackoverflow.com/users/11705601/zach"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75954445,"answer_count":1,"score":0,"last_activity_date":1681322147,"creation_date":1680788007,"last_edit_date":1680817544,"question_id":75950156,"share_link":"https://stackoverflow.com/q/75950156","body_markdown":"How are you supposed to convert Neo4j-Database-Dumps into CSV-Files? \r\n\r\nI&#39;ve created a [Neo4j-Docker-container](https://hub.docker.com/_/neo4j) &lt;br /&gt;\r\nWhich is created from [Neo4j Community Edition (5.6.0)](https://neo4j.com/download-center/#community). &lt;br /&gt;\r\nRead the [Neo4j-Docs&#39;s Export-to-CSV](https://neo4j.com/labs/apoc/4.1/export/csv/). &lt;br&gt; \r\nGot a Neo4j-Database-Dump from [ICIJ&#39;s Offshore-Leaks-Database](https://offshoreleaks.icij.org/pages/database) &lt;br&gt; \r\nOn their [GitHub OffshoreLeaks-Data-Packages](https://github.com/ICIJ/offshoreleaks-data-packages/blob/eabbabfeaf1983c2b83c11125802fcdeda92d9ac/data/icij-offshoreleaks-44.dump). &lt;br&gt; \r\nImported on the Neo4j-Docker-container&#39;s Neo4j-Community-Server. \r\n\r\nI&#39;m looking for ways to export without needing to sign-up or purchase Neo4j. &lt;br&gt; \r\nI just want the data to be importable to other databases and services. &lt;br&gt; \r\nWhat are some ways you&#39;ve come up with exporting the data? \r\n\r\nI cannot export the database as-is, because &lt;br&gt; \r\n[Neo4j only allows 1 User-Database for Community-Edition-Installations](https://neo4j.com/docs/operations-manual/current/manage-databases/introduction/). &lt;br&gt; \r\nSo [their docs on Export-2-CSV](https://neo4j.com/labs/apoc/4.1/export/csv/) don&#39;t work as-is here.  &lt;br&gt; \r\n","link":"https://stackoverflow.com/questions/75950156/convert-neo4j-database-dump-into-csv-file-without-neo4j-enterprise-server","title":"Convert Neo4j-Database-Dump Into CSV-File Without Neo4j-Enterprise-Server"},{"tags":["android-studio","neo4j","cypher"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680804829,"post_id":75948963,"comment_id":133963638,"link":"https://stackoverflow.com/questions/75948963/cypher-support-in-android-studio#comment133963638_75948963"}],"owner":{"reputation":1,"user_id":19734490,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e75dc33826e08e322c3bfe2deb755391?s=256&d=identicon&r=PG","display_name":"sinem","link":"https://stackoverflow.com/users/19734490/sinem"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680804869,"creation_date":1680780270,"last_edit_date":1680804869,"question_id":75948963,"share_link":"https://stackoverflow.com/q/75948963","body_markdown":"I wanna develop an Android project with Neo4j database. Does Android Studio have cypher support, if so which version?\r\n\r\nI tried several code for connection from Android Studio Electric Eel to Neo4j 4.4.19 version. But it didn&#39;t work. ","link":"https://stackoverflow.com/questions/75948963/cypher-support-in-android-studio","title":"cypher support in Android Studio"},{"tags":["graph","neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680757814,"creation_date":1680757814,"answer_id":75946011,"question_id":75945809,"share_link":"https://stackoverflow.com/a/75946011","body_markdown":"The problem is in the `UNWIND` statement, your `frontend` object doesn&#39;t have a `parentId` array, so there is nothing to unwind there and the object gets lost, before creating a relationship to service. To fix this, you should move the creation and merge of relationship with service above `UNWIND`. Try this:\r\n\r\n    WITH &#39;file:///test.json&#39; AS url\r\n    CALL apoc.load.json(url) YIELD value\r\n    MERGE (s:Span {span_id: value.spanId})\r\n    ON CREATE SET  s.name=value.name, s.service=value.service_name\r\n    WITH s, value, value.service_name AS ki\r\n    FOREACH(k IN ki | \r\n         MERGE (svc:Service{service: value.service_name} )\r\n         MERGE (s)-[:FROM_SERVICE]-&gt;(svc)\r\n    )\r\n    UNWIND value.parentId AS parent\r\n    MERGE (p:Span {span_id: parent})\r\n    MERGE (p)-[:PARENT_OF]-&gt;(s)","link":"https://stackoverflow.com/questions/75945809/miss-relationship-using-cypher-query-in-neo4j/75946011#75946011","title":"Miss Relationship Using Cypher Query in Neo4j"}],"owner":{"reputation":423,"user_id":5500634,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=256&d=identicon&r=PG&f=1","display_name":"TripleH","link":"https://stackoverflow.com/users/5500634/tripleh"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75946011,"answer_count":1,"score":0,"last_activity_date":1680757814,"creation_date":1680755118,"question_id":75945809,"share_link":"https://stackoverflow.com/q/75945809","body_markdown":" I am working on Cypher query using **UNWIND** and **Foreach** in Neo4j. I am sure there is a bug, but I cannot figure out where I did wrong. \r\n\r\n I am building a graph with three spans in a trace as follows (in &quot;test.json&quot;)\r\n\r\n```\r\n   [\r\n    {\r\n        &quot;spanId&quot;:&quot;3&quot;,\r\n        &quot;name&quot;: &quot;checkOut&quot;,\r\n        &quot;parentId&quot;: [&quot;1&quot;],\r\n        &quot;service_name&quot;: &quot;svc&quot;\r\n    },\r\n    {\r\n        &quot;spanId&quot;:&quot;2&quot;,\r\n        &quot;name&quot;: &quot;addCart&quot;,\r\n        &quot;parentId&quot;: [&quot;1&quot;],\r\n        &quot;service_name&quot;: &quot;svc&quot;\r\n    },\r\n    {\r\n        &quot;spanId&quot;:&quot;1&quot;,\r\n        &quot;name&quot;: &quot;frontend&quot;,\r\n        &quot;service_name&quot;: &quot;svc&quot;\r\n    }\r\n]\r\n```\r\n\r\nSpan `checkOut` and `addCart` are child of `front`, so there are parent-child relationships between `frontend -&gt; checkOut` and `frontend -&gt; addCart`. \r\n\r\nMeanwhile, these spans all belong to &quot;svc&quot; service, so they should have relationship to &quot;svc&quot;. However, `frontend` misses the relation to &quot;svc&quot;. See below\r\n\r\n[![enter image description here][1]][1]\r\n\r\nMy Cypher query is as follows:\r\n```\r\nWITH &#39;file:///test.json&#39; AS url\r\n\r\nCALL apoc.load.json(url) YIELD value\r\n\r\nMERGE (s:Span {span_id: value.spanId})\r\nON CREATE SET  s.name=value.name, s.service=value.service_name\r\n\r\nWITH s, value\r\nUNWIND value.parentId AS parent\r\nMERGE (p:Span {span_id: parent})\r\nMERGE (p)-[:PARENT_OF]-&gt;(s)\r\n\r\nWITH s, value, value.service_name AS ki\r\nFOREACH(k IN ki | \r\n     MERGE (svc:Service{service: value.service_name} )\r\n     MERGE (s)-[:FROM_SERVICE]-&gt;(svc)\r\n)\r\n```\r\n\r\nCan someone help me see where I did wrong in the Cypher query? A ton of thanks!\r\n\r\n  [1]: https://i.stack.imgur.com/VpvIZ.png","link":"https://stackoverflow.com/questions/75945809/miss-relationship-using-cypher-query-in-neo4j","title":"Miss Relationship Using Cypher Query in Neo4j"},{"tags":["neo4j","cypher","neo4j-python-driver"],"comments":[{"owner":{"reputation":43844,"user_id":11923999,"user_type":"registered","profile_image":"https://i.stack.imgur.com/M84sB.png?s=256&g=1","display_name":"Burak Serdar","link":"https://stackoverflow.com/users/11923999/burak-serdar"},"edited":false,"score":1,"creation_date":1680705221,"post_id":75940702,"comment_id":133943777,"link":"https://stackoverflow.com/questions/75940702/neo4j-error-invalid-input-s-expected-n-n#comment133943777_75940702"}],"answers":[{"tags":[],"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"last_editor":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680722220,"last_edit_date":1680722220,"creation_date":1680711642,"answer_id":75941851,"question_id":75940702,"share_link":"https://stackoverflow.com/a/75941851","body_markdown":"As @BurakSerdar said, the `SET` command does not need an alias.\r\n\r\nYour code:\r\n\r\n    match (n:attribAct)\r\n    where not tolower(n.Aliases) contains tolower(n.name)\r\n    set n.Aliases = n.name+&quot;,&quot;+n.Aliases as x\r\n    return x;\r\n\r\nFIX:\r\n\r\n    match (n:attribAct) \r\n    where not tolower(n.Aliases) contains tolower(n.name) \r\n    set n.Aliases = n.name+&quot;,&quot;+n.Aliases \r\n    return n;","link":"https://stackoverflow.com/questions/75940702/neo4j-error-invalid-input-s-expected-n-n/75941851#75941851","title":"NEO4J error : Invalid input &#39;s&#39;: expected &#39;n/N&#39;"},{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680717367,"last_edit_date":1680717367,"creation_date":1680716673,"answer_id":75942555,"question_id":75940702,"share_link":"https://stackoverflow.com/a/75942555","body_markdown":"The `AS` keyword can only be used in `WITH` and `RETURN` clauses.\r\n\r\nYou can return `n` this way:\r\n\r\n    MATCH (n:attribAct) \r\n    WHERE NOT TOLOWER(n.Aliases) CONTAINS TOLOWER(n.name) \r\n    SET n.Aliases = n.name + &quot;,&quot; + n.Aliases \r\n    RETURN n;\r\n\r\nBy the way, if `n.Aliases` was actually a list of strings (instead of a comma-delimited string), this would work:\r\n\r\n    MATCH (n:attribAct) \r\n    WHERE NONE(a in n.Aliases WHERE TOLOWER(a) = TOLOWER(n.name)) \r\n    SET n.Aliases = n.Aliases + n.name\r\n    RETURN n;","link":"https://stackoverflow.com/questions/75940702/neo4j-error-invalid-input-s-expected-n-n/75942555#75942555","title":"NEO4J error : Invalid input &#39;s&#39;: expected &#39;n/N&#39;"}],"owner":{"reputation":657,"user_id":11668258,"user_type":"registered","profile_image":"https://i.stack.imgur.com/sgwny.jpg?s=256&g=1","display_name":"Tono Kuriakose","link":"https://stackoverflow.com/users/11668258/tono-kuriakose"},"last_editor":{"reputation":657,"user_id":11668258,"user_type":"registered","profile_image":"https://i.stack.imgur.com/sgwny.jpg?s=256&g=1","display_name":"Tono Kuriakose","link":"https://stackoverflow.com/users/11668258/tono-kuriakose"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1680722220,"creation_date":1680705039,"last_edit_date":1680706706,"question_id":75940702,"share_link":"https://stackoverflow.com/q/75940702","body_markdown":"For the below cypher query, I am getting an error\r\n\r\nCypher Query tried:\r\n\r\n```\r\nmatch (n:attribAct) where not tolower(n.Aliases) contains tolower(n.name) set n.Aliases = n.name+&quot;,&quot;+n.Aliases as x return x;\r\n```\r\n\r\nError:   \r\n\r\n```\r\nInvalid input &#39;s&#39;: expected &#39;n/N&#39; (line 1, column 115 (offset: 114))\r\n&quot;match (n:attribAct) where not tolower(n.Aliases) contains tolower(n.name) set n.Aliases = n.name+&quot;,&quot;+n.Aliases as x return x;&quot;\r\n```\r\n\r\n\r\n\r\nHow could I fix this problem? Thank you so much!","link":"https://stackoverflow.com/questions/75940702/neo4j-error-invalid-input-s-expected-n-n","title":"NEO4J error : Invalid input &#39;s&#39;: expected &#39;n/N&#39;"},{"tags":["linux","browser","neo4j","netty","handshaking"],"owner":{"reputation":1,"user_id":21570983,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0c5b985e772f73d5c24deb49eb8d0796?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Pablo","link":"https://stackoverflow.com/users/21570983/pablo"},"last_editor":{"reputation":17726,"user_id":4621513,"user_type":"registered","accept_rate":77,"profile_image":"https://i.stack.imgur.com/uCfJK.png?s=256&g=1","display_name":"mkrieger1","link":"https://stackoverflow.com/users/4621513/mkrieger1"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680695330,"creation_date":1680679746,"last_edit_date":1680695330,"question_id":75936714,"share_link":"https://stackoverflow.com/q/75936714","body_markdown":"After a default installation of Neo4j 4.4 Community Edition over RedHat 9.0 or over a VirtualBox machine with RedHat 9.0 or Debian 11 or Centos 9, it occurs a NullPointerException when just entering via browser into `http://localhost:7474`.\r\n\r\nIt does not occur with Neo4j 4.3 or lower versions and only occurs when refreshing the web page or entering into `localhost:7474` when already exists storage cookies in browser. When entering first time into `http://localhost:7474` in privacy mode browser it does not happen, but once the storage cookie exists in browser then it occurs after refreshing or just entering into `localhost:7474`.\r\n\r\nThe DB seems to work fine, only that exception in debug.log. This is what is installed:\r\n\r\n- Red Hat 9.0\r\n- OpenJDK 11\r\n- Neo4j 4.4.19 installed via yum\r\n- No SSL certificate installed\r\n\r\nThe exception is:\r\n\r\n```none\r\nERROR [o.n.b.t.p.ProtocolHandshaker] Fatal error occurred during protocol handshaking: [id: 0x40505dde, L:/10.0.2.15:7687 - R:/10.0.2.2:50918]\r\njava.lang.NullPointerException: null\r\n\tat io.netty.buffer.Unpooled.copiedBuffer(Unpooled.java:363) ~[netty-buffer-4.1.77.Final.jar:4.1.77.Final]\r\n\tat org.neo4j.bolt.transport.DiscoveryResponseHandler.channelRead(DiscoveryResponseHandler.java:60) ~[neo4j-bolt-4.4.15.jar:4.4.15]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103) [netty-codec-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:327) [netty-codec-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:299) [netty-codec-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.handlerRemoved(ByteToMessageDecoder.java:255) [netty-codec-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:517) [netty-codec-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:449) [netty-codec-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:279) [netty-codec-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat org.neo4j.bolt.transport.pipeline.AuthenticationTimeoutHandler.channelRead(AuthenticationTimeoutHandler.java:58) [neo4j-bolt-4.4.15.jar:4.4.15]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) [netty-transport-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:800) [netty-transport-classes-epoll-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:487) [netty-transport-classes-epoll-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:385) [netty-transport-classes-epoll-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:995) [netty-common-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [netty-common-4.1.77.Final.jar:4.1.77.Final]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) [netty-common-4.1.77.Final.jar:4.1.77.Final]\r\n\tat java.lang.Thread.run(Thread.java:829) [?:?]\r\n```\r\n\r\nI&#39;ve tried with Neo4j version 4.3 and lower versions and the exception does not occur. Onlt seems to occur with version 4.4. It occurs also over the next SO: RedHat 8, Debian 11 and CentOS 9.\r\n\r\nWhat I noticed is that the exception does not occur when entering first time into `http://localhost:7474` after cleaning cache and cookies of browser. Once the storage cookie exists then the exception occurs.","link":"https://stackoverflow.com/questions/75936714/neo4j-fatal-error-occurred-during-protocol-handshaking-when-entering-web-server","title":"Neo4j Fatal error occurred during protocol handshaking when entering web server via browser"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":17,"user_id":12401486,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBTNS7XEXl7qVsT_0p0I5Dcs7vnoK2279ymIoGRKQ=k-s256","display_name":"Jia Weiぃも","link":"https://stackoverflow.com/users/12401486/jia-wei%e3%81%83%e3%82%82"},"edited":false,"score":0,"creation_date":1680847617,"post_id":75942921,"comment_id":133969067,"link":"https://stackoverflow.com/questions/75935649/the-official-embedded-example-didnt-seems-to-work-org-neo4j-dbms-api-databasenot/75942921#comment133969067_75942921"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":17,"user_id":12401486,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBTNS7XEXl7qVsT_0p0I5Dcs7vnoK2279ymIoGRKQ=k-s256","display_name":"Jia Weiぃも","link":"https://stackoverflow.com/users/12401486/jia-wei%e3%81%83%e3%82%82"},"edited":false,"score":0,"creation_date":1680860407,"post_id":75942921,"comment_id":133971147,"link":"https://stackoverflow.com/questions/75935649/the-official-embedded-example-didnt-seems-to-work-org-neo4j-dbms-api-databasenot/75942921#comment133971147_75942921"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":17,"user_id":12401486,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBTNS7XEXl7qVsT_0p0I5Dcs7vnoK2279ymIoGRKQ=k-s256","display_name":"Jia Weiぃも","link":"https://stackoverflow.com/users/12401486/jia-wei%e3%81%83%e3%82%82"},"edited":false,"score":0,"creation_date":1680890271,"post_id":75942921,"comment_id":133976976,"link":"https://stackoverflow.com/questions/75935649/the-official-embedded-example-didnt-seems-to-work-org-neo4j-dbms-api-databasenot/75942921#comment133976976_75942921"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680890240,"last_edit_date":1680890240,"creation_date":1680719468,"answer_id":75942921,"question_id":75935649,"share_link":"https://stackoverflow.com/a/75942921","body_markdown":"When you &quot;embed&quot; neo4j, the neo4j DBMS runs *inside* of your Java application.\r\n\r\nThe [hello world example](https://neo4j.com/docs/java-reference/current/java-embedded/hello-world/) includes this line:\r\n\r\n    graphDb = managementService.database( DEFAULT_DATABASE_NAME );\r\n\r\nThe value of `org.neo4j.configuration.GraphDatabaseSettings.DEFAULT_DATABASE_NAME` is `neo4j`, not `AA`.\r\n\r\nBut even if the default name were `AA`, it would nevertheless refer to the DB that is *inside* of your application, not one outside.\r\n\r\nAlso, the embedded examples are only valid for the Community Edition. If you want to run embedded Enterprise Edition, you need to ask neo4j professional services for support.\r\n\r\nNow, if all you want to do is to use Java to access an *unembedded* neo4j DB, you should use the [neo4j Java driver](https://neo4j.com/docs/getting-started/current/languages-guides/java/java-intro/).","link":"https://stackoverflow.com/questions/75935649/the-official-embedded-example-didnt-seems-to-work-org-neo4j-dbms-api-databasenot/75942921#75942921","title":"The official embedded example didnt seems to work.org.neo4j.dbms.api.DatabaseNotFoundException"}],"owner":{"reputation":17,"user_id":12401486,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBTNS7XEXl7qVsT_0p0I5Dcs7vnoK2279ymIoGRKQ=k-s256","display_name":"Jia Weiぃも","link":"https://stackoverflow.com/users/12401486/jia-wei%e3%81%83%e3%82%82"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75942921,"answer_count":1,"score":0,"last_activity_date":1680890240,"creation_date":1680668899,"last_edit_date":1680718853,"question_id":75935649,"share_link":"https://stackoverflow.com/q/75935649","body_markdown":"I created a local dbms with neo4j desktop app with name aa,and a password,test and followed the example in https://neo4j.com/docs/java-reference/current/java-embedded/hello-world/, but it throws an exception:\r\n\r\n    Exception in thread &quot;main&quot; org.neo4j.dbms.api.DatabaseNotFoundException: AA\r\n            at org.neo4j.dbms.database.DatabaseManagementServiceImpl.lambda$database$0(DatabaseManagementServiceImpl.java:76)\r\n            at java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n            at org.neo4j.dbms.database.DatabaseManagementServiceImpl.database(DatabaseManagementServiceImpl.java:76)\r\n\r\nSo the question is what do we as user need to do to fix it then, or is there assumption?\r\n_______\r\n- do I happen to need a neo4j desktop running the server?\r\n- do i just need to setup the database with the desktop app?\r\n- or is there a way to use the java api to create and access the infos then do the stuff?\r\n- is this referred to as *operate embedded clusters*?\r\n\r\n","link":"https://stackoverflow.com/questions/75935649/the-official-embedded-example-didnt-seems-to-work-org-neo4j-dbms-api-databasenot","title":"The official embedded example didnt seems to work.org.neo4j.dbms.api.DatabaseNotFoundException"},{"tags":["python","neo4j","neo4j-python-driver"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680651492,"creation_date":1680651492,"answer_id":75934630,"question_id":75934322,"share_link":"https://stackoverflow.com/a/75934630","body_markdown":"*The relationship type is different between your 2 results (`REFERENCE` vs `AUTHORED`). But it probably does not matter with respect to my answer.*\r\n\r\nIn the Browser response, the `b` data is just telling you that the relationship contains no properties, starts at `a`, and ends at `c`.\r\n\r\nYour Python response is essentially saying the same thing. So you are not missing any information.\r\n\r\n","link":"https://stackoverflow.com/questions/75934322/neo4j-python-driver-results-dont-contain-edge-data/75934630#75934630","title":"Neo4j python driver results don&#39;t contain edge data"}],"owner":{"reputation":884,"user_id":12043177,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ea49a66b537c758abc641eb2b33247b3?s=256&d=identicon&r=PG&f=1","display_name":"kenneth-rebello","link":"https://stackoverflow.com/users/12043177/kenneth-rebello"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1680651492,"creation_date":1680647358,"question_id":75934322,"share_link":"https://stackoverflow.com/q/75934322","body_markdown":"This is my Cypher query and its equivalent result in neo4j Browser\r\n\r\n&gt; MATCH (a)-[b:REFERENCE]-&gt;(c) RETURN a,b,c LIMIT 200\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe b column (or key in JSON) contains the relationship and all the data that is associated with it. This is my ideal response.\r\n\r\nHowever running the same query in my Python API using the neo4j driver(==5.7.0) gives me the following result\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe &#39;b&#39; column now gives me redundant and incomplete information\r\n\r\nFollowing is a snippet of the API code\r\n\r\n```\r\nwith self.driver.session() as session:\r\n    return [record.data() for record in session.run(query)]\r\n```\r\n\r\n\r\n**What I tried:**\r\n\r\n 1. Using different methods for Record object as seen [here][3]\r\n 2. Using different methods for Response object as seen [here][4]\r\n 3. Changing query to \r\n     &gt; MATCH p = ()-[:REFERENCE]-&gt;() RETURN p LIMIT 200\r\n\r\nNone of this yielded different results\r\n\r\n  [1]: https://i.stack.imgur.com/B1OZP.png\r\n  [2]: https://i.stack.imgur.com/kgHkm.png\r\n  [3]: https://neo4j.com/docs/api/python-driver/current/api.html#record\r\n  [4]: https://neo4j.com/docs/api/python-driver/current/api.html#result","link":"https://stackoverflow.com/questions/75934322/neo4j-python-driver-results-dont-contain-edge-data","title":"Neo4j python driver results don&#39;t contain edge data"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680612327,"creation_date":1680612327,"answer_id":75929560,"question_id":75928553,"share_link":"https://stackoverflow.com/a/75929560","body_markdown":"You can use the [ALL](https://neo4j.com/docs/cypher-manual/current/functions/predicate/#functions-all) predicate function to do an order-insensitive equality test of 2 lists:\r\n\r\n    MATCH (n:Node)\r\n    WHERE ALL(c IN n.colors WHERE c IN [red,green,yellow,blue])\r\n    ...","link":"https://stackoverflow.com/questions/75928553/neo4j-how-to-do-order-insensitive-equality-test-of-2-lists/75929560#75929560","title":"Neo4j: How to do order-insensitive equality test of 2 lists?"}],"owner":{"reputation":29,"user_id":9226224,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1c8a88b41b8a13bdb30144c6c6a74b37?s=256&d=identicon&r=PG&f=1","display_name":"casster","link":"https://stackoverflow.com/users/9226224/casster"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680612496,"creation_date":1680606051,"last_edit_date":1680612496,"question_id":75928553,"share_link":"https://stackoverflow.com/q/75928553","body_markdown":"Say I have nodes which has these properties:\r\n```\r\nname: abc\r\ncolors: [red,green,blue]\r\n```\r\nWhere the colors property is a list which can contain any number of elements in any order.\r\n\r\nI want to create a query that will find nodes which have a colors property containing all the elements of another list, `[red,green,yellow,blue]` for example. \r\n\r\nHow would I write this query?\r\n\r\nI know you can do something like `MATCH (n:Node) WHERE n.colors = [red,green,yellow,blue]`, but this will only match nodes which have those list of colors in that exact order. I want a query which checks that a node&#39;s color property contains the specified colors, in any order.\r\n\r\nSomething like\r\n\r\n```\r\nmyColors = [red,green,yellow,blue]\r\nmatch = true\r\nfor each color in node.colors:\r\n  if color not in myColors:\r\n    // DO NOT MATCH\r\n    match = false\r\n\r\n```\r\nBut as a valid cypher query    \r\n","link":"https://stackoverflow.com/questions/75928553/neo4j-how-to-do-order-insensitive-equality-test-of-2-lists","title":"Neo4j: How to do order-insensitive equality test of 2 lists?"},{"tags":["postgresql","google-cloud-platform","neo4j","etl","google-cloud-sql"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680580615,"post_id":75921804,"comment_id":133918202,"link":"https://stackoverflow.com/questions/75921804/how-to-sync-postgres-to-neo4j-in-real-time#comment133918202_75921804"},{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":1,"creation_date":1680624605,"post_id":75921804,"comment_id":133928134,"link":"https://stackoverflow.com/questions/75921804/how-to-sync-postgres-to-neo4j-in-real-time#comment133928134_75921804"},{"owner":{"reputation":433,"user_id":2201572,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/c4e8f6bfaeb13f9e4c12ff2d347ed75b?s=256&d=identicon&r=PG","display_name":"Ville","link":"https://stackoverflow.com/users/2201572/ville"},"edited":false,"score":0,"creation_date":1680638869,"post_id":75921804,"comment_id":133931620,"link":"https://stackoverflow.com/questions/75921804/how-to-sync-postgres-to-neo4j-in-real-time#comment133931620_75921804"},{"owner":{"reputation":19230,"user_id":2662355,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG","display_name":"Christophe Willemsen","link":"https://stackoverflow.com/users/2662355/christophe-willemsen"},"edited":false,"score":1,"creation_date":1680640199,"post_id":75921804,"comment_id":133931939,"link":"https://stackoverflow.com/questions/75921804/how-to-sync-postgres-to-neo4j-in-real-time#comment133931939_75921804"}],"owner":{"reputation":433,"user_id":2201572,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/c4e8f6bfaeb13f9e4c12ff2d347ed75b?s=256&d=identicon&r=PG","display_name":"Ville","link":"https://stackoverflow.com/users/2201572/ville"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1680644591,"answer_count":0,"score":0,"last_activity_date":1680539929,"creation_date":1680539929,"question_id":75921804,"share_link":"https://stackoverflow.com/q/75921804","body_markdown":"I&#39;m hosting Postgres in Google Cloud (Google Cloud SQL). I would want to try out Neo4J for recommendations, but the problem is that the only way I&#39;m aware of syncing data from Postgres to Neo4J is Kafka via WAL, which is a no-go due to price and complexity. So the question is: What other tools can be used to sync Postgres in real time to Neo4J? I don&#39;t need all the data from the Postgres instance, just the relevant parts for recommendations. The solution can be managed service or self hosted, but I&#39;d very much would like to avoid building custom code for that.","link":"https://stackoverflow.com/questions/75921804/how-to-sync-postgres-to-neo4j-in-real-time","closed_reason":"Not suitable for this site","title":"How to sync Postgres to Neo4J in real time?"},{"tags":["neo4j"],"owner":{"reputation":57,"user_id":4657396,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fbd790f11315e6c69b3ac8766681b0c1?s=256&d=identicon&r=PG&f=1","display_name":"hemsbeach","link":"https://stackoverflow.com/users/4657396/hemsbeach"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680533241,"creation_date":1680533241,"question_id":75920757,"share_link":"https://stackoverflow.com/q/75920757","body_markdown":"at the moment our project runs a single instance Neo4j Enterprise 4.4.11 from the according helm chart version 4.4.10. We already have some data there, which can&#39;t be simply re-created.\r\nWe have the licenses so we plan to switch to a three core cluster setup of the same version. No analysis if we can update the DB alone without the according application code. According to compatibility matrix of the driver, yes but not tested. \r\n\r\nThe interesting part at the moment is: How to migrate the data to the cluster? I did not find any according documentation at neo&#39;s website. Can I simply change the config of the single instance and tell it &quot;you&#39;re a cluster member now&quot;? May be copy the data folder? \r\n\r\nAny help is highly appreciated. Hopefully someone did something similar already in the past and give me a hint. Thank you all.","link":"https://stackoverflow.com/questions/75920757/migrate-neo4j-single-instance-to-cluster","title":"Migrate Neo4j single instance to cluster"},{"tags":["python","neo4j","graphql","nosql"],"comments":[{"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"edited":false,"score":1,"creation_date":1680526253,"post_id":75916507,"comment_id":133908272,"link":"https://stackoverflow.com/questions/75916507/neo4j-modelling-for-offshoreleaks-data-icij#comment133908272_75916507"}],"owner":{"reputation":35,"user_id":19382789,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14Giu8luG7n0Uw1JkLYdWhtaOlBKJFOv7o7NqYvsiUA=k-s256","display_name":"Sushmitha Krishnan","link":"https://stackoverflow.com/users/19382789/sushmitha-krishnan"},"comment_count":1,"delete_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1680502752,"creation_date":1680502752,"question_id":75916507,"share_link":"https://stackoverflow.com/q/75916507","body_markdown":"I have a downloaded offshoreleaks dataset from here: \r\nhttps://offshoreleaks-data.icij.org/offshoreleaks/csv/full-oldb.LATEST.zip\r\n\r\nI am using neo4j to model this dataset. The goal here is to be able to layer on a Search, Match and Get APIs that can take company attributes as inputs and identify records in these datasets. Please help me with any materials or to-do list to do this task. \r\n\r\nI am new to graph databases and any help will be appreciated. Thanks","link":"https://stackoverflow.com/questions/75916507/neo4j-modelling-for-offshoreleaks-data-icij","title":"Neo4j modelling for Offshoreleaks data - ICIJ"},{"tags":["neo4j","load"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680547154,"post_id":75914016,"comment_id":133913814,"link":"https://stackoverflow.com/questions/75914016/load-dump-file-to-neo4j-database-neo4j-server-community-edition#comment133913814_75914016"}],"owner":{"reputation":1,"user_id":19626056,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/898ed6918c40c29584c5d347ca7a38e8?s=256&d=identicon&r=PG","display_name":"frank_909","link":"https://stackoverflow.com/users/19626056/frank-909"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680461641,"creation_date":1680461641,"question_id":75914016,"share_link":"https://stackoverflow.com/q/75914016","body_markdown":"I&#39;m trying to load the data contained in a .dump file (that i received from a friend) to the neo4j db of my neo4j community server instance. \r\nI&#39;m trying running the following command:\r\n\r\n```\r\nsudo neo4j-admin load --from=/usr/local/instance2/backup/graph-dbms-unemployment.dump --database=neo4j --force=&quot;true&quot;\r\n```\r\n\r\nI get the following error: \r\n\r\n```\r\nUnmatched arguments from index 0: &#39;load&#39;, &#39;--from=/usr/local/instance2/backup/graph-dbms-unemployment.dump&#39;, &#39;--database=neo4j&#39;, &#39;--force=true&#39;\r\nDid you mean: database load or database upload or dbms set-default-admin?\r\n```\r\n\r\nHow can i load the data that is contained into this dump file to my neo4j db? \r\nIt&#39;s not too clear to me how the process of importing data from a .dump file to the neo4j db works.\r\n\r\nCan someone help me with this? I really need some help to fix this issue.\r\n\r\nThanks for the support and for the help that you will give me :)\r\n\r\nI tried reading several neo4j forums and also running the command with all the possible syntaxes that I was aware of.","link":"https://stackoverflow.com/questions/75914016/load-dump-file-to-neo4j-database-neo4j-server-community-edition","title":"Load .dump file to neo4j database (neo4j server community edition)"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680499426,"creation_date":1680499426,"answer_id":75916236,"question_id":75913746,"share_link":"https://stackoverflow.com/a/75916236","body_markdown":"If each node in your database, has only one label, then this will work for you:\r\n\r\n    MATCH (s{order:2}), (f{order:1})\r\n    WHERE labels(s)[0] = labels(f)[0]\r\n    CREATE (s)-[o:AFTER]-&gt;(f)\r\n\r\nIn this query, we fetch all the nodes and check whether their label is same or not, and create the relationship accordingly.","link":"https://stackoverflow.com/questions/75913746/create-relationship-with-wildcard-but-only-within-same-node-type/75916236#75916236","title":"Create relationship with wildcard but only within same node type"}],"owner":{"reputation":2821,"user_id":2893024,"user_type":"registered","accept_rate":66,"profile_image":"https://graph.facebook.com/574322545/picture?type=large","display_name":"Michael Seltenreich","link":"https://stackoverflow.com/users/2893024/michael-seltenreich"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75916236,"answer_count":1,"score":-1,"last_activity_date":1680499426,"creation_date":1680458597,"question_id":75913746,"share_link":"https://stackoverflow.com/q/75913746","body_markdown":"Lets say I have 2 node types: `Node1` and `Node2`.\r\nThey both have the same property `{order:Integer}`\r\n\r\nNow I want to create the relationship that nodes with `order:2` have an `&quot;AFTER&quot;` relationship with nodes with `order:1` BUT, I only want to create the relationships within the same node type. \r\nThat is, `Node1{order:2}` should have an `AFTER` relationship to `Node1{order:1}` but no relationship to `Node2{order:1}`\r\n\r\n\r\nWhen I use a wildcard, it matches and creates relationships across node types which I do not want. \r\n```\r\nMATCH (s:%{order:2}), (f:%{order:1})\r\nCREATE (s)-[o:AFTER]-&gt;(f)\r\n```\r\n\r\n\r\nHow can I achieve what I want without hard-coding each edge creation explicitly? \r\nThis is what I want to avoid:\r\n```\r\nMATCH (s1:Node1{order:2}), (f1:Node1{order:1}), (s2:Node2{order:2}), (f2:Node2{order:1})\r\nCREATE (s1)-[o:AFTER]-&gt;(f1), (s2)-[o:AFTER]-&gt;(f2)\r\n```\r\n\r\nBasically I&#39;m trying to figure out if there&#39;s a way to have smart wildcard (I&#39;m using `SAMETYPE` as a placeholder), that matches same to same. Like so:\r\n\r\n```\r\nMATCH (s:%SAMETYPE{order:2}), (f:%SAMETYPE{order:1})\r\nCREATE (s)-[o:AFTER]-&gt;(f)\r\n```","link":"https://stackoverflow.com/questions/75913746/create-relationship-with-wildcard-but-only-within-same-node-type","title":"Create relationship with wildcard but only within same node type"},{"tags":["typescript","mongodb","testing","neo4j","jestjs"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680550288,"last_edit_date":1680550288,"creation_date":1680447496,"answer_id":75912782,"question_id":75912291,"share_link":"https://stackoverflow.com/a/75912782","body_markdown":"You are executing a statement (not shown in your question) that looks something like this:\r\n\r\n    foo.inspectModules(...)\r\n\r\nBut `foo` is undefined, so you are getting that error.","link":"https://stackoverflow.com/questions/75912291/jest-testing-a-service-that-uses-neo4j-and-mongodb-returns-error-typeerror-ca/75912782#75912782","title":"Jest testing a service that uses Neo4J and MongoDb returns error: &quot;TypeError: Cannot read properties of undefined (reading &#39;inspectModules&#39;)&quot;"},{"comments":[{"owner":{"reputation":17,"user_id":21075124,"user_type":"registered","profile_image":"https://i.stack.imgur.com/AaYUg.png?s=256&g=1","display_name":"MisterQvD","link":"https://stackoverflow.com/users/21075124/misterqvd"},"edited":false,"score":1,"creation_date":1680890202,"post_id":75947152,"comment_id":133976960,"link":"https://stackoverflow.com/questions/75912291/jest-testing-a-service-that-uses-neo4j-and-mongodb-returns-error-typeerror-ca/75947152#comment133976960_75947152"}],"tags":[],"owner":{"reputation":7511,"user_id":425226,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/a29c862955ebed5e3f80308d2fab7360?s=256&d=identicon&r=PG","display_name":"Stevanicus","link":"https://stackoverflow.com/users/425226/stevanicus"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680768038,"creation_date":1680768038,"answer_id":75947152,"question_id":75912291,"share_link":"https://stackoverflow.com/a/75947152","body_markdown":"Upgrade to version &#39;@nestjs/testing&#39;: ^9.3.12","link":"https://stackoverflow.com/questions/75912291/jest-testing-a-service-that-uses-neo4j-and-mongodb-returns-error-typeerror-ca/75947152#75947152","title":"Jest testing a service that uses Neo4J and MongoDb returns error: &quot;TypeError: Cannot read properties of undefined (reading &#39;inspectModules&#39;)&quot;"}],"owner":{"reputation":17,"user_id":21075124,"user_type":"registered","profile_image":"https://i.stack.imgur.com/AaYUg.png?s=256&g=1","display_name":"MisterQvD","link":"https://stackoverflow.com/users/21075124/misterqvd"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75947152,"answer_count":2,"score":0,"last_activity_date":1680768038,"creation_date":1680441797,"question_id":75912291,"share_link":"https://stackoverflow.com/q/75912291","body_markdown":"I have a service that runs a query to Mongodb and Neo4j. The create method runs two methods: &quot;CreateUserInMongoDB&quot; and &quot;CreateUserInNeo4j&quot;. The code is provided below:\r\n\r\n    export class UserService {\r\n      constructor(\r\n        @InjectModel(&#39;User&#39;) private readonly userModel: Model&lt;UserDocument&gt;,\r\n        @InjectModel(&#39;SportEvent&#39;)\r\n        private readonly sportEventModel: Model&lt;SportEventDocument&gt;,\r\n        private readonly neo4jQueryService: Neo4jQueryService\r\n      ) {}\r\n    \r\n      //creating a user.\r\n      async create(user: User): Promise&lt;object&gt; {\r\n        let userInMongoDB: { mongoId: string; firstName: string };\r\n        try {\r\n          userInMongoDB = await this.createUserInMongoDB(user);\r\n          const userIncreaeNeo4j = await this.createUserInNeo4j(\r\n            userInMongoDB.firstName,\r\n            userInMongoDB.mongoId\r\n          );\r\n          if (userIncreaeNeo4j &amp;&amp; userInMongoDB) {\r\n            return {\r\n              statusCode: 201,\r\n              message: `User succesfully created`,\r\n            };\r\n          }\r\n        } catch (error) {\r\n          if (userInMongoDB) {\r\n            await this.userModel.findByIdAndDelete(userInMongoDB.mongoId).lean();\r\n          }\r\n          throw new HttpException(error.message, 400);\r\n        }\r\n      }\r\n    \r\n      //create user in mongoDB\r\n      async createUserInMongoDB(\r\n        user: User\r\n      ): Promise&lt;{ mongoId: string; firstName: string }&gt; {\r\n        try {\r\n          const createdUser = new this.userModel(user);\r\n          createdUser.email = user.email.toLowerCase();\r\n          createdUser.firstName = user.firstName.toLowerCase();\r\n          createdUser.lastName = user.lastName.toLowerCase();\r\n    \r\n          console.log(user);\r\n    \r\n          await createdUser.save();\r\n          const userInMongoDB = {\r\n            mongoId: createdUser._id.toString(),\r\n            firstName: createdUser.firstName,\r\n          };\r\n          return userInMongoDB;\r\n        } catch (error) {\r\n          if (error.code === 11000) {\r\n            throw new HttpException(\r\n              &#39;Duplicate entry, email has to be unique.&#39;,\r\n              409\r\n            );\r\n          } else {\r\n            throw new HttpException(error.message, 400);\r\n          }\r\n        }\r\n      }\r\n    \r\n      //create user in neo4j\r\n      async createUserInNeo4j(userName: string, userId: string): Promise&lt;boolean&gt; {\r\n        try {\r\n          await this.neo4jQueryService.write(\r\n            `CREATE (n:User {mongoId: &quot;${userId}&quot;, name: &quot;${userName}&quot;}) RETURN n`\r\n          );\r\n          return true;\r\n        } catch (error) {\r\n          throw new HttpException(error.message, 400);\r\n        }\r\n      }\r\n\r\n\r\nIm trying to test the code above. The test im trying to do is simple, i just want to test if the userService is defined:\r\n\r\n    import { Test, TestingModule } from &#39;@nestjs/testing&#39;;\r\n    import { getModelToken } from &#39;@nestjs/mongoose&#39;;\r\n    import { Model } from &#39;mongoose&#39;;\r\n    import { UserService } from &#39;../user.service&#39;;\r\n    import { Neo4jQueryService } from &#39;../../../neo4-j/neo4-j.service&#39;;\r\n    import { UserDocument } from &#39;../../Schemas/user.schema&#39;;\r\n    import { User } from &#39;@sport-activity-app/domain&#39;;\r\n    import { HttpException } from &#39;@nestjs/common&#39;;\r\n    \r\n    describe(&#39;UserService&#39;, () =&gt; {\r\n      let userService: UserService;\r\n      let userModel: Model&lt;UserDocument&gt;;\r\n      let neo4jQueryService: Neo4jQueryService;\r\n    \r\n      beforeEach(async () =&gt; {\r\n        const module: TestingModule = await Test.createTestingModule({\r\n          providers: [\r\n            UserService,\r\n            Neo4jQueryService,\r\n            {\r\n              provide: getModelToken(&#39;User&#39;),\r\n              useValue: {\r\n                // mock Mongoose Model methods used in the UserService class\r\n                findByIdAndDelete: jest.fn(),\r\n                create: jest.fn(),\r\n              },\r\n            },\r\n            {\r\n              provide: getModelToken(&#39;SportEvent&#39;),\r\n              useValue: {\r\n                // mock Mongoose Model methods used in the UserService class\r\n              },\r\n            },\r\n          ],\r\n        }).compile();\r\n    \r\n        userService = module.get&lt;UserService&gt;(UserService);\r\n        userModel = module.get&lt;Model&lt;UserDocument&gt;&gt;(getModelToken(&#39;User&#39;));\r\n        neo4jQueryService = module.get&lt;Neo4jQueryService&gt;(Neo4jQueryService);\r\n      });\r\n    \r\n      it(&#39;should be defined&#39;, () =&gt; {\r\n        expect(userService).toBeDefined();\r\n      });\r\n    });\r\n\r\nThe error i get is: &quot;TypeError: Cannot read properties of undefined (reading &#39;inspectModules&#39;)&quot;.\r\nIm clueless what is happening. Does anyone know?","link":"https://stackoverflow.com/questions/75912291/jest-testing-a-service-that-uses-neo4j-and-mongodb-returns-error-typeerror-ca","title":"Jest testing a service that uses Neo4J and MongoDb returns error: &quot;TypeError: Cannot read properties of undefined (reading &#39;inspectModules&#39;)&quot;"},{"tags":["neo4j","query-optimization","database-performance","sql-execution-plan"],"comments":[{"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"edited":false,"score":0,"creation_date":1680526359,"post_id":75912251,"comment_id":133908299,"link":"https://stackoverflow.com/questions/75912251/neo4j-change-of-execution-plan-in-dependence-on-return-limit#comment133908299_75912251"}],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680547806,"last_edit_date":1680547806,"creation_date":1680547448,"answer_id":75922787,"question_id":75912251,"share_link":"https://stackoverflow.com/a/75922787","body_markdown":"With respect to the [EXISTS](https://neo4j.com/docs/cypher-manual/current/functions/predicate/#functions-exists) function, it will immediately return `true` as soon as it finds a single match. So it can be *much faster and less memory-intensive* than looking for and keeping in memory all matches.\r\n\r\nSince your use case doesn&#39;t need to use **all** the `CompanyNameToken` subpaths, it makes sense to just use the `EXISTS` version of your query.","link":"https://stackoverflow.com/questions/75912251/neo4j-change-of-execution-plan-in-dependence-on-return-limit/75922787#75922787","title":"neo4j: change of execution plan in dependence on return limit"}],"owner":{"reputation":19,"user_id":12531601,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9dd9f5ebcbe590ec96c4481e64f25fc7?s=256&d=identicon&r=PG&f=1","display_name":"phantomias","link":"https://stackoverflow.com/users/12531601/phantomias"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680547806,"creation_date":1680441374,"question_id":75912251,"share_link":"https://stackoverflow.com/q/75912251","body_markdown":"In our neo4j version 5.5 database, we have data `(c1:Company)-[:ADDRESS_MATCH]-(c2:company)` as well as `(t:CompanyNameToken)-[:CONTAINS_TOKEN]-(c:Company)`. Our goal is to find companies with address match and a common token. The execution plan changes unexpectedly, as follows. Matching only the addresses is quick and results in the following execution plan, with 1645 DB hits in 14ms.\r\n\r\n```cypher\r\nPROFILE MATCH (c1:Company)-[:ADDRESS_MATCH]-&gt;(c2:Company)\r\nRETURN c1, c2 LIMIT 100\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/fr3Kz.png)](https://i.stack.imgur.com/fr3Kz.png)\r\n\r\nThe execution plan stays the same when increasing the limit of 100 or removing the limit. Now adding the token match as a condition, for `LIMIT 100` the execution plan still has only one branch, with 250.000 DB hits in 58ms.\r\n\r\n```cypher\r\nPROFILE MATCH (c1:Company)-[:ADDRESS_MATCH]-&gt;(c2:Company),\r\n(c1)&lt;-[r1:CONTAINS_TOKEN]-(t:CompanyNameToken)-[r2:CONTAINS_TOKEN]-&gt;(c2)\r\nRETURN c1, c2 LIMIT 100\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/AJpX2.png)](https://i.stack.imgur.com/AJpX2.png)\r\n\r\nHowever, when executing the same query with `LIMIT 300` instead of `LIMIT 100`, the execution plan involves multiple branches (cartesian product on `c1`, `c2`) and suddenly has 38 Million DB hits in much longer 12000ms. (The transition is somewhere between 200 and 300).\r\n\r\n```cypher\r\nPROFILE MATCH (c1:Company)-[:ADDRESS_MATCH]-&gt;(c2:Company),\r\n(c1)&lt;-[r1:CONTAINS_TOKEN]-(t:CompanyNameToken)-[r2:CONTAINS_TOKEN]-&gt;(c2)\r\nreturn c1, c2 limit 300\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/3Prkn.png)](https://i.stack.imgur.com/3Prkn.png)\r\n\r\nA reformulation of the above query with the `exists` keyword does not show this behavior. The execution plan stays the same, independent of the limit, or even without the limit. For `LIMIT 300`, it has 600.000 DB hits in only 190ms.\r\n\r\n```\r\nPROFILE MATCH (c1:Company)-[:ADDRESS_MATCH]-&gt;(c2:Company)\r\nWHERE EXISTS {(c1)&lt;-[r1:CONTAINS_TOKEN]-(t:CompanyNameToken)-[r2:CONTAINS_TOKEN]-&gt;(c2)}\r\nreturn c1, c2 limit 300\r\n```\r\n[![enter image description here](https://i.stack.imgur.com/wIXUq.png)](https://i.stack.imgur.com/wIXUq.png)\r\n\r\nThree questions:\r\n- What is the reason for this behavior? \r\n- The execution plan for `LIMIT 100` is the way it should be, avoiding an unnecessary cartesian product. The plan for `LIMIT 300` is hopelessly naive. Is there a way to force neo4j to the first execution plan, maybe with some planner hints?\r\n- Why is the exection plan different when using the variant involving `EXISTS`?\r\n\r\nI tried various planner hints and combinations with no success. Confusingly, some days before, this behavior did not show up, with almost the same data. I read that execution plans depend on the DB statistics. However, commands like `CALL db.clearQueryCaches()` or `CALL db.prepareForReplanning()` also did not change the behavior.","link":"https://stackoverflow.com/questions/75912251/neo4j-change-of-execution-plan-in-dependence-on-return-limit","title":"neo4j: change of execution plan in dependence on return limit"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680404632,"last_edit_date":1680404632,"creation_date":1680338770,"answer_id":75905106,"question_id":75904904,"share_link":"https://stackoverflow.com/a/75905106","body_markdown":"Aggregating functions like `MIN` and `COLLECT` can only be used in `WITH` or `RETURN` clauses. This query should fix your specific error:\r\n\r\n    MATCH (:Address)&lt;-[allRels:LOCATED_AT]-(:Company)-[r:LOCATED_AT]-&gt;(:Address)\r\n    WHERE r.from_date &lt; allRels.from_date\r\n    WITH r, MIN(allRels.from_date) AS min_time\r\n    SET r.to_date = coalesce(min_time, date(&#39;9999-12-31&#39;))\r\n\r\nHowever, I would actually assign appropriate `to_date` values this way:\r\n\r\n    MATCH (c:Company)-[rel:LOCATED_AT]-&gt;()\r\n    WITH c, rel ORDER BY rel.from_date\r\n    WITH c, COLLECT(rel) AS rels\r\n    FOREACH(i IN RANGE(0, SIZE(rels)-2) |\r\n      SET rels[i].to_date = rels[i+1].from_date\r\n    )","link":"https://stackoverflow.com/questions/75904904/setting-the-end-time-of-the-end-of-a-relationship-in-cypher/75905106#75905106","title":"setting the end time of the end of a relationship in Cypher"}],"owner":{"reputation":1,"user_id":18279986,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/47e00d71344438f98135223173c78536?s=256&d=identicon&r=PG","display_name":"bohbohb","link":"https://stackoverflow.com/users/18279986/bohbohb"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680404632,"creation_date":1680335714,"last_edit_date":1680339145,"question_id":75904904,"share_link":"https://stackoverflow.com/q/75904904","body_markdown":"I have `Company` nodes that can have multiple relationships with `Address` nodes. These relationships have a `from_date` (date of beginning of the relationship) and I would like to set a `to_date` such that there are no relationships active at the same time. \r\n\r\nI express the query like this:\r\n\r\n```Cypher\r\nMATCH (a1:Address)&lt;-[allRels:LOCATED_AT]-(:Company)-[r:LOCATED_AT]-&gt;(a:Address)\r\nWHERE r &lt;&gt; allRels AND r.from_date &lt; allRels.from_date\r\nWITH r, collect(allRels.from_date) as time\r\nSET r.to_date = coalesce(min(time), date(&#39;9999-12-31&#39;))\r\n```\r\nbut I guess I am missing something as I am getting this error message:\r\n\r\n    Invalid use of aggregating function min(...) in this context (line 4, column 26 (offset: 203))\r\n    &quot;SET r.to_date = coalesce(min(time), date(&#39;9999-12-31&#39;))&quot;\r\n\r\nCan you please help me understand what I am missing?","link":"https://stackoverflow.com/questions/75904904/setting-the-end-time-of-the-end-of-a-relationship-in-cypher","title":"setting the end time of the end of a relationship in Cypher"},{"tags":["neo4j","type-conversion","cypher","graph-databases","opencypher"],"comments":[{"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"edited":false,"score":1,"creation_date":1680295245,"post_id":75902324,"comment_id":133880269,"link":"https://stackoverflow.com/questions/75902324/neo4j-type-mismatch-map-key-must-be-given-as-string-but-was-integer#comment133880269_75902324"}],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680310738,"creation_date":1680310738,"answer_id":75903752,"question_id":75902324,"share_link":"https://stackoverflow.com/a/75903752","body_markdown":"When you specify `WITH HEADERS` in your `LOAD CSV` clause, the first line of your CSV file is treated as a header, and every data row returned is a map instead of an array.\r\n\r\nSo, if your data file&#39;s header row looks like this:\r\n\r\n    node_id,address,name,countries,countries_codes,sourceID,valid_until,note\r\n\r\nthen your code should look like this (assuming every property value is supposed to be a string):\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///nodes-addresses.csv&#39; AS r \r\n    CREATE (:Address {\r\n      address: r.address, name: r.name, countries: r.countries,\r\n      countries_codes: r.countries_codes, sourceID: r.sourceID,\r\n      valid_until: r.valid_until, note: r.note\r\n    })\r\n\r\nor, since in this example the header names and the node property names exactly match, you can just use do this:\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///nodes-addresses.csv&#39; AS r\r\n    CREATE (a:Address)\r\n    SET a = r","link":"https://stackoverflow.com/questions/75902324/neo4j-type-mismatch-map-key-must-be-given-as-string-but-was-integer/75903752#75903752","title":"Neo4j Type mismatch: map key must be given as String, but was Integer"}],"owner":{"reputation":13,"user_id":21181726,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4bab59f296109391ace96fc81c0e12d4?s=256&d=identicon&r=PG","display_name":"ZM.TSS","link":"https://stackoverflow.com/users/21181726/zm-tss"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680310738,"creation_date":1680292586,"question_id":75902324,"share_link":"https://stackoverflow.com/q/75902324","body_markdown":"I have an integer-value that I want to be saved as a string-value in Neo4j using Cypher. &lt;br /&gt;\r\n```\r\nLOAD CSV WITH HEADERS FROM &#39;file:///nodes-addresses.csv&#39; AS line \r\nCREATE (:Address line[0], address: line[1], name: line[2], countries: line[3], countries_codes: line[4], sourceID: line[5], valid_until: line[6], note: line[7]})\r\n```\r\nI&#39;ve looked through the Cypher manual and found `toString` but this is still throwing an error. &lt;br /&gt; \r\n```\r\nNeo.ClientError.Statement.SyntaxError\r\n\r\nType mismatch: map key must be given as String, but was Integer (line 2, column 42 (offset: 108))\r\n&quot;CREATE (:Address {node_id: toString(line[0]), address: line[1], name: line[2], countries: line[3], countries_codes: line[4], sourceID: line[5], valid_until: line[6], note: line[7]})&quot;\r\n```\r\n\r\nI&#39;ve adding a character in and outside of the `toString` and other examples or commands. &lt;br /&gt;\r\n`toString(&#39;x&#39;+line[0])`, `&#39;x&#39;+toString(line[0])`, `toStr(line[0])` &lt;br /&gt;\r\nBut none have worked. \r\n\r\nHow am I supposed to convert a integer to a string on import? ","link":"https://stackoverflow.com/questions/75902324/neo4j-type-mismatch-map-key-must-be-given-as-string-but-was-integer","title":"Neo4j Type mismatch: map key must be given as String, but was Integer"},{"tags":["neo4j"],"owner":{"reputation":1,"user_id":21130696,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AEdFTp6QtjhkX2RJGBDMwfNFf2dfjNsR2gx81UDSBP5c=k-s256","display_name":"Aman Negi","link":"https://stackoverflow.com/users/21130696/aman-negi"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680280447,"creation_date":1680266915,"last_edit_date":1680280447,"question_id":75898731,"share_link":"https://stackoverflow.com/q/75898731","body_markdown":"I am using neo4j 5.5 community version. I want to bulk-insert a lot of data (350 GB) from multiple CSV files.\r\n\r\nI use the following command:\r\n\r\n    neo4j-admin database import full --nodes(path to nodes) \\\r\n      --relationships(path to relationships)  --verbose --high-parallel-io=on \\\r\n      --report-file=./report/ --overwrite-destination=true  \\\r\n      --skip-bad-relationships=true --skip-duplicate-nodes=true \\\r\n      --delimiter=&quot;|&quot; --ignore-extra-columns=true neo4j\r\n\r\n\r\n\r\nThis is the progress of a small chunk of the data that I am dealing with (the full data measures in Gs), which consists of:\r\n\r\n    -160 M nodes\r\n    -780 M node properties\r\n    -150 M relationships\r\n    -30 M relationships properites\r\n\r\n![progress](https://i.stack.imgur.com/mmWE4.png)\r\n\r\nAnd the import of the nodes (160 M) took only 3 minutes however the import for index (2nd process) nearly takes 2 hours to complete.\r\n\r\nI noticed that while the first process all of the worker threads were in use. But for the most of the time in second process only one thread was doing the work.\r\n\r\nIs there a way to fasten the process? I have read online people are able to import this much of data in minutes.\r\n\r\nAm I doing something wrong?\r\n\r\nI tried the memory configurations suggested by the disocrd community of neo4j but that also did not helped.\r\nI saw something that mentions &#39;deduplication&#39; but i don&#39;t think that will give a significant boost in speed as the import of the original data (the one that measures in G) was going on for 3 days and it was no where near complete.\r\nAlso the data that I am having is scattered in multiple CSV files so it is very difficult to segregate the duplicates.","link":"https://stackoverflow.com/questions/75898731/why-does-neo4j-admin-bulk-import-does-not-use-multiple-threads-for-the-whole-pro","title":"Why does neo4j admin bulk import does not use multiple threads for the whole process?"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":5,"user_id":19640810,"user_type":"registered","profile_image":"https://graph.facebook.com/6079708195391306/picture?type=large","display_name":"ilia","link":"https://stackoverflow.com/users/19640810/ilia"},"edited":false,"score":0,"creation_date":1680504145,"post_id":75896250,"comment_id":133903392,"link":"https://stackoverflow.com/questions/75895803/invalid-input-expected-or-neo4j/75896250#comment133903392_75896250"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680252403,"last_edit_date":1680252403,"creation_date":1680250284,"answer_id":75896250,"question_id":75895803,"share_link":"https://stackoverflow.com/a/75896250","body_markdown":"You probably meant to use this logic:\r\n\r\n    MATCH p=(n1:Anumber)-[*..2]-(n2)\r\n    WHERE n1 &lt;&gt; n2 AND\r\n      ALL(n IN NODES(p) WHERE n:Anumber OR n:Bnumber)\r\n    WITH n1, n2, COLLECT(p) AS paths\r\n    WHERE size(paths) &gt; 1\r\n    RETURN n1, n2, size(paths) AS degree, paths","link":"https://stackoverflow.com/questions/75895803/invalid-input-expected-or-neo4j/75896250#75896250","title":"Invalid input: [, expected &quot;+&quot; or &quot;-&quot; neo4j"}],"owner":{"reputation":5,"user_id":19640810,"user_type":"registered","profile_image":"https://graph.facebook.com/6079708195391306/picture?type=large","display_name":"ilia","link":"https://stackoverflow.com/users/19640810/ilia"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75896250,"answer_count":1,"score":0,"last_activity_date":1680252403,"creation_date":1680246891,"last_edit_date":1680249793,"question_id":75895803,"share_link":"https://stackoverflow.com/q/75895803","body_markdown":"I ran this query in neo4j:\r\n\r\n    MATCH (n1:`Anumber`)-[*..2]-(n2)\r\n    WHERE n1 &lt;&gt; n2\r\n    AND all(node in nodes(n1)-[*..2]-(n2) WHERE node:`Anumber` OR node:`Bnumber`)\r\n    WITH n1, n2, COLLECT(p) AS paths\r\n    WHERE size(paths) &gt; 1\r\n    RETURN n1, n2, size(paths) AS degree, paths\r\n\r\nbut got this error:\r\n\r\n    Invalid input &#39;[&#39;: expected &quot;+&quot; or &quot;-&quot; (line 3, column 27 (offset: 76))\r\n    &quot;AND all(node in nodes(n1)-[*..2]-(n2) WHERE node:`Anumber` OR node:`Bnumber`)&quot;\r\n\r\nHow do I fix this problem? ","link":"https://stackoverflow.com/questions/75895803/invalid-input-expected-or-neo4j","title":"Invalid input: [, expected &quot;+&quot; or &quot;-&quot; neo4j"},{"tags":["neo4j","spring-data-neo4j"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680207571,"post_id":75891769,"comment_id":133863786,"link":"https://stackoverflow.com/questions/75891769/neo4j-warning-when-migrating-to-sdn6-and-from-neo4j-4-to-5#comment133863786_75891769"}],"answers":[{"tags":[],"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680263760,"creation_date":1680263760,"answer_id":75898257,"question_id":75891769,"share_link":"https://stackoverflow.com/a/75898257","body_markdown":"The reason for this warning is that internal integer IDs are deprecated in Neo4j 5 and are replaced with what&#39;s called &quot;Element IDs&quot;, which are opaque strings (and still used for internal purposes).\r\n\r\nI have not tried it, but maybe:\r\n```java\r\n    @RelationshipId\r\n    private String id;\r\n```\r\nor:\r\n\r\n```java\r\n    @RelationshipId\r\n    private ElementId id;\r\n```\r\nwill work?","link":"https://stackoverflow.com/questions/75891769/neo4j-warning-when-migrating-to-sdn6-and-from-neo4j-4-to-5/75898257#75898257","title":"Neo4j warning when migrating to SDN6 and from neo4j 4 to 5"}],"owner":{"reputation":3,"user_id":18227445,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10597323f18225696501b2a1160453d5?s=256&d=identicon&r=PG","display_name":"tommyjack","link":"https://stackoverflow.com/users/18227445/tommyjack"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680263760,"creation_date":1680200957,"last_edit_date":1680205417,"question_id":75891769,"share_link":"https://stackoverflow.com/q/75891769","body_markdown":"How do I get rid of this warning?\r\n\r\n&gt; 19:14:07.370 \\[main\\] WARN \r\n&gt; org.springframework.data.neo4j.core.mapping.Neo4jPersistentEntity -\r\n&gt; The entity com.scl.attributefetcher.model.neo4j.AllianceContact is\r\n&gt; using a Long value for storing internally generated Neo4j ids. The\r\n&gt; Neo4j internal Long Ids are deprecated, please consider using an\r\n&gt; external ID generator.\r\n\r\n    public class AllianceContact {\r\n    \r\n        @RelationshipId\r\n        private Long id;\r\n        \r\n        private User user;\r\n        \r\n        @TargetNode\r\n        private AlliancePacket alliancePacket;\r\n        \r\n        private String role;\r\n    \r\n    }\r\n","link":"https://stackoverflow.com/questions/75891769/neo4j-warning-when-migrating-to-sdn6-and-from-neo4j-4-to-5","title":"Neo4j warning when migrating to SDN6 and from neo4j 4 to 5"},{"tags":["neo4j","gremlin","graph-databases","tinkerpop"],"answers":[{"comments":[{"owner":{"reputation":23,"user_id":18528416,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/babd352583e45a78cc58a8010c38efb3?s=256&d=identicon&r=PG","display_name":"glsavvick","link":"https://stackoverflow.com/users/18528416/glsavvick"},"edited":false,"score":0,"creation_date":1680248634,"post_id":75890099,"comment_id":133869269,"link":"https://stackoverflow.com/questions/75888238/neo4j-gremlin-support/75890099#comment133869269_75890099"},{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"reply_to_user":{"reputation":23,"user_id":18528416,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/babd352583e45a78cc58a8010c38efb3?s=256&d=identicon&r=PG","display_name":"glsavvick","link":"https://stackoverflow.com/users/18528416/glsavvick"},"edited":false,"score":0,"creation_date":1680257090,"post_id":75890099,"comment_id":133871225,"link":"https://stackoverflow.com/questions/75888238/neo4j-gremlin-support/75890099#comment133871225_75890099"}],"tags":[],"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680189652,"creation_date":1680189652,"answer_id":75890099,"question_id":75888238,"share_link":"https://stackoverflow.com/a/75890099","body_markdown":"After [a quick search][1], it seems the Gremlin support for Neo4j is currently at Neo4j 3.4, which has reached end of life quite a long time ago.\r\n\r\nI&#39;d say that Neo4j 4 and 5 do not support Gremlin at the moment and that seems unlikely to change in the near future?\r\n\r\n\r\n  [1]: https://github.com/apache/tinkerpop/blob/125e5bf4560546c9727dd25ff4d590f34c7d625b/neo4j-gremlin/pom.xml#L216","link":"https://stackoverflow.com/questions/75888238/neo4j-gremlin-support/75890099#75890099","title":"Neo4J - Gremlin Support"}],"owner":{"reputation":23,"user_id":18528416,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/babd352583e45a78cc58a8010c38efb3?s=256&d=identicon&r=PG","display_name":"glsavvick","link":"https://stackoverflow.com/users/18528416/glsavvick"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75890099,"answer_count":1,"score":0,"last_activity_date":1680189652,"creation_date":1680178955,"question_id":75888238,"share_link":"https://stackoverflow.com/q/75888238","body_markdown":"I did a bit research but need to clarify some things regarding neo4j gremlin support.\r\n\r\nI want to use tinkerpop-gremlin with neo4j db. I saw this link\r\n\r\nhttps://tinkerpop.apache.org/docs/current/reference/#neo4j-gremlin\r\n\r\nfrom this I understand that it is possible but regarding last versions, it is slow. Does it support neo4j 5.x versions for example? (https://stackoverflow.com/questions/61923151/neo4j-4-x-gremlin-support)\r\n\r\nAnother very important thing is if I&#39;d continue to use my lots of groovy script with neo4j db.\r\n\r\nAlso is it easy to migrate traversal api from gremlin queries?\r\n","link":"https://stackoverflow.com/questions/75888238/neo4j-gremlin-support","title":"Neo4J - Gremlin Support"},{"tags":["java","android","neo4j"],"comments":[{"owner":{"reputation":11536,"user_id":295004,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=256&d=identicon&r=PG","display_name":"Morrison Chang","link":"https://stackoverflow.com/users/295004/morrison-chang"},"edited":false,"score":0,"creation_date":1680202859,"post_id":75887605,"comment_id":133862705,"link":"https://stackoverflow.com/questions/75887605/android-studio-connection-to-neo4j#comment133862705_75887605"}],"owner":{"reputation":1,"user_id":21495123,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4453288e3f265fd06c7317564d3de6ea?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Saretta","link":"https://stackoverflow.com/users/21495123/saretta"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680194132,"creation_date":1680175448,"last_edit_date":1680194132,"question_id":75887605,"share_link":"https://stackoverflow.com/q/75887605","body_markdown":"I have to connect neo4j to android studio. I have a recyclerview that must be populated by neo4j. I made the connection and it works for me but the recyclerview is not populated because in debug I saw that the connection driver variable remains null.\r\n\r\n     public static class AsyncTask_Drink extends AsyncTask&lt;String, String, String&gt; {\r\n    \r\n        static AsyncTask_Drink instance = null;\r\n    \r\n        Connection conn = null;\r\n    \r\n        Driver driver;\r\n    \r\n        @Override\r\n        protected String doInBackground(String... strings) {\r\n            try {\r\n                String uri = &quot;bolt://localhost:7687&quot;;\r\n                String username = &quot;neo4j&quot;;\r\n                String password = &quot;neo4j&quot;;\r\n                driver = GraphDatabase.driver(uri, AuthTokens.basic(username, password));\r\n                Session session = driver.session();\r\n                Log.e(&quot;Client&quot;, &quot;Connessione effettuata&quot;);\r\n           } catch (Exception e) {\r\n                e.printStackTrace();\r\n                Log.e(&quot;Client&quot;, &quot;Connessione non effettuata&quot;);\r\n            }\r\n            return null;\r\n        }\r\n    \r\n        public Driver getConn() {\r\n            return this.driver;\r\n        }\r\n    \r\n        public static AsyncTask_Drink getInstance() throws Neo4jException {\r\n    \r\n            if (instance == null) {\r\n    \r\n                instance = new AsyncTask_Drink();\r\n            }\r\n            return instance;\r\n        }\r\n    }`\r\n    \r\n    public class DaoDrinkDatabase implements DaoDrink {\r\n    \r\n        public ArrayList&lt;DrinkDomain&gt; getDrinkCocktail() throws Neo4jException, ClassNotFoundException {\r\n    \r\n            ArrayList&lt;DrinkDomain&gt; drinkDomains = new ArrayList&lt;DrinkDomain&gt;();\r\n    \r\n            Driver driver =  DrinksFragment.AsyncTask_Drink.getInstance().getConn();\r\n    \r\n            try(Session session = driver.session()) {\r\n    \r\n                Result result = session.run(&quot;MATCH (d:drink) -[rel:DI_TIPO]-&gt;(t:Tipologia {tipo:\\&quot;Cocktail\\&quot;}) RETURN d,rel,t&quot;);\r\n    \r\n                while (result.hasNext()) {\r\n    \r\n                    Record record = result.next();\r\n    \r\n                    String name = (record.get(&quot;name&quot;).asString());\r\n                    String descriptor = (record.get(&quot;descriptor&quot;).asString());\r\n                    Double fee = (record.get(&quot;fee&quot;).asDouble());\r\n                    String pic = (record.get(&quot;pic&quot;).asString());\r\n    \r\n                    drinkDomains.add(new DrinkDomain(name, descriptor, fee, pic));\r\n                }\r\n            }\r\n            return drinkDomains;\r\n        }\r\n    \r\n    \r\n      public View onCreateView(@NonNull LayoutInflater inflater,\r\n                                 ViewGroup container, Bundle savedInstanceState) {\r\n            DrinksViewModel drinksViewModel =\r\n                    new ViewModelProvider(this).get(DrinksViewModel.class);\r\n    \r\n            binding = FragmentDrinksBinding.inflate(inflater, container, false);\r\n            View root = binding.getRoot();\r\n    \r\n            text_head = root.findViewById(R.id.text_head);\r\n            category = root.findViewById(R.id.fragment_drinks_category);\r\n            cocktail = root.findViewById(R.id.fragment_drinks_Cocktail);\r\n            shake = root.findViewById(R.id.fragment_drinks_Shake);\r\n            recyclerViewcategory = root.findViewById(R.id.fragment_drinks_recyclerView_category);\r\n            recyclerViewcocktail = root.findViewById(R.id.fragment_drinks_recyclerView_cocktail);\r\n            recyclerViewshake =  root.findViewById(R.id.fragment_drinks_recyclerView_shake);\r\n    \r\n            FunctionThread f = new FunctionThread(&quot;drinks&quot;);\r\n            Thread t = new Thread(f);\r\n            t.start();\r\n            try {\r\n                t.join();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            if(UserSingleton.getLogged()){\r\n    \r\n                text_head.setVisibility(View.INVISIBLE);\r\n                category.setVisibility(View.VISIBLE);\r\n                cocktail.setVisibility(View.VISIBLE);\r\n                shake.setVisibility(View.VISIBLE);\r\n                recyclerViewcategory.setVisibility(View.VISIBLE);\r\n                recyclerViewcocktail.setVisibility(View.VISIBLE);\r\n                recyclerViewshake.setVisibility(View.VISIBLE);\r\n    \r\n            }else{\r\n    \r\n                text_head.setVisibility(View.VISIBLE);\r\n                category.setVisibility(View.VISIBLE);\r\n                shake.setVisibility(View.INVISIBLE);\r\n                cocktail.setVisibility(View.INVISIBLE);\r\n                recyclerViewcategory.setVisibility(View.VISIBLE);\r\n                recyclerViewcocktail.setVisibility(View.INVISIBLE);\r\n                recyclerViewshake.setVisibility(View.INVISIBLE);\r\n    \r\n            }\r\n    \r\n            recyclerViewCategoryList = root.findViewById(R.id.fragment_drinks_recyclerView_category);\r\n            recyclerViewCocktailList = root.findViewById(R.id.fragment_drinks_recyclerView_cocktail);\r\n            recyclerViewShakeList = root.findViewById(R.id.fragment_drinks_recyclerView_shake);\r\n    \r\n            recyclerViewCategory();\r\n    \r\n            AsyncTask_Drink asyncTask_drink = new AsyncTask_Drink();\r\n            asyncTask_drink.execute();\r\n    \r\n            recyclerViewCocktail();\r\n    \r\n            recyclerViewShake();\r\n    \r\n            return root;\r\n        }`\r\n\r\nConnection made to pass data from neo4j to android with java using recyclerview.\r\n\r\nError:\r\n\r\n    java.lang.NullPointerException: Attempt to invoke interface method &#39;org.neo4j.driver.Session org.neo4j.driver.Driver.session()&#39; on a null object reference\r\n\r\n","link":"https://stackoverflow.com/questions/75887605/android-studio-connection-to-neo4j","title":"android studio connection to neo4j"},{"tags":["neo4j","react-flow"],"owner":{"reputation":374,"user_id":15797317,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9881d6ce201ea7eee0e67c29dec1e24c?s=256&d=identicon&r=PG&f=1","display_name":"spacedog","link":"https://stackoverflow.com/users/15797317/spacedog"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680137853,"creation_date":1680137853,"question_id":75883318,"share_link":"https://stackoverflow.com/q/75883318","body_markdown":"I’m pulling graph data from neo4j and was hoping to display my graphs in React Flow, however, I have not seen options for different auto layout styles.  Most of the examples I have seen in React Flow have been coded in javascript and produce Tree style layouts.  However, in other graph UI tools there are options for thing like: force, tree, circle, sphere, cluster, etc.  I want ot do something like this rather than a tree layout.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI’m looking for an auto layout function that would look something like this which is called “force” in other tools.\r\n\r\nHow can this be done in React Flow?\r\n\r\nThanks.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RItpe.png","link":"https://stackoverflow.com/questions/75883318/react-flow-is-there-a-dynamic-force-node-layout-function","title":"React Flow: Is there a Dynamic “force” node layout function?"},{"tags":["debugging","intellij-idea","neo4j","neo4j-plugin","neo4j-harness"],"owner":{"reputation":4185,"user_id":214416,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/acb576b29171a8396bf8acdb680c7e08?s=256&d=identicon&r=PG","display_name":"mcv","link":"https://stackoverflow.com/users/214416/mcv"},"last_editor":{"reputation":4185,"user_id":214416,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/acb576b29171a8396bf8acdb680c7e08?s=256&d=identicon&r=PG","display_name":"mcv","link":"https://stackoverflow.com/users/214416/mcv"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680164929,"creation_date":1680075943,"last_edit_date":1680164929,"question_id":75874467,"share_link":"https://stackoverflow.com/q/75874467","body_markdown":"I&#39;m trying to debug my unit tests for my neo4j plugin code, but while breakpoints in the tests work fine, breakpoints in the plugin code I&#39;m testing don&#39;t work. I&#39;m using the neo4j test harness.\r\n\r\nI&#39;m setting up my plugin code like this:\r\n```\r\n    @BeforeAll\r\n    void initializeNeo4j() {\r\n        this.embeddedDatabaseServer = Neo4jBuilders.newInProcessBuilder()\r\n                                                   .withDisabledServer()\r\n                                                   .withFunction(MyPlugin.class)\r\n                                                   .withProcedure(MyPlugin.class)\r\n                                                   .build();\r\n\r\n        this.driver = GraphDatabase.driver(embeddedDatabaseServer.boltURI(), driverConfig);\r\n    }\r\n```\r\nThe test itself looks like this:\r\n```\r\n    @Test\r\n    void testSimpleJsonImport() throws IOException {\r\n        Map&lt;String, Object&gt; config = getJsonFile(SIMPLETEST_DEFINITION_JSON); // breakpoint works fine\r\n        Result initialImport = session.run(&quot;CALL myplugin.json.import($data, $config)&quot;,\r\n                Map.ofEntries(\r\n                        entry(&quot;data&quot;, getJsonFile(SIMPLETEST_JSON)),\r\n                        entry(&quot;config&quot;, config)\r\n                ));\r\n        initialImport.consume();\r\n    }\r\n```\r\nAnd the plugin code looks like this:\r\n```\r\n    @Procedure(name = &quot;myplugin.json.import&quot;, mode = Mode.WRITE)\r\n    public Stream&lt;BuiltInProcedures.NodeResult&gt; jsonImport(\r\n            @Name(&quot;data&quot;) Map&lt;String, Object&gt; data,\r\n            @Name(&quot;config&quot;) Map&lt;String, Object&gt; config\r\n    ) {\r\n        JsonAdapter adapter = new JsonAdapter(data); // breakpoint here is ignored\r\n        ...\r\n    }\r\n```\r\n\r\nThe weird thing is, I&#39;m pretty this used to work. I don&#39;t think I&#39;ve changed anything about my setup since then, yet now it fails.\r\n\r\nI&#39;m using IntelliJ IDEA, and I&#39;ve tried running just the specific test in the debugger from the context menu, I&#39;ve tried running all the tests from the debug button at the top right, I&#39;ve run the debugger from the maven lifecycle context menu, nothing works.","link":"https://stackoverflow.com/questions/75874467/breakpoints-in-neo4j-plugin-code-dont-work-when-debugging","title":"Breakpoints in neo4j plugin code don&#39;t work when debugging"},{"tags":["java","android","neo4j"],"comments":[{"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1680083230,"post_id":75874306,"comment_id":133835569,"link":"https://stackoverflow.com/questions/75874306/connection-to-neo4j-incorrect-in-android-studio#comment133835569_75874306"},{"owner":{"reputation":1,"user_id":21495123,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4453288e3f265fd06c7317564d3de6ea?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Saretta","link":"https://stackoverflow.com/users/21495123/saretta"},"reply_to_user":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1680084162,"post_id":75874306,"comment_id":133835799,"link":"https://stackoverflow.com/questions/75874306/connection-to-neo4j-incorrect-in-android-studio#comment133835799_75874306"},{"owner":{"reputation":1,"user_id":21495123,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4453288e3f265fd06c7317564d3de6ea?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Saretta","link":"https://stackoverflow.com/users/21495123/saretta"},"reply_to_user":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1680084239,"post_id":75874306,"comment_id":133835822,"link":"https://stackoverflow.com/questions/75874306/connection-to-neo4j-incorrect-in-android-studio#comment133835822_75874306"},{"owner":{"reputation":1,"user_id":21495123,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4453288e3f265fd06c7317564d3de6ea?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Saretta","link":"https://stackoverflow.com/users/21495123/saretta"},"reply_to_user":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"edited":false,"score":0,"creation_date":1680091048,"post_id":75874306,"comment_id":133837467,"link":"https://stackoverflow.com/questions/75874306/connection-to-neo4j-incorrect-in-android-studio#comment133837467_75874306"}],"owner":{"reputation":1,"user_id":21495123,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4453288e3f265fd06c7317564d3de6ea?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Saretta","link":"https://stackoverflow.com/users/21495123/saretta"},"last_editor":{"reputation":1,"user_id":21495123,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4453288e3f265fd06c7317564d3de6ea?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Saretta","link":"https://stackoverflow.com/users/21495123/saretta"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680098003,"creation_date":1680074744,"last_edit_date":1680098003,"question_id":75874306,"share_link":"https://stackoverflow.com/q/75874306","body_markdown":"Hi I would like to use neo4j in an app made in android studio on mac using neo4j version 5.6.0 desktop on mac, but when I try to connect with &quot;bolt://192.168.X.X:7687&quot; it gives me error it&#39;s from as message on neo4j: &quot;ServiceUnavailable: WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the Neo4j certificate is configured to use. WebSocket readyState` is: 3&quot;.\r\n\r\nI tried uncommenting these dbms.connectors .default_listen_address=0.0.0.0 and server.bolt.listen_address\r\n\r\nbut it didn&#39;t work and it&#39;s not a question of the port because if I activate the server with &quot;bolt://192.168.X.X:7687&quot; the server c onnette but from client app I have: &quot;&quot;W/System.err: org.neo4j.driver.v1.exceptions.ServiceUnavailableException: Unable to connect to localhost:7687, ensure the database is running and that there is a working network connection to it .&quot;\r\n\r\nAs a client I made the connection in android studio with AsyncTask like this:\r\n\r\n```\r\n`  try {\r\n                String uri = &quot;bolt://X.X.X:7687&quot;;\r\n                String username = &quot;neo4j&quot;;\r\n                String password = &quot;neo4j&quot;;\r\n                driver = GraphDatabase.driver(uri, AuthTokens.basic(username, password));\r\n                Session session = driver.session();\r\n                Log.e(&quot;Client&quot;, &quot;Connessione effettuata&quot;);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                Log.e(&quot;Client&quot;, &quot;Connessione non effettuata&quot;);\r\n            }`\r\n```\r\n\r\nHow can I fix it?\r\n\r\nI would like the neo4j server to connect","link":"https://stackoverflow.com/questions/75874306/connection-to-neo4j-incorrect-in-android-studio","title":"Connection to neo4j incorrect in android studio"},{"tags":["neo4j","cypher","graph-databases"],"comments":[{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1680070175,"post_id":75872773,"comment_id":133832371,"link":"https://stackoverflow.com/questions/75872773/recursive-cypher-query-for-a-neo4j-database#comment133832371_75872773"},{"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"edited":false,"score":0,"creation_date":1680074687,"post_id":75872773,"comment_id":133833331,"link":"https://stackoverflow.com/questions/75872773/recursive-cypher-query-for-a-neo4j-database#comment133833331_75872773"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680111791,"post_id":75872773,"comment_id":133843640,"link":"https://stackoverflow.com/questions/75872773/recursive-cypher-query-for-a-neo4j-database#comment133843640_75872773"},{"owner":{"reputation":21,"user_id":11763047,"user_type":"registered","profile_image":"https://graph.facebook.com/2173038816249933/picture?type=large","display_name":"Archius Vương","link":"https://stackoverflow.com/users/11763047/archius-v%c6%b0%c6%a1ng"},"edited":false,"score":0,"creation_date":1680247320,"post_id":75872773,"comment_id":133869014,"link":"https://stackoverflow.com/questions/75872773/recursive-cypher-query-for-a-neo4j-database#comment133869014_75872773"}],"answers":[{"tags":[],"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680120661,"creation_date":1680120661,"answer_id":75881764,"question_id":75872773,"share_link":"https://stackoverflow.com/a/75881764","body_markdown":"I create some data samples below:\r\n\r\n    CREATE (a1:Account {name:&#39;acct1&#39;}),\r\n    (a2:Account {name:&#39;acct2&#39;}),\r\n    (a3:Account {name:&#39;acct3&#39;}),\r\n    (e1:Email),\r\n    (e2:Email),\r\n    (e22:Email),\r\n    (e3:Email),\r\n    (p1:Phone),\r\n    (p2:Phone),\r\n    (p3:Phone),\r\n    (p32:Phone),\r\n     (a1)-[:has_email]-&gt;(e1),\r\n    (a1)-[:has_phone]-&gt;(p1),\r\n    (a2)-[:has_email]-&gt;(e2),\r\n    (a2)-[:has_email]-&gt;(e22),\r\n    (a2)-[:has_phone]-&gt;(p2),\r\n    (a3)-[:has_email]-&gt;(e3),\r\n    (a3)-[:has_phone]-&gt;(p3),\r\n    (a3)-[:has_phone]-&gt;(p32)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qwcNA.png\r\n\r\n\r\nBelow is the query to get all accounts with non-unique email or phone.\r\n\r\n    MATCH (a:Account)-[:has_email]-(e:Email), (a)-[:has_phone]-(p:Phone)\r\n    WITH a, size(collect(distinct e)) as ecnt,  size(collect(distinct p)) as pcnt \r\n     WHERE ecnt&gt;1 or pcnt&gt;1\r\n    RETURN a.name, ecnt as duplicate_email_cnt, pcnt as duplicate_phone_cnt\r\n\r\nwhich should return account2(duplicate email) and account2(duplicate phone)\r\n\r\nSample result:\r\n   \r\n\r\n        ╒════════╤═════════════════════╤═════════════════════╕\r\n        │&quot;a.name&quot;│&quot;duplicate_email_cnt&quot;│&quot;duplicate_phone_cnt&quot;│\r\n        ╞════════╪═════════════════════╪═════════════════════╡\r\n        │&quot;acct2&quot; │2                    │1                    │\r\n        ├────────┼─────────────────────┼─────────────────────┤\r\n        │&quot;acct3&quot; │1                    │2                    │\r\n        └────────┴─────────────────────┴─────────────────────┘","link":"https://stackoverflow.com/questions/75872773/recursive-cypher-query-for-a-neo4j-database/75881764#75881764","title":"Recursive cypher query for a Neo4J database"}],"owner":{"reputation":21,"user_id":11763047,"user_type":"registered","profile_image":"https://graph.facebook.com/2173038816249933/picture?type=large","display_name":"Archius Vương","link":"https://stackoverflow.com/users/11763047/archius-v%c6%b0%c6%a1ng"},"last_editor":{"reputation":14001,"user_id":5442034,"user_type":"registered","profile_image":"https://graph.facebook.com/10154838662437837/picture?type=large","display_name":"Kelvin Lawrence","link":"https://stackoverflow.com/users/5442034/kelvin-lawrence"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680124179,"creation_date":1680059212,"last_edit_date":1680124179,"question_id":75872773,"share_link":"https://stackoverflow.com/q/75872773","body_markdown":"Imagine having a database with 3 main nodes:\r\n\r\n - Account\r\n - Email\r\n - Phone number\r\n\r\nEvery accounts that share the same email should be unique. Similarly, every accounts that share the same phone number should be unique. So if we want to drag out all of accounts that should be unique, we gonna need to do something like:\r\n\r\n```\r\nMATCH (:account) -[:has_email]-&gt; (:account) -[:has_phone]-&gt; -[:has_email]-&gt; (:account) -&gt; ...\r\n```\r\n\r\nAnd the query go on forever. Do we have a built-in solution in Neo4J for this type of problem ?\r\n\r\nMany thanks and good day everyone.","link":"https://stackoverflow.com/questions/75872773/recursive-cypher-query-for-a-neo4j-database","title":"Recursive cypher query for a Neo4J database"},{"tags":["neo4j"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680046000,"post_id":75870965,"comment_id":133829425,"link":"https://stackoverflow.com/questions/75870965/neo4j-change-the-default-id-data-type-from-integer-to-guid#comment133829425_75870965"}],"answers":[{"tags":[],"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"last_editor":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680094908,"last_edit_date":1680094908,"creation_date":1680070889,"answer_id":75873777,"question_id":75870965,"share_link":"https://stackoverflow.com/a/75873777","body_markdown":"There are two `id` functions in `Neo4j`. One is [`id()`][1] which is deprecated in Neo4j 5.0 and above. This function returns an `integer id`.\r\n\r\nThe second one is [`elementId`][2] new in version 5.0 and above, and it returns a `string`. However, both of these `id&#39;s` are reused by Neo4j when nodes and relationships are deleted. So, it&#39;s not advised to use them in your query.\r\n\r\nSo, if you want to `GUID` as node ids, create a new node property and store it in them. Also, there is no such setting named `dbms.id.type` in the configurations. You can find the list of all available settings [here][3].\r\n\r\n\r\nYou can use [`randomUUID`][4] function to generate a `GUID` or `apoc.uuid.install` as suggested by @fbiville in another answer.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-id\r\n  [2]: https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-elementid\r\n  [3]: https://neo4j.com/docs/operations-manual/current/reference/configuration-settings/\r\n  [4]: https://neo4j.com/docs/cypher-manual/current/functions/scalar/#functions-randomuuid","link":"https://stackoverflow.com/questions/75870965/neo4j-change-the-default-id-data-type-from-integer-to-guid/75873777#75873777","title":"Neo4j: Change the default ID data type from integer to GUID"},{"tags":[],"owner":{"reputation":8029,"user_id":277128,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f06979a03b9b522c80cb12def209c31a?s=256&d=identicon&r=PG","display_name":"fbiville","link":"https://stackoverflow.com/users/277128/fbiville"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680080788,"creation_date":1680080788,"answer_id":75875190,"question_id":75870965,"share_link":"https://stackoverflow.com/a/75875190","body_markdown":"There is no built-in way to customize the ID (or element ID) type since those have a very internal role.\r\n\r\nAn alternative is to automatically generate GUID e.g. for new nodes.\r\nAPOC offers this: [apoc.uuid.install][1]. \r\n\r\n\r\n  [1]: https://neo4j.com/labs/apoc/4.1/graph-updates/uuid/#automatic-uuids","link":"https://stackoverflow.com/questions/75870965/neo4j-change-the-default-id-data-type-from-integer-to-guid/75875190#75875190","title":"Neo4j: Change the default ID data type from integer to GUID"}],"owner":{"reputation":374,"user_id":15797317,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9881d6ce201ea7eee0e67c29dec1e24c?s=256&d=identicon&r=PG&f=1","display_name":"spacedog","link":"https://stackoverflow.com/users/15797317/spacedog"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75873777,"answer_count":2,"score":0,"last_activity_date":1680094908,"creation_date":1680036683,"question_id":75870965,"share_link":"https://stackoverflow.com/q/75870965","body_markdown":"I&#39;m using Neo4j version 5.6 and want to change the default node ID type from integer to GUID.\r\n\r\nI found a post that said to open neo4j.conf and edit the dbms.id.type setting. However, I have searched this file and there&#39;s no such setting.\r\n\r\nHow can I change the node default ID data type to GUID?\r\n\r\nThanks\r\n","link":"https://stackoverflow.com/questions/75870965/neo4j-change-the-default-id-data-type-from-integer-to-guid","title":"Neo4j: Change the default ID data type from integer to GUID"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":3,"user_id":21513068,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5764bd3a02f5ce19dcde92fc033f4c03?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Jackson","link":"https://stackoverflow.com/users/21513068/jackson"},"edited":false,"score":0,"creation_date":1680036653,"post_id":75870797,"comment_id":133827958,"link":"https://stackoverflow.com/questions/75870659/is-there-a-way-to-make-something-similar-to-select-inside-from-in-neo4j-like-in/75870797#comment133827958_75870797"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680035438,"creation_date":1680035438,"answer_id":75870797,"question_id":75870659,"share_link":"https://stackoverflow.com/a/75870797","body_markdown":"This should work:\r\n\r\n    MATCH (:Person)-[r1:LIKE]-&gt;(:Post)&lt;-[:CREATE]-(per2:Person)\r\n    WITH per2, COUNT(r1) AS cnt\r\n    ORDER BY cnt DESC\r\n    LIMIT 1\r\n    MATCH (per:Person)-[:REPOST]-&gt;(:Post)&lt;-[:CREATE]-(per2)\r\n    RETURN DISTINCT per.name\r\n\r\nYour first query needed to replace `RETURN` with `WITH`, so that the query did not end. And it also needed to pass `per2` to the second `MATCH`.","link":"https://stackoverflow.com/questions/75870659/is-there-a-way-to-make-something-similar-to-select-inside-from-in-neo4j-like-in/75870797#75870797","title":"Is there a way to make something similar to SELECT inside FROM in Neo4j like in SQL?"}],"owner":{"reputation":3,"user_id":21513068,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5764bd3a02f5ce19dcde92fc033f4c03?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"Jackson","link":"https://stackoverflow.com/users/21513068/jackson"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75870797,"answer_count":1,"score":0,"last_activity_date":1680035438,"creation_date":1680034286,"last_edit_date":1680035073,"question_id":75870659,"share_link":"https://stackoverflow.com/q/75870659","body_markdown":"I have to make a query that gives me the list of people who reposted the posts of someone whose posts are the most likable.\r\n\r\nIt HAS to be one query, but I can make it only through two queries.\r\nI&#39;ve tried `OPTIONAL MATCH`, and the `CALL` clause, but it&#39;s still not working and I can&#39;t understand what exactly I&#39;m doing wrong.\r\n\r\nHere&#39;s my two queries:\r\n\r\n1)\r\n\r\n    match (per1:Person)-[r1:LIKE]-&gt;(p:Post)&lt;-[:CREATE]-(per2:Person)\r\n    return per2.name, count(r1) order by count(r1) desc limit 1\r\n\r\n(I find that the author, whose posts get the biggest amount of likes, is Emily Douson, so I do the next step:)\r\n\r\n2)\r\n\r\n    match (per:Person)-[:REPOST]-&gt;(p:Post)&lt;-[:CREATE]-(per2: Person {name:&quot;Emily Douson&quot;})\r\n    return distinct per.name\r\n\r\nThe problem is that through `OPTIONAL MATCH` I can get the list of authors, but not the one author that I need to use.\r\n\r\nMy attempt to use `CALL` looked like:\r\n\r\n    call {\r\n      match(per1:Person)-[r1:LIKE]-&gt;(p:Post)&lt;-[:CREATE]-(per2:Person)\r\n      return per2.FIO as personX, count(r1) as countL order by countL desc limit 1\r\n    }\r\n    with personX\r\n    match (per:Person)-[:REPOST]-&gt;(p:Post)&lt;-[:CREATE]-(personX)\r\n    return distinct per.FIO\r\n\r\nbut I got the message: \r\n\r\n    Type mismatch: personX defined with conflicting type Boolean, Float, Integer, Number, Point, String, Duration, Date, Time, LocalTime, LocalDateTime, DateTime, List&lt;Boolean&gt;, List&lt;Float&gt;, List&lt;Integer&gt;, List&lt;Number&gt;, List&lt;Point&gt;, List&lt;String&gt;, List&lt;Duration&gt;, List&lt;Date&gt;, List&lt;Time&gt;, List&lt;LocalTime&gt;, List&lt;LocalDateTime&gt; or List&lt;DateTime&gt; (expected Node) (line 2, column 51 (offset: 212))\r\n    &quot;match(per:Person)-[:REPOST]-&gt;(p:Post)&lt;-[:CREATE]-(personX) return distinct per.FIO&quot;\r\n\r\n","link":"https://stackoverflow.com/questions/75870659/is-there-a-way-to-make-something-similar-to-select-inside-from-in-neo4j-like-in","title":"Is there a way to make something similar to SELECT inside FROM in Neo4j like in SQL?"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":374,"user_id":15797317,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9881d6ce201ea7eee0e67c29dec1e24c?s=256&d=identicon&r=PG&f=1","display_name":"spacedog","link":"https://stackoverflow.com/users/15797317/spacedog"},"edited":false,"score":0,"creation_date":1680032453,"post_id":75870287,"comment_id":133827089,"link":"https://stackoverflow.com/questions/75869828/neo4j-docs-provide-an-example-with-the-incorrect-syntax-trying-to-use-count-wit/75870287#comment133827089_75870287"}],"tags":[],"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680031365,"creation_date":1680031365,"answer_id":75870287,"question_id":75869828,"share_link":"https://stackoverflow.com/a/75870287","body_markdown":"The most likely reason you are getting this error is that you are not using of the later version of Neo4j. Probably all version of Neo4j v5 work with this syntax, and perhaps some of the later versions of v4, but probably not many. I have both of these queries and they work in Neo4j v5.5.0","link":"https://stackoverflow.com/questions/75869828/neo4j-docs-provide-an-example-with-the-incorrect-syntax-trying-to-use-count-wit/75870287#75870287","title":"Neo4j Docs provide an example with the incorrect syntax. Trying to use COUNT with the WITH statement"},{"comments":[{"owner":{"reputation":374,"user_id":15797317,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9881d6ce201ea7eee0e67c29dec1e24c?s=256&d=identicon&r=PG&f=1","display_name":"spacedog","link":"https://stackoverflow.com/users/15797317/spacedog"},"edited":false,"score":0,"creation_date":1680036013,"post_id":75870298,"comment_id":133827813,"link":"https://stackoverflow.com/questions/75869828/neo4j-docs-provide-an-example-with-the-incorrect-syntax-trying-to-use-count-wit/75870298#comment133827813_75870298"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680045074,"last_edit_date":1680045074,"creation_date":1680031425,"answer_id":75870298,"question_id":75869828,"share_link":"https://stackoverflow.com/a/75870298","body_markdown":"[UPDATED]\r\n\r\nAlthough the [COUNT subquery](https://neo4j.com/docs/cypher-manual/current/syntax/expressions/#count-subqueries) expression was [introduced in neo4j 5.0](https://neo4j.com/docs/cypher-manual/current/deprecations-additions-removals-compatibility/#_new_features_2), it did not support a `WITH` clause in the subquery until version 5.3 (verified by testing).\r\n\r\nThis query should work for you, instead (there was no good reason for using the `WITH` in the first place):\r\n\r\n    MATCH (p:PLAYER)\r\n    WHERE COUNT {\r\n        MATCH (p)-[:PLAYED_AGAINST]-&gt;(t:TEAM)\r\n        WHERE t.name = &quot;Brooklyn Nets&quot;\r\n    } = 1\r\n    RETURN p.name AS name\r\n\r\n","link":"https://stackoverflow.com/questions/75869828/neo4j-docs-provide-an-example-with-the-incorrect-syntax-trying-to-use-count-wit/75870298#75870298","title":"Neo4j Docs provide an example with the incorrect syntax. Trying to use COUNT with the WITH statement"}],"owner":{"reputation":374,"user_id":15797317,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9881d6ce201ea7eee0e67c29dec1e24c?s=256&d=identicon&r=PG&f=1","display_name":"spacedog","link":"https://stackoverflow.com/users/15797317/spacedog"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75870287,"answer_count":2,"score":0,"last_activity_date":1680045074,"creation_date":1680028194,"question_id":75869828,"share_link":"https://stackoverflow.com/q/75869828","body_markdown":"I&#39;m going through the neo4j docs studying cypher&#39;s syntax\r\nhttps://neo4j.com/docs/cypher-manual/current/syntax/expressions/#cypher-subquery-expressions\r\n\r\nand about half way down the page is this example:\r\n\r\n\r\n    MATCH (person:Person)\r\n    WHERE COUNT {\r\n        WITH &quot;Ozzy&quot; AS dogName\r\n        MATCH (person)-[:HAS_DOG]-&gt;(d:Dog)\r\n        WHERE d.name = dogName\r\n    } = 1\r\n    RETURN person.name AS name\r\n\r\n\r\nand now I want to convert it to run in my sample graph which as nodes PLAYER and TEAM, and relationship PLAYED_AGAINST.  My converted query is this:\r\n\r\n    MATCH (p:PLAYER)\r\n    WHERE COUNT {\r\n        WITH &quot;Brooklyn Nets&quot; AS teamName\r\n        MATCH (p)-[:PLAYED_AGAINST]-&gt;(t:TEAM)\r\n        WHERE t.name = teamName\r\n    } = 1\r\n    RETURN p.name AS name\r\n\r\nwhich I think matches neo4j&#39;s docs exactly, however, I&#39;m getting this error:\r\n\r\n&gt; Invalid input &#39;WITH&#39;: expected &quot;(&quot;, &quot;allShortestPaths&quot; or\r\n&gt; &quot;shortestPath&quot; (line 3, column 5 (offset: 35)) &quot;    WITH &quot;Brooklyn\r\n&gt; Nets&quot; AS teamName&quot;\r\n&gt;      ^\r\n\r\nwhich actually looks like this:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cOOnw.png\r\n\r\n\r\n1) Are the docs incorrect or am I missing something?\r\n\r\n2) What would the correct syntax be for this?\r\n\r\nThank you.\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/75869828/neo4j-docs-provide-an-example-with-the-incorrect-syntax-trying-to-use-count-wit","title":"Neo4j Docs provide an example with the incorrect syntax. Trying to use COUNT with the WITH statement"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680022116,"post_id":75866666,"comment_id":133824530,"link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence#comment133824530_75866666"},{"owner":{"reputation":1,"user_id":3161154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Dewald","link":"https://stackoverflow.com/users/3161154/dewald"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680077973,"post_id":75866666,"comment_id":133834135,"link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence#comment133834135_75866666"},{"owner":{"reputation":1,"user_id":3161154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Dewald","link":"https://stackoverflow.com/users/3161154/dewald"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680079944,"post_id":75866666,"comment_id":133834693,"link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence#comment133834693_75866666"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680110507,"post_id":75866666,"comment_id":133843313,"link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence#comment133843313_75866666"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680110954,"post_id":75866666,"comment_id":133843421,"link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence#comment133843421_75866666"},{"owner":{"reputation":1,"user_id":3161154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Dewald","link":"https://stackoverflow.com/users/3161154/dewald"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680698907,"post_id":75866666,"comment_id":133941879,"link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence#comment133941879_75866666"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1680715147,"post_id":75866666,"comment_id":133946617,"link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence#comment133946617_75866666"}],"answers":[{"comments":[{"owner":{"reputation":1,"user_id":3161154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Dewald","link":"https://stackoverflow.com/users/3161154/dewald"},"edited":false,"score":0,"creation_date":1680079850,"post_id":75868034,"comment_id":133834669,"link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence/75868034#comment133834669_75868034"}],"tags":[],"owner":{"reputation":743,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/HDcLp.jpg?s=256&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680016282,"creation_date":1680016282,"answer_id":75868034,"question_id":75866666,"share_link":"https://stackoverflow.com/a/75868034","body_markdown":"Have you considered a subquery? something like ...\r\n\r\n    MATCH (doc:ProjectLibrary) WHERE EXISTS(doc.`References:DocumentIDValue`)\r\n    UNWIND split(doc.`References:DocumentIDValue`,&#39;;&#39;) AS reference\r\n    call\r\n    {\r\n    with reference\r\n    MATCH(n:Reference_Verified {DocumentID: reference}) \r\n    return n\r\n    }\r\n    MERGE(doc)-[:References]-&gt;(n)\r\n\r\nSubqueries can be nested if you are trying to link documents.\r\n","link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence/75868034#75868034","title":"Cypher unwind and nested CSV data only matching first occurence"},{"tags":[],"owner":{"reputation":1,"user_id":3161154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Dewald","link":"https://stackoverflow.com/users/3161154/dewald"},"last_editor":{"reputation":1,"user_id":3161154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Dewald","link":"https://stackoverflow.com/users/3161154/dewald"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680699362,"last_edit_date":1680699362,"creation_date":1680699128,"answer_id":75939668,"question_id":75866666,"share_link":"https://stackoverflow.com/a/75939668","body_markdown":"I solved this issue (based on data without the offending &quot;#&quot;) with some inspiration from [Merge Nodes and Relationship][1]\r\n\r\n\r\n  [1]: https://community.neo4j.com/t/merge-nodes-and-relationship/22577/14\r\n\r\nUsing UNWIND with RANGE and an iterator provides the for loop I needed:\r\n\r\n    MATCH (doc:ProjectList) WHERE EXISTS(doc.ReferencesDocumentIDValue)\r\n    WITH SPLIT(doc.ReferencesDocumentIDValue,&#39;;&#39;) AS refID_split, doc\r\n    UNWIND range(0, size(refID_split)) AS i\r\n    MATCH (ref:Reflist) WHERE ref.DocumentID = refID_split[i]\r\n    MERGE (doc)-[:references]-&gt;(ref)","link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence/75939668#75939668","title":"Cypher unwind and nested CSV data only matching first occurence"}],"owner":{"reputation":1,"user_id":3161154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Dewald","link":"https://stackoverflow.com/users/3161154/dewald"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":7,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1680699362,"creation_date":1680008817,"last_edit_date":1680110489,"question_id":75866666,"share_link":"https://stackoverflow.com/q/75866666","body_markdown":"I am working with 2 separate sets of CSV input data, a list of references and a list of documents.\r\nI am building a graphDB to track which document/s depends on which reference/s.\r\nThe list of docs CSV file contains nested data for the references which need to be evaluated individually for each doc.\r\n\r\nMy current cypher only creates the relationship for the first match, the amount of references for each doc varies and could be null, hence the UNWIND and WHERE EXISTS.\r\n\r\nI expect a new relationship to be created for each reference with a successful match, not only the first one.\r\nThe second reference could result in an unsuccessful match and the third match in the unwind could be successful and so forth for each reference found by the UNWIND.\r\n\r\n    MATCH (doc:ProjectLibrary) WHERE EXISTS(doc.`References:DocumentIDValue`)\r\n    UNWIND split(doc.`References:DocumentIDValue`,&#39;;&#39;) AS reference\r\n    MATCH(n:Reference_Verified {DocumentID: reference}) \r\n    MERGE(doc)-[:References]-&gt;(n)\r\n\r\nIs the iteration stopped when an unsuccessful match is made?\r\n\r\nI am still thinking in terms of for loops so these single row queries take some getting use to.\r\n\r\n[UPDATE]\r\n\r\nFollowing up on a comment, it turns out the second and following items contain a preceding &#39;#&#39; which would result in the match failing.\r\n\r\nAlthough this newer query solves the &#39;#&#39;, the end result is unchanged:\r\n\r\n    MATCH (doc:ProjectLibrary) WHERE EXISTS(doc.`References:DocumentIDValue`)\r\n    UNWIND split(doc.`References:DocumentIDValue`,&#39;;&#39;) AS reference\r\n    WITH REPLACE(reference,&quot;#&quot;,&quot;&quot;) AS refclean \r\n    MATCH(n:Reference_Verified {DocumentID: refclean})\r\n    MERGE(doc)-[:References]-&gt;(n)","link":"https://stackoverflow.com/questions/75866666/cypher-unwind-and-nested-csv-data-only-matching-first-occurence","title":"Cypher unwind and nested CSV data only matching first occurence"},{"tags":["neo4j","cypher","cypher-dsl"],"answers":[{"comments":[{"owner":{"reputation":457,"user_id":3022586,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/402cc8ea9c0f928e6cd95ee4a631392b?s=256&d=identicon&r=PG","display_name":"CptWasp","link":"https://stackoverflow.com/users/3022586/cptwasp"},"edited":false,"score":0,"creation_date":1679921792,"post_id":75855353,"comment_id":133802274,"link":"https://stackoverflow.com/questions/75853429/cypherdsl-reactivecypherdslstatementexecutor-findone-not-working-properly/75855353#comment133802274_75855353"},{"owner":{"reputation":457,"user_id":3022586,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/402cc8ea9c0f928e6cd95ee4a631392b?s=256&d=identicon&r=PG","display_name":"CptWasp","link":"https://stackoverflow.com/users/3022586/cptwasp"},"edited":false,"score":0,"creation_date":1679922509,"post_id":75855353,"comment_id":133802509,"link":"https://stackoverflow.com/questions/75853429/cypherdsl-reactivecypherdslstatementexecutor-findone-not-working-properly/75855353#comment133802509_75855353"},{"owner":{"reputation":457,"user_id":3022586,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/402cc8ea9c0f928e6cd95ee4a631392b?s=256&d=identicon&r=PG","display_name":"CptWasp","link":"https://stackoverflow.com/users/3022586/cptwasp"},"edited":false,"score":0,"creation_date":1679991897,"post_id":75855353,"comment_id":133815868,"link":"https://stackoverflow.com/questions/75853429/cypherdsl-reactivecypherdslstatementexecutor-findone-not-working-properly/75855353#comment133815868_75855353"},{"owner":{"reputation":457,"user_id":3022586,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/402cc8ea9c0f928e6cd95ee4a631392b?s=256&d=identicon&r=PG","display_name":"CptWasp","link":"https://stackoverflow.com/users/3022586/cptwasp"},"edited":false,"score":0,"creation_date":1679992470,"post_id":75855353,"comment_id":133816049,"link":"https://stackoverflow.com/questions/75853429/cypherdsl-reactivecypherdslstatementexecutor-findone-not-working-properly/75855353#comment133816049_75855353"}],"tags":[],"owner":{"reputation":4580,"user_id":1547989,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/20492a196bb034ad3aa7e05e593fede9?s=256&d=identicon&r=PG","display_name":"Michael Simons","link":"https://stackoverflow.com/users/1547989/michael-simons"},"last_editor":{"reputation":4580,"user_id":1547989,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/20492a196bb034ad3aa7e05e593fede9?s=256&d=identicon&r=PG","display_name":"Michael Simons","link":"https://stackoverflow.com/users/1547989/michael-simons"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679988152,"last_edit_date":1679988152,"creation_date":1679917469,"answer_id":75855353,"question_id":75853429,"share_link":"https://stackoverflow.com/a/75855353","body_markdown":"Please use the following in your return clause:\r\n\r\n```java\r\nResultStatement statement = Cypher.match(relationship)\r\n\t//\t.where(....)\r\n    .returningDistinct(originNode.getRequiredSymbolicName(), Functions.collect(relationship).as(&quot;r&quot;), Functions.collect(targetNode).as(&quot;t&quot;))\r\n\t\t.build();\r\n```\r\n\r\nBasically what you have to do is when using custom queries is to shape the returned subgraph into one record per entity (which is what SDN normally does with the generated queries), this is described here: [Getting one record per root node][1] and as a Cypher-DSL [example][2] and under [Using complex, dynamic custom queries but still returning domain types][3]\r\n\r\nI am the author of Cypher-DSL and co-maintainer of SDN, so thank you for using both :)\r\n\r\n*Update after comment*\r\n\r\nNote that I queried the relationships in the same direction like in your model now, speaking from the PoV from the target node (they are outgoing from its view)\r\n\r\n```java\r\nNode targetNode = Cypher.node(targetType)\r\n    .named(&quot;target&quot;)\r\n    .withProperties(VisibilityGroup.ENTITY_ID_PROPERTY,\r\n            Cypher.literalOf(targetEntityId.toString()));\r\nNode originNode = Cypher.node(originType)\r\n    .named(&quot;origin&quot;)\r\n    .withProperties(VisibilityGroup.ENTITY_ID_PROPERTY,\r\n            Cypher.literalOf(originEntityId.toString()));\r\nRelationship relationship = useContains ?\r\n    targetNode.relationshipTo(originNode, VisibilityGroup.CAN_SEE_REL_TYPE, VisibilityGroup.CONTAINS_REL_TYPE).unbounded() :\r\n    targetNode.relationshipTo(originNode, VisibilityGroup.CAN_SEE_REL_TYPE).unbounded();\r\n\r\nSymbolicName permissionVariable = Cypher.name(&quot;p&quot;);\r\n\r\n// Needed individually for collection\r\n\r\nCondition condition = Conditions.noCondition();\r\n// Build your where clause…\r\ncondition = condition.and(permissionVariable.isTrue());\r\n\r\nResultStatement statement;\r\nif(useContains) {\r\n    NamedPath p = Cypher.path(&quot;path&quot;).definedBy(relationship);\r\n    statement = Cypher.match(targetNode, p)\r\n            .where(condition)\r\n            .returning(targetNode.getRequiredSymbolicName(), Functions.relationships(p).as(&quot;r&quot;), Functions.nodes(p).as(&quot;o&quot;))\r\n            .build();\r\n} else {\r\n    Relationship canSee = targetNode.relationshipTo(originNode, VisibilityGroup.CAN_SEE_REL_TYPE).named(&quot;canSee&quot;);\r\n    Relationship contains = targetNode.relationshipTo(originNode, VisibilityGroup.CONTAINS_REL_TYPE).named(&quot;contains&quot;);\r\n    statement = Cypher.match(relationship)\r\n            .where(condition)\r\n            .with(originNode, targetNode)\r\n            .match(canSee, contains)\r\n            .returningDistinct(targetNode.getRequiredSymbolicName(), Functions.collect(canSee).add(Functions.collect(contains)).as(&quot;r&quot;), Functions.collect(originNode).as(&quot;o&quot;))\r\n            .build();\r\n}\r\n```\r\n\r\nThe condition of course leads to invalid cypher with this, as `p` is undefined, but I guess the idea is clear.\r\n\r\nThis would generate something like this when using the `CONTAINS` relationship\r\n\r\n```cypher\r\nMATCH (target:target {entityId: &#39;dcfb30c2-8a09-41d2-ba35-d1199f25ed69&#39;}), path = (target)-[:CAN_SEE|CONTAINS*]-&gt;(origin:origin {entityId: &#39;e8a41c34-a2b0-479b-8b34-40bc1b6d0656&#39;})\r\nWHERE p = true\r\nRETURN target, relationships(path) AS r, nodes(path) AS o\r\n```\r\n\r\nin which you can use the fact that you already are matching all of the types\r\n\r\nor when not using it, something like this\r\n\r\n```cypher\r\nMATCH (target:target {entityId: &#39;7cb5cd5e-c8b1-48f7-8e5f-aad70ab19d15&#39;})-[:CAN_SEE*]-&gt;(origin:origin {entityId: &#39;66530792-5704-4732-98be-aea6b64b5fb6&#39;})\r\nWHERE p = true\r\nWITH origin, target\r\nMATCH (target)-[canSee:CAN_SEE]-&gt;(origin), (target)-[contains:CONTAINS]-&gt;(origin)\r\nRETURN DISTINCT target, (collect(canSee) + collect(contains)) AS r, collect(origin) AS o\r\n```\r\n\r\nPlease test the optimisation, I am not sure if always all relationships are contained when using the `|` or operator from the top of my head.\r\n\r\n  [1]: https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#custom-queries.for-relationships.one.record\r\n  [2]: https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#sdn-mixins.using-cypher-dsl-statements\r\n  [3]: https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#faq.custom-queries-and-custom-mappings\r\n\r\n","link":"https://stackoverflow.com/questions/75853429/cypherdsl-reactivecypherdslstatementexecutor-findone-not-working-properly/75855353#75855353","title":"CypherDSL, ReactiveCypherdslStatementExecutor.findOne() not working properly"}],"owner":{"reputation":457,"user_id":3022586,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/402cc8ea9c0f928e6cd95ee4a631392b?s=256&d=identicon&r=PG","display_name":"CptWasp","link":"https://stackoverflow.com/users/3022586/cptwasp"},"last_editor":{"reputation":457,"user_id":3022586,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/402cc8ea9c0f928e6cd95ee4a631392b?s=256&d=identicon&r=PG","display_name":"CptWasp","link":"https://stackoverflow.com/users/3022586/cptwasp"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679992849,"creation_date":1679904413,"last_edit_date":1679992849,"question_id":75853429,"share_link":"https://stackoverflow.com/q/75853429","body_markdown":"I&#39;m using CypherDSL to retrieve a specific node from Neo4j; but the returned entity is missing its @Relationship attributes. The entity is something like:\r\n\r\n```java\r\n    @Node\r\n    @Builder\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @EqualsAndHashCode(exclude = {&quot;children&quot;, &quot;visibleEntities&quot;})\r\n    @ToString(exclude = {&quot;children&quot;, &quot;visibleEntities&quot;})\r\n    public class VisibilityGroup {\r\n    \r\n        public static final String CAN_SEE_REL_TYPE =&quot;CAN_SEE&quot;;\r\n        public static final String CONTAINS_REL_TYPE =&quot;CONTAINS&quot;;\r\n    \r\n        public static final String ENTITY_ID_PROPERTY= &quot;entityId&quot;;\r\n    \r\n    \r\n        @DynamicLabels\r\n        @Singular(ignoreNullCollections = true)\r\n        private List&lt;String&gt; labels;\r\n    \r\n        @Property(&quot;name&quot;)\r\n        private String nodeName;\r\n    \r\n        @Property(ENTITY_ID_PROPERTY)\r\n        private UUID entityId;\r\n    \r\n        @Id\r\n        @GeneratedValue(generatorClass = UUIDStringGenerator.class)\r\n        private String id;\r\n    \r\n        @Relationship(type = CONTAINS_REL_TYPE, direction = Relationship.Direction.OUTGOING)\r\n        @Builder.Default\r\n        private Set&lt;VisibilityGroupRelationship&gt; children = new HashSet&lt;&gt;();\r\n    \r\n        @Relationship(type = CAN_SEE_REL_TYPE, direction = Relationship.Direction.OUTGOING)\r\n        @Builder.Default\r\n        private Set&lt;VisibilityGroupRelationship&gt; visibleEntities = new HashSet&lt;&gt;();\r\n    \r\n        ........\r\n    }\r\n\r\n```\r\n\r\n&gt; Now: **if I use ReactiveCrudRepository.findById(ID id) the object has\r\n&gt; children and visibleEntities correctly initialized**, but if I get it\r\n&gt; using CypherDSL they are both null.\r\n\r\nHere my repo code:\r\n\r\n```java\r\n\r\n    default Mono&lt;VisibilityGroup&gt; findEntity(UUID originEntityId, String originType,\r\n                                             UUID targetEntityId, String targetType,\r\n                                             boolean useContains){\r\n \r\n  \r\n            Node targetNode = Cypher.node(targetType)\r\n                .named(&quot;target&quot;)\r\n                .withProperties(VisibilityGroup.ENTITY_ID_PROPERTY,\r\n                    Cypher.literalOf(targetEntityId.toString()));\r\n            Node originNode = Cypher.node(originType)\r\n                .named(&quot;origin&quot;)\r\n                .withProperties(VisibilityGroup.ENTITY_ID_PROPERTY,\r\n                    Cypher.literalOf(originEntityId.toString()));\r\n            Relationship relationship = useContains ?\r\n                originNode.relationshipTo(targetNode, VisibilityGroup.CAN_SEE_REL_TYPE,\r\n                    VisibilityGroup.CONTAINS_REL_TYPE).unbounded() :\r\n                originNode.relationshipTo(targetNode, VisibilityGroup.CAN_SEE_REL_TYPE).unbounded();\r\n            SymbolicName permissionVariable = Cypher.name(&quot;p&quot;);\r\n            ResultStatement statement = Cypher.match(relationship)\r\n                .where(....)\r\n                .returningDistinct(targetNode).build();\r\n            return findOne(statement);\r\n        }\r\n\r\n```\r\n\r\nI know, I can easily fix it replacing the last line with:\r\n\r\n```java\r\n\r\n      return findOne(statement).flatMap(visibilityGroup -&gt; findById(visibilityGroup.getId()));\r\n\r\n```\r\n\r\nbut I would like to know if this is normal, or if I&#39;m misusing CypherDSL.\r\nThank you  in advance.\r\n\r\nUPDATE\r\n\r\nI add a textual description of the model and of the intended result. All nodes are bound together with &quot;CAN_SEE&quot; or &quot;CONTAINS&quot; relations, defining a visibility graph. Only admins can &quot;see&quot; through CONTAINS relations; all users can see through &quot;CAN_SEE&quot; relations. The proposed repository method discovers if the origin node (a user, normally) CAN_SEE* (or CAN_SEE|CONTAINS*) the target node, and this works just well. The returned node is the requested target node, if visible. What I need is that the returned target node contains ITS neighbors as attributes: \r\n\r\n1) what nodes are DIRECTLY (1 hop) bound to target node with a CAN_SEE relationship, in the visibleEntities attribute; \r\n\r\n2) what nodes are DIRECTLY (1 hop) bound to him with a CONTAINS relationship, in the children attribute.","link":"https://stackoverflow.com/questions/75853429/cypherdsl-reactivecypherdslstatementexecutor-findone-not-working-properly","title":"CypherDSL, ReactiveCypherdslStatementExecutor.findOne() not working properly"},{"tags":["neo4j","neo4j-desktop"],"owner":{"reputation":11,"user_id":12110704,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mBBmiNI3dNyQRhsLWHOhhmK5owR6E5zu8ePQTlH=k-s256","display_name":"JC Chen","link":"https://stackoverflow.com/users/12110704/jc-chen"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679897610,"creation_date":1679897610,"question_id":75852595,"share_link":"https://stackoverflow.com/q/75852595","body_markdown":"So I have both the community server and the desktop app installed. The community server is installed (unzipped) in:  \r\n```\r\n&#39;C:\\DevTools\\neo4j-community-5.5.0&#39;;\r\n```  \r\nAnd the desktop app is installed in the default folder and has the internal DBs in the default path too:  \r\n```\r\n&#39;C:\\Users\\xxx.Neo4jDesktop\\relate-data\\dbmss\\xxxxxxxx&#39;\r\n```  \r\n\r\nWhen I try to start any DB via the desktop app, it always starts the community server rather than its built-in DB. It is clear via the log:  \r\n\r\n```\r\nDirectories in use:\r\nhome: C:\\DevTools\\neo4j-community-5.5.0\r\nconfig: C:\\DevTools\\neo4j-community-5.5.0\\conf\r\nlogs: C:\\DevTools\\neo4j-community-5.5.0\\logs\r\nplugins: C:\\DevTools\\neo4j-community-5.5.0\\plugins\r\nimport: C:\\DevTools\\neo4j-community-5.5.0\\import\r\ndata: C:\\DevTools\\neo4j-community-5.5.0\\data\r\ncertificates: C:\\DevTools\\neo4j-community-5.5.0\\certificates\r\nlicenses: C:\\DevTools\\neo4j-community-5.5.0\\licenses\r\nrun: C:\\DevTools\\neo4j-community-5.5.0\\run\r\nStarting Neo4j.\r\n```\r\n\r\nWhen I try to create and start a new DB, while the new DB is indeed created in the default path (i.e. ```&#39;.Neo4jDesktop\\relate-data\\dbmss\\xxxxxxxx&#39;```), it actually starts the same (old) one in the community server.\r\n\r\nI tried to delete/uninstall both the server and the desktop app, and reinstall desktop app, but it didn&#39;t work. In fact, the desktop app cannot start any DB until I reinstall the community server to the old directory.\r\n\r\nDoes anyone know what causes this problem, and how do I fix it?","link":"https://stackoverflow.com/questions/75852595/problem-when-using-neo4j-desktops-built-in-dbs","title":"Problem when using Neo4j Desktop&#39;s built-in DBs"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679941804,"creation_date":1679941804,"answer_id":75859185,"question_id":75852340,"share_link":"https://stackoverflow.com/a/75859185","body_markdown":"Neo4j tools like `neo4j-admin` can only access files that are owned by the `neo4j` user. Your dump file is probably owned by some other user.\r\n\r\nTry changing the file ownership by using a command like this (where `/backup/neo4j.dump` is the path to your dump file):\r\n\r\n    sudo chown neo4j:neo4j /backup/neo4j.dump","link":"https://stackoverflow.com/questions/75852340/neo4j-community-version-upgrade-failed-from-4-3-x-to-5-x/75859185#75859185","title":"Neo4j -community version upgrade failed from 4.3.x to 5.x"}],"owner":{"reputation":109,"user_id":2579014,"user_type":"registered","profile_image":"https://graph.facebook.com/100000739887878/picture?type=large","display_name":"Mahesh Jayachandran","link":"https://stackoverflow.com/users/2579014/mahesh-jayachandran"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679941898,"creation_date":1679894611,"last_edit_date":1679941898,"question_id":75852340,"share_link":"https://stackoverflow.com/q/75852340","body_markdown":"In the docker environment, I am upgrading the neo4j version from 4.3 to 5.x.\r\n\r\nAs part of the upgrade am loading a backup dump using the below command but it failed with the below exception.\r\n\r\n**Command**\r\n\r\n    /var/lib/neo4j/bin# neo4j-admin database load --from-path=/backups  neo4j --overwrite-destination --verbose\r\n\r\n**Logs**\r\n\r\n    Executing command line: /opt/java/openjdk/bin/java -cp /var/lib/neo4j/plugins/*:/var/lib/neo4j/conf/*:/var/lib/neo4j/lib/* -XX:+UseParallelGC -XX:-OmitStackTraceInFastThrow -XX:+UnlockExperimentalVMOptions -XX:+TrustFinalNonStaticFields -XX:+DisableExplicitGC -Djdk.nio.maxCachedBufferSize=1024 -Dio.netty.tryReflectionSetAccessible=true -XX:+ExitOnOutOfMemoryError -Djdk.tls.ephemeralDHKeySize=2048 -XX:FlightRecorderOptions=stackdepth=256 -XX:+UnlockDiagnosticVMOptions -XX:+DebugNonSafepoints --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED -Dlog4j2.disable.jmx=true -Dfile.encoding=UTF-8 -Xmx2097152k org.neo4j.cli.AdminTool database load --from-path=/backups neo4j --overwrite-destination --verbose\r\n    neo4j 5.5.0\r\n    VM Name: OpenJDK 64-Bit Server VM\r\n    VM Vendor: Eclipse Adoptium\r\n    VM Version: 17.0.6+10\r\n    JIT compiler: HotSpot 64-Bit Tiered Compilers\r\n    VM Arguments: [-XX:+UseParallelGC, -XX:-OmitStackTraceInFastThrow, -XX:+UnlockExperimentalVMOptions, -XX:+TrustFinalNonStaticFields, -XX:+DisableExplicitGC, -Djdk.nio.maxCachedBufferSize=1024, -Dio.netty.tryReflectionSetAccessible=true, -XX:+ExitOnOutOfMemoryError, -Djdk.tls.ephemeralDHKeySize=2048, -XX:FlightRecorderOptions=stackdepth=256, -XX:+UnlockDiagnosticVMOptions, -XX:+DebugNonSafepoints, --add-opens=java.base/java.nio=ALL-UNNAMED, --add-opens=java.base/java.io=ALL-UNNAMED, --add-opens=java.base/sun.nio.ch=ALL-UNNAMED, -Dlog4j2.disable.jmx=true, -Dfile.encoding=UTF-8, -Xmx2097152k]\r\n    Configuration files used (ordered by priority):\r\n    /var/lib/neo4j/conf/neo4j-admin.conf\r\n    /var/lib/neo4j/conf/neo4j.conf\r\n    --------------------\r\n    Done: 53 files, 251.4MiB processed.\r\n    Failed to load database &#39;neo4j&#39;: Can not read store version of database neo4jLoad failed for databases: &#39;neo4j&#39;\r\n    org.neo4j.cli.CommandFailedException: Load failed for databases: &#39;neo4j&#39;\r\n            at org.neo4j.commandline.dbms.LoadCommand.checkFailure(LoadCommand.java:219)\r\n            at org.neo4j.commandline.dbms.LoadCommand.loadDump(LoadCommand.java:207)\r\n            at org.neo4j.commandline.dbms.LoadCommand.execute(LoadCommand.java:150)\r\n            at org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:92)\r\n            at org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:37)\r\n            at picocli.CommandLine.executeUserObject(CommandLine.java:2041)\r\n            at picocli.CommandLine.access$1500(CommandLine.java:148)\r\n            at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2461)\r\n            at picocli.CommandLine$RunLast.handle(CommandLine.java:2453)\r\n            at picocli.CommandLine$RunLast.handle(CommandLine.java:2415)\r\n            at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2273)\r\n            at picocli.CommandLine$RunLast.execute(CommandLine.java:2417)\r\n            at picocli.CommandLine.execute(CommandLine.java:2170)\r\n            at org.neo4j.cli.AdminTool.execute(AdminTool.java:94)\r\n            at org.neo4j.cli.AdminTool.main(AdminTool.java:82)\r\n    Caused by: java.lang.IllegalStateException: Can not read store version of database neo4j\r\n            at org.neo4j.commandline.dbms.StoreVersionLoader.loadStoreVersion(StoreVersionLoader.java:88)\r\n            at org.neo4j.dbms.archive.Loader.getStoreVersion(Loader.java:131)\r\n            at org.neo4j.commandline.dbms.LoadDumpExecutor.execute(LoadDumpExecutor.java:84)\r\n            at org.neo4j.commandline.dbms.LoadCommand.loadDump(LoadCommand.java:197)\r\n            ... 13 more","link":"https://stackoverflow.com/questions/75852340/neo4j-community-version-upgrade-failed-from-4-3-x-to-5-x","title":"Neo4j -community version upgrade failed from 4.3.x to 5.x"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679865132,"creation_date":1679865132,"answer_id":75850587,"question_id":75847928,"share_link":"https://stackoverflow.com/a/75850587","body_markdown":"You are specifying an empty RDBMS password:\r\n\r\n    --rdbms:password &quot;&quot;\r\n\r\nYou should specify the actual password instead.","link":"https://stackoverflow.com/questions/75847928/nullpointerexception-in-neo4j-etl-tool/75850587#75850587","title":"NullPointerException in Neo4j ETL tool"}],"owner":{"reputation":1,"user_id":21494251,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AGNmyxb8DT9oXSlzeIxbjpo0W7OKBMPiroRFkgQCqUKR=k-s256","display_name":"Devansh Maru","link":"https://stackoverflow.com/users/21494251/devansh-maru"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679865253,"creation_date":1679836002,"last_edit_date":1679865253,"question_id":75847928,"share_link":"https://stackoverflow.com/q/75847928","body_markdown":"I want migrate my MySQL database to neo4j. When I try to import the data into a neo4j DB with the help of the neo4j ETL tool:\r\n\r\n    java -cp &quot;C:\\Users\\ADMIN.Neo4jDesktop\\graphApps_global\\neo4j-etl-ui/dist/neo4j-etl.jar&quot; org.neo4j.etl.NeoIntegrationCli export --mapping-file &quot;C:\\Users\\ADMIN\\AppData\\Local\\Temp/mysql_testdb_testdb_mapping.json&quot;\r\n      --rdbms:password &quot;&quot; --rdbms:user &quot;root&quot; --rdbms:url &quot;jdbc:mysql://localhost:3306/testdb?autoReconnect=true&amp;useSSL=false&amp;useCursorFetch=true&amp;allowPublicKeyRetrieval=true&quot;\r\n      --options-file &quot;C:\\Users\\ADMIN\\AppData\\Local\\Temp/import-tool-options.json&quot; --using &quot;cypher:fromSQL&quot; --unwind-batch-size 1000 --tx-batch-size 10000\r\n      --neo4j:database-name ecomm --neo4j:url &quot;bolt://localhost:7687&quot; --neo4j:user &quot;neo4j&quot; --neo4j:password &quot;123&quot;\r\n\r\nI get this error:\r\n\r\n    Illegal command (NullPointerException: Cannot invoke &quot;java.lang.Boolean.booleanValue()&quot; because &quot;this.debug&quot; is null)\r\n\r\nCan anyone suggest how to resolve this issue?","link":"https://stackoverflow.com/questions/75847928/nullpointerexception-in-neo4j-etl-tool","title":"NullPointerException in Neo4j ETL tool"},{"tags":["neo4j","graph-databases","arangodb","memgraphdb","redisgraph"],"owner":{"reputation":19,"user_id":16031226,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14GgtYSHpndtSqGZ9KPg_EIztLrjMABrbOyI6nr3flgY=k-s256","display_name":"Dushyant Aneja","link":"https://stackoverflow.com/users/16031226/dushyant-aneja"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":0,"score":-1,"last_activity_date":1679867024,"creation_date":1679814743,"last_edit_date":1679867024,"question_id":75846358,"share_link":"https://stackoverflow.com/q/75846358","body_markdown":"How do we start designing a graph DB model with respect to a given dataset or project?\r\n\r\nFor example, in RDBMS we usually go for entity relationship diagrams, then make a schema for it, and then finally convert it to tables. So similarly, what is the process for making the GRAPH DB for a respective project?\r\n\r\nWhat are the key points and the characteristics that need to be taken care at the time of making graph db?\r\n\r\nAny assistance you can provide would be greatly appreciated.","link":"https://stackoverflow.com/questions/75846358/need-to-know-how-to-start-designing-a-graph-database-model","title":"Need to know how to start designing a Graph Database model"},{"tags":["neo4j","uuid","neo4j-apoc"],"answers":[{"tags":[],"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679761787,"creation_date":1679761787,"answer_id":75843057,"question_id":75841317,"share_link":"https://stackoverflow.com/a/75843057","body_markdown":"It might be confusing, but APOC was split into core and extended version. The `apoc.create.uuid` is in core edition, but the `apoc.uuid.install` is in extended. Make sure to add both JARs into the plugin folder. You can find the extended version for Neo4j 5.3 here -&gt; https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases/tag/5.3.1","link":"https://stackoverflow.com/questions/75841317/apoc-uuid-install-not-registered-for-this-database-instance/75843057#75843057","title":"apoc.uuid.install not registered for this database instance"}],"owner":{"reputation":137,"user_id":16823308,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AATXAJy5omK_JIK5GBUByQJ1BeUMO0cedb8HiTNeMpWn=k-s256","display_name":"Itamarled","link":"https://stackoverflow.com/users/16823308/itamarled"},"last_editor":{"reputation":137,"user_id":16823308,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AATXAJy5omK_JIK5GBUByQJ1BeUMO0cedb8HiTNeMpWn=k-s256","display_name":"Itamarled","link":"https://stackoverflow.com/users/16823308/itamarled"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75843057,"answer_count":1,"score":2,"last_activity_date":1679761787,"creation_date":1679742850,"last_edit_date":1679743199,"question_id":75841317,"share_link":"https://stackoverflow.com/q/75841317","body_markdown":"I&#39;ve installed the apoc plugin using neo4j desktop, according to those instructions: https://neo4j.com/labs/apoc/4.1/installation/#:~:text=APOC%20Full%20can%20be%20installed,see%20the%20%22Installed%22%20message.\r\n\r\nI&#39;ve created a new apoc.conf file in the conf folder (where the neo4j.conf is located) and added the line: `apoc.uuid.enabled=true` and saved.\r\nI stopped my db and then restarted it.\r\nalso in the neo4j.conf file I have this line to enable procedures for apoc:\r\ndbms.security.procedures.unrestricted=jwt.security.*,apoc.*\r\n\r\nalso have this in the conf file:\r\n#dbms.security.procedures.allowlist=apoc.coll.*,apoc.load.*,gds.*\r\n\r\nwhen I run `RETURN apoc.create.uuid() AS uuid`;\r\nI get a valid response.\r\n\r\nalso my neo4j version is 5.3, identical to the version I get when i ran: `RETURN apoc.version() AS output`;\r\n\r\nbut when I try to run: `CALL apoc.uuid.install(&#39;Person&#39;)`\r\nYIELD label, installed, properties\r\nRETURN label, installed, properties;\r\nI get: \r\n`There is no procedure with the name apoc.uuid.install registered for this database instance. Please ensure you&#39;ve spelled the procedure name correctly and that the procedure is properly deployed.`\r\n\r\n\r\nMy goal is to create a uuid for every node created with the label Person, so I tried to run the query as it is in the actual [documentation][1] but the procedure is not recognized. \r\n \r\n\r\n\r\n  [1]: https://neo4j.com/labs/apoc/4.1/graph-updates/uuid/","link":"https://stackoverflow.com/questions/75841317/apoc-uuid-install-not-registered-for-this-database-instance","title":"apoc.uuid.install not registered for this database instance"},{"tags":["neo4j","graphql","cypher","apollo-federation"],"answers":[{"comments":[{"owner":{"reputation":829,"user_id":6074455,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/9535da1e462730fa6a168e2b74ec2b16?s=256&d=identicon&r=PG&f=1","display_name":"MichaelE","link":"https://stackoverflow.com/users/6074455/michaele"},"edited":false,"score":0,"creation_date":1681329996,"post_id":75982934,"comment_id":134040882,"link":"https://stackoverflow.com/questions/75835747/how-to-use-neo4j-graphql-in-conjunction-with-nestjs-neo4j-to-access-the-neo4j-sc/75982934#comment134040882_75982934"}],"tags":[],"owner":{"reputation":144,"user_id":10657968,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-kOHMb9mzSxA/AAAAAAAAAAI/AAAAAAAAALE/XjybBHBLacQ/photo.jpg?sz=256","display_name":"Thomas Wiss","link":"https://stackoverflow.com/users/10657968/thomas-wiss"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681194128,"creation_date":1681194128,"answer_id":75982934,"question_id":75835747,"share_link":"https://stackoverflow.com/a/75982934","body_markdown":"The `@neo4j/graphql` library allows you to write your own cypher queries, see the `@cypher` directive in the [docs][1]. You may browse the docs to see all the capabilities the lib has to offer. Maybe this helps you to make a decision as I&#39;m not familiar with `neo4jService` from `nestjs-neo4j`.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/graphql-manual/current/type-definitions/cypher/","link":"https://stackoverflow.com/questions/75835747/how-to-use-neo4j-graphql-in-conjunction-with-nestjs-neo4j-to-access-the-neo4j-sc/75982934#75982934","title":"how to use neo4j/graphql in conjunction with nestjs-neo4j to access the neo4j schema directives"}],"owner":{"reputation":829,"user_id":6074455,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/9535da1e462730fa6a168e2b74ec2b16?s=256&d=identicon&r=PG&f=1","display_name":"MichaelE","link":"https://stackoverflow.com/users/6074455/michaele"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681194128,"creation_date":1679673106,"last_edit_date":1679675899,"question_id":75835747,"share_link":"https://stackoverflow.com/q/75835747","body_markdown":"I am using:\r\n- `nestjs` v9\r\n- `neo4j` v4.5\r\n- `neo4j/graphql` v3\r\n- `apollo server` v4 w/federation\r\n\r\n\r\n- `neo4jService` from `nestjs-neo4j`\r\n\r\nto create a `neo4jGraphqlService` that uses `neo4jService` for most `neo4j` DB interactions.\r\n\r\nBut I also want to use the `neo4j/graphql` library to access schema directives such as @relationship, @deprecated, etc.\r\n\r\nIs this a bad practice? Should I stick to one library? I want the flexibility of creating my own Cypher queries but I also like the convenience of the `neo4j/graphql` doing some of the work. I hope I don&#39;t need to show code for this question as it&#39;s a question of best practice.","link":"https://stackoverflow.com/questions/75835747/how-to-use-neo4j-graphql-in-conjunction-with-nestjs-neo4j-to-access-the-neo4j-sc","title":"how to use neo4j/graphql in conjunction with nestjs-neo4j to access the neo4j schema directives"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679688197,"creation_date":1679688197,"answer_id":75837735,"question_id":75831520,"share_link":"https://stackoverflow.com/a/75837735","body_markdown":"[Neo4j transaction log](https://neo4j.com/docs/operations-manual/current/configuration/transaction-logs/) files are not intended to be humanly readable.\r\n\r\nInstead, transaction log files are *data files* used by the neo4j server to keep track of write operations so that after a server crash the database state can be recovered.","link":"https://stackoverflow.com/questions/75831520/how-to-view-the-content-of-neo4js-transaction-log-in-text-format/75837735#75837735","title":"How to view the content of neo4j&#39;s transaction log in text format?"}],"owner":{"reputation":1,"user_id":13751050,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-UNQuty3Mnms/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuclyFWnn2SzMWf9Uv59fwCKkJIsowA/photo.jpg?sz=256","display_name":"millions rich","link":"https://stackoverflow.com/users/13751050/millions-rich"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679688197,"creation_date":1679647190,"last_edit_date":1679687594,"question_id":75831520,"share_link":"https://stackoverflow.com/q/75831520","body_markdown":"Neo4j&#39;s transaction log files (neostore.transaction.db.*) are in binary format. What tool or method should I use to see the neo4j transaction logs in text format?\r\n\r\n![enter image description here](https://i.stack.imgur.com/wbS1Z.png)","link":"https://stackoverflow.com/questions/75831520/how-to-view-the-content-of-neo4js-transaction-log-in-text-format","title":"How to view the content of neo4j&#39;s transaction log in text format?"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679610290,"post_id":75828050,"comment_id":133757213,"link":"https://stackoverflow.com/questions/75828050/cypher-query-to-verify-all-items-in-an-ordered-list-are-represented-in-order-by#comment133757213_75828050"},{"owner":{"reputation":1307,"user_id":141635,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/3e2caab8a53044bc8b5c431b4dcacd77?s=256&d=identicon&r=PG","display_name":"pomeroy","link":"https://stackoverflow.com/users/141635/pomeroy"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679631142,"post_id":75828050,"comment_id":133759567,"link":"https://stackoverflow.com/questions/75828050/cypher-query-to-verify-all-items-in-an-ordered-list-are-represented-in-order-by#comment133759567_75828050"}],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679615470,"last_edit_date":1679615470,"creation_date":1679615003,"answer_id":75828886,"question_id":75828050,"share_link":"https://stackoverflow.com/a/75828886","body_markdown":"Assuming that you pass this `$path` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/#cypher-parameters-node-id), and that the last element in the path is a file:\r\n\r\n    &quot;/foo/bar/baz.txt&quot;\r\n\r\nAnd assuming that your data looks like this:\r\n\r\n    (:Folder {Name: &#39;/&#39;})&lt;-[:IS_IN]-\r\n      (:Folder {Name: &#39;foo&#39;})&lt;-[:IS_IN]-\r\n        (:Folder {Name: &#39;bar&#39;})&lt;-[:IS_IN]-\r\n          (:File {Name: &#39;baz.txt&#39;})\r\n\r\nThis should work:\r\n\r\n    WITH SPLIT($path, &#39;/&#39;) AS p\r\n    WITH REVERSE(CASE WHEN p[0] = &#39;&#39; THEN [&#39;/&#39;]+p[1..] ELSE p END) AS names\r\n    OPTIONAL MATCH (file:File {Name: names[0]})\r\n    RETURN REDUCE(s=file, n IN names[1..] |\r\n      CASE WHEN s IS NOT NULL THEN [(s)-[:IS_IN]-&gt;(f1 {Name: n})|f1][0] END\r\n    ) IS NOT NULL AS found\r\n\r\nThe query will return whether the path in `$path` is found.\r\n\r\nIt breaks up the $path string into an array of folder and file names, reverses it, and then [optionally matches](https://neo4j.com/docs/cypher-manual/current/clauses/optional-match/) the file node. We use an OPTIONAL MATCH so that the query always returns a value, even when the file is not found. Then we use the [REDUCE](https://neo4j.com/docs/cypher-manual/current/functions/list/#functions-reduce) function to loop through the remaining folders in the path to verify that each needed relationship exists. We use a [pattern comprehension](https://neo4j.com/docs/cypher-manual/current/syntax/lists/#cypher-pattern-comprehension) to perform matches within the loop.","link":"https://stackoverflow.com/questions/75828050/cypher-query-to-verify-all-items-in-an-ordered-list-are-represented-in-order-by/75828886#75828886","title":"Cypher query to verify all items in an ordered list are represented in order by a nodes in the graph with specified relationship"}],"owner":{"reputation":1307,"user_id":141635,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/3e2caab8a53044bc8b5c431b4dcacd77?s=256&d=identicon&r=PG","display_name":"pomeroy","link":"https://stackoverflow.com/users/141635/pomeroy"},"last_editor":{"reputation":1307,"user_id":141635,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/3e2caab8a53044bc8b5c431b4dcacd77?s=256&d=identicon&r=PG","display_name":"pomeroy","link":"https://stackoverflow.com/users/141635/pomeroy"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75828886,"answer_count":1,"score":0,"last_activity_date":1679685461,"creation_date":1679606097,"last_edit_date":1679685461,"question_id":75828050,"share_link":"https://stackoverflow.com/q/75828050","body_markdown":"I am modeling a simple file system, with folders and files. \r\n\r\n    (:Folder)&lt;-[:IS_IN *]-(:Folder)&lt;-[:IS_IN]-(:File)\r\n\r\nA user can give me an arbitrary path, `/foo/bar/baz.txt`. In this case the graph would look like:\r\n\r\n    (:Folder {Name: &#39;/&#39;})&lt;-[:IS_IN]-(:Folder {Name: &#39;Foo&#39;})&lt;-[:IS_IN]-(:Folder {Name: &#39;bar&#39;})&lt;-[:IS_IN]-(:File {Name: &#39;baz.txt&#39;})\r\n\r\nWithout knowing how long the path a user will supply, is there a good way to query whether a given path is represented in the graph? If I split path into an ordered list of folder names, can I write a query that returns the nodes if and only if they exist in the same order as the list?\r\n\r\nNaively I can dynamically generate a query with each node, but I&#39;d rather not generate dynamic queries.","link":"https://stackoverflow.com/questions/75828050/cypher-query-to-verify-all-items-in-an-ordered-list-are-represented-in-order-by","title":"Cypher query to verify all items in an ordered list are represented in order by a nodes in the graph with specified relationship"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1679573500,"post_id":75822349,"comment_id":133747558,"link":"https://stackoverflow.com/questions/75822349/graph-database-using-neo4j#comment133747558_75822349"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679595905,"post_id":75822349,"comment_id":133754131,"link":"https://stackoverflow.com/questions/75822349/graph-database-using-neo4j#comment133754131_75822349"},{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1680711695,"post_id":75822349,"comment_id":133945797,"link":"https://stackoverflow.com/questions/75822349/graph-database-using-neo4j#comment133945797_75822349"}],"owner":{"reputation":1,"user_id":21462799,"user_type":"registered","profile_image":"https://graph.facebook.com/6424593034240360/picture?type=large","display_name":"Ufomba Prince","link":"https://stackoverflow.com/users/21462799/ufomba-prince"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":3,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679592227,"creation_date":1679570448,"last_edit_date":1679592227,"question_id":75822349,"share_link":"https://stackoverflow.com/q/75822349","body_markdown":"[csv dataset of epl league 2000-2110](https://i.stack.imgur.com/rjPrC.png)\r\n\r\nCan I get help writing the following Cypher query?\r\n\r\n    1) List all teams that have ever played EPL matches since 2000.\r\n    2) Display all matches “Liverpool” won against “Man United” since 2010. \r\n    3) Display the top five referees and the number of matches they refereed since 2000. \r\n    4) Display all teams and the total number of goals they scored and conceded in the 2020/21 season;\r\n    5) Which team had the best home-winning record since 2000. \r\n    6) Which team lost the most matches in the 2020/21 season?\r\n    7) Which teams lost the 1st half but won the match in the 2020/21 season? ***\r\n    8) Which team earned the highest-ever points in all seasons since 2000? \r\n    9) Display the final league table ranking of all teams in the 2020/21 season (based on the total points).\r\n    10) Which team had the longest unbeaten record;\r\n\r\n\t\r\n\r\nI have tried the following codes for questions 2 and 3 respectively\r\n\r\n    MATCH (l:Team)-[:PLAYED_AWAY]-&gt;(m:Match)&lt;-[:PLAYED_HOME]-(u:Team)\r\n    WHERE l.name = &#39;Liverpool&#39; AND u.name = &#39;Man United&#39; AND l.ftr &gt; u.ftr AND m.season &gt;= &#39;2000-01&#39;\r\n    RETURN m.season, l.name, l.ftr, u.name, u.ftr\r\n\r\n    MATCH (ref:Referee)-[:REFEREED_BY]-&gt;(m:Match)\r\n    WHERE m.datetime &gt;= datetime(&#39;2000-08-19T00:00:00Z&#39;) \r\n    WITH ref, count(ref) as Referee\r\n    ORDER BY Referee DESC\r\n    LIMIT 5\r\n    RETURN ref.name as Referees, Referee\r\n\r\n","link":"https://stackoverflow.com/questions/75822349/graph-database-using-neo4j","title":"graph database using neo4j"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1679573851,"post_id":75822065,"comment_id":133747658,"link":"https://stackoverflow.com/questions/75822065/neo4j-recommendations-for-multiple-nodes#comment133747658_75822065"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679592131,"post_id":75822065,"comment_id":133753164,"link":"https://stackoverflow.com/questions/75822065/neo4j-recommendations-for-multiple-nodes#comment133753164_75822065"}],"owner":{"reputation":11,"user_id":15787283,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14Gg21KNwMzLQgy8lQocNmVSDZwIxj-LdNftww1Of7Q=k-s256","display_name":"DubiousTunic","link":"https://stackoverflow.com/users/15787283/dubioustunic"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1679628685,"creation_date":1679568688,"last_edit_date":1679628685,"question_id":75822065,"share_link":"https://stackoverflow.com/q/75822065","body_markdown":"I am following the recommendation engine instructions from the neo4j website. Now I think I have to modify it, for I have up to 6 nodes that I want to make a recommendation for, based on how they all connect. In short there are up to 6 &quot;research tabs&quot; that are opened, and I want to make a recommendation based on the source most connected to the 6 nodes.\r\n\r\nHere&#39;s my current code, I don&#39;t think it works as expected:\r\n\r\n    MATCH (t:Torrent) WHERE t.infoHash IN $infoHashes\r\n\tMATCH (t)&lt;-[:DIST_AS]-(e:Edition)&lt;-[:PUB_AS]-(s:Source)\r\n\tMATCH (s)&lt;-[:TAGS]-(c1:Class)-[:TAGS]-&gt;(coSource:Source)&lt;-[:TAGS]-(c2:Class)-[:TAGS]-&gt;(coCoSource:Source)\r\n\tWHERE s &lt;&gt; coCoSource\r\n\tWITH coCoSource\r\n\tMATCH (t1:Torrent)&lt;-[:DIST_AS]-(e1:Edition)&lt;-[:PUB_AS]-(coCoSource)\r\n\tRETURN t1, coCoSource.title\r\n\tORDER BY t1.snatches DESC\r\n\tLIMIT 1\r\n\r\nMy data model is:\r\n\r\n    (:Torrent)&lt;-[:DIST_AS]-(:Edition)&lt;-[:PUB_AS]-(:Source)&lt;-[:TAGS]-(:Class)\r\n\r\nSome sample data would be \r\n```\r\n:params {infoHashes: [&quot;c0efbf6cd84e90718ad2e76d4d7b20902a1ef15c&quot;, &quot;09613cd9f5e09f126b5e07b7913ed91f92f1419b&quot;]\r\n\r\nCREATE (t1:Torrent {infoHash : &quot;c0efbf6cd84e90718ad2e76d4d7b20902a1ef15c&quot;})&lt;-[:DIST_AS]-(e1:Edition { edition : &quot;Standard Edition })&lt;-[:PUB_AS]-(s1:Source {title : &quot;Candide})&lt;-[:TAGS]-(c1:Class {name: &quot;philosophy&quot;})\r\nCREATE (t2:Torrent {infoHash : &quot;09613cd9f5e09f126b5e07b7913ed91f92f1419b&quot;})&lt;-[:DIST_AS]-(e2:Edition { edition : &quot;Standard Edition })&lt;-[:PUB_AS]-(s2:Source {title : &quot;The Phenomenology of Perception&quot;})&lt;-[:TAGS]-(c2:Class {name: &quot;philosophy&quot;})\r\n```\r\nAbout the results, I&#39;m not sure but I think that the current result only compares one `Source`&#39;s path to `coCoSource`, rather than considering the `coCoSource` most linked to ALL `Source`s found by the `$infoHashes`.","link":"https://stackoverflow.com/questions/75822065/neo4j-recommendations-for-multiple-nodes","title":"Neo4j Recommendations for multiple nodes"},{"tags":["neo4j","cypher-shell"],"comments":[{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679561943,"post_id":75819307,"comment_id":133744672,"link":"https://stackoverflow.com/questions/75819307/how-to-use-environment-variable-neo4j-password-in-cypher-shell#comment133744672_75819307"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679567087,"post_id":75819307,"comment_id":133746034,"link":"https://stackoverflow.com/questions/75819307/how-to-use-environment-variable-neo4j-password-in-cypher-shell#comment133746034_75819307"},{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1679574346,"post_id":75819307,"comment_id":133747805,"link":"https://stackoverflow.com/questions/75819307/how-to-use-environment-variable-neo4j-password-in-cypher-shell#comment133747805_75819307"}],"answers":[{"tags":[],"owner":{"reputation":41183,"user_id":728812,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f522bc835d745f319a9567d63f5c0cc9?s=256&d=identicon&r=PG","display_name":"Michael Hunger","link":"https://stackoverflow.com/users/728812/michael-hunger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679594091,"creation_date":1679594091,"answer_id":75826495,"question_id":75819307,"share_link":"https://stackoverflow.com/a/75826495","body_markdown":"You first to set both environment variables via EXPORT NEO4J_USERNAME=&quot;neo4j&quot; and the same for password\r\n\r\nYou can also use the `source` command, like `source credentials.env` when the file contains the credentials, which then will be set as your environment variables.\r\n\r\nAs other posters said you can check the value of your env variables with `echo $NEO4J_USERNAME` or by `set | grep NEO4J_`\r\n","link":"https://stackoverflow.com/questions/75819307/how-to-use-environment-variable-neo4j-password-in-cypher-shell/75826495#75826495","title":"How to use Environment variable NEO4J_PASSWORD in cypher-shell"}],"owner":{"reputation":21,"user_id":15908651,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AATXAJz8ntJ48FDmZ9XiMML1LiPyqJ5ydEbP0XBQabZb=k-s256","display_name":"Chaitan","link":"https://stackoverflow.com/users/15908651/chaitan"},"last_editor":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679594091,"creation_date":1679546387,"last_edit_date":1679561615,"question_id":75819307,"share_link":"https://stackoverflow.com/q/75819307","body_markdown":"Can anyone please help me on how  to execute the cypher-shell command by passing username and pwd as environment variables.\r\n\r\nI have tried to define these variables in the Environment variables section of Advanced tab in my local desktop. However it is unable to read them and throwing an error as below :\r\n\r\nScript is placed in the bin folder of db and executing it from the same location\r\n\r\n    cypher-shell -d neo4j -f test.cypher\r\n\r\n&quot;The client is unauthorized due to authentication failure&quot;\r\n\r\nstill the same issue here too:\r\n\r\n    cypher-shell -d neo4j -u  $NEO4J_USER_ID -p $NEO4J_PASSWORD  -f test.cypher","link":"https://stackoverflow.com/questions/75819307/how-to-use-environment-variable-neo4j-password-in-cypher-shell","title":"How to use Environment variable NEO4J_PASSWORD in cypher-shell"},{"tags":["neo4j","cypher","neo4j-apoc"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679523418,"last_edit_date":1679523418,"creation_date":1679513873,"answer_id":75816597,"question_id":75816171,"share_link":"https://stackoverflow.com/a/75816597","body_markdown":"Your query returns the `value` returned by each `apoc.cypher.doIt` invocation, and each invocation only changes one property at a time.\r\n\r\nSo, you would have to filter through at all the returned `value`s to find the last mention of any particluar `History` node to see what its final state is.\r\n\r\nOr, more simply, just do a separate read request after the updates are finished, as you have shown.","link":"https://stackoverflow.com/questions/75816171/neo4j-apoc-cypher-doit-succeeds-but-yields-old-previous-value/75816597#75816597","title":"Neo4j apoc.cypher.doit succeeds but yields old/previous value"}],"owner":{"reputation":186,"user_id":184517,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/619678c5c35aa05b0677fde34d160fdb?s=256&d=identicon&r=PG","display_name":"Joe Zamora","link":"https://stackoverflow.com/users/184517/joe-zamora"},"last_editor":{"reputation":186,"user_id":184517,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/619678c5c35aa05b0677fde34d160fdb?s=256&d=identicon&r=PG","display_name":"Joe Zamora","link":"https://stackoverflow.com/users/184517/joe-zamora"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679525025,"creation_date":1679510743,"last_edit_date":1679525025,"question_id":75816171,"share_link":"https://stackoverflow.com/q/75816171","body_markdown":"I&#39;m running a dynamic query where I input a list of properties that contain secrets and remove the secret values from certain nodes.  The query runs successfully, meaning it loops over the list of properties and removes those property values.  However, when the results are yielded, one set of properties shows the old/previous value.  When I run a separate, read-only query on those nodes, I see that the values have indeed been updated.  Am I doing something wrong?\r\n\r\nHere&#39;s the dynamic list of property names:\r\n\r\n```\r\n:params { secretProps: [&#39;semiSecret&#39;,&#39;superSecret&#39;] }\r\n```\r\n\r\nAnd here&#39;s the cypher statement:\r\n\r\n```\r\nUnwind $secretProps as prop\r\nWith prop\r\nCALL apoc.cypher.doIt(&#39;Match (h:History) Where h.&#39;+prop+&#39; Is Not Null Set h.&#39;+prop+&#39; = &quot;[Removed]&quot; Return h;&#39;, {}) Yield value\r\nReturn value;\r\n```\r\n\r\nThe nodes returned from the statement above still appear to contain one of the secrets:\r\n\r\n```\r\n  {\r\n    &quot;value&quot;: {\r\n      &quot;h&quot;: {\r\n        &quot;identity&quot;: 7040,\r\n        &quot;labels&quot;: [\r\n          &quot;History&quot;\r\n        ],\r\n        &quot;properties&quot;: {\r\n          &quot;semiSecret&quot;: &quot;[Removed]&quot;,\r\n          &quot;superSecret&quot;: &quot;Oops, this is secret!&quot;\r\n        },\r\n        &quot;elementId&quot;: &quot;7040&quot;\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nHowever, when I check again...\r\n\r\n```\r\nMatch (h:History) Where h.superSecret Is Not Null Return h;\r\n```\r\n\r\n...both secrets have been removed:\r\n\r\n```\r\n  {\r\n    &quot;value&quot;: {\r\n      &quot;h&quot;: {\r\n        &quot;identity&quot;: 7040,\r\n        &quot;labels&quot;: [\r\n          &quot;History&quot;\r\n        ],\r\n        &quot;properties&quot;: {\r\n          &quot;semiSecret&quot;: &quot;[Removed]&quot;,\r\n          &quot;superSecret&quot;: &quot;[Removed]&quot;\r\n        },\r\n        &quot;elementId&quot;: &quot;7040&quot;\r\n      }\r\n    }\r\n  }\r\n```","link":"https://stackoverflow.com/questions/75816171/neo4j-apoc-cypher-doit-succeeds-but-yields-old-previous-value","title":"Neo4j apoc.cypher.doit succeeds but yields old/previous value"},{"tags":["python","neo4j","proxy"],"comments":[{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":1,"creation_date":1679394959,"post_id":75798296,"comment_id":133710128,"link":"https://stackoverflow.com/questions/75798296/connect-to-neo4j-auradb-behind-a-proxy-by-python-api#comment133710128_75798296"},{"owner":{"reputation":19230,"user_id":2662355,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG","display_name":"Christophe Willemsen","link":"https://stackoverflow.com/users/2662355/christophe-willemsen"},"edited":false,"score":1,"creation_date":1679469682,"post_id":75798296,"comment_id":133725733,"link":"https://stackoverflow.com/questions/75798296/connect-to-neo4j-auradb-behind-a-proxy-by-python-api#comment133725733_75798296"}],"owner":{"reputation":89,"user_id":17014129,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e697306f7abf32f86ca7b2a4adc25721?s=256&d=identicon&r=PG","display_name":"furynerd","link":"https://stackoverflow.com/users/17014129/furynerd"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1679383240,"creation_date":1679383240,"question_id":75798296,"share_link":"https://stackoverflow.com/q/75798296","body_markdown":"I got a neo4j auradb instance like `neo4j+s://12345678.databases.neo4j.io`, I can access it by browser behind a proxy `http://username:Password@ip:port` in my organization network, but by a local `demo.py` I failed.\r\n\r\nI looked into official demo: \r\nhttps://neo4j.com/docs/aura/auradb/connecting-applications/python/, \r\n\r\nand py2neo:\r\nhttps://py2neo.org/2021.1/\r\n\r\nbut found nothing about `proxy` configurations neither.\r\n\r\nI also tried `export {http_proxy,https_proxy,HTTP_PROXY,HTTPS_PROXY,ALL_PROXY}=http://username:Password@ip:port` before `python3 ./demo.py`, \r\n\r\nand tried add below in `demo.py`:\r\n```python\r\nimport os \r\nproxy = &quot;http://username:Password@ip:port&quot;\r\nos.environ[&quot;http_proxy&quot;] = proxy\r\nos.environ[&quot;https_proxy&quot;] = proxy\r\nos.environ[&quot;ALL_PROXY&quot;] = proxy\r\nos.environ[&quot;HTTP_PROXY&quot;] = proxy\r\nos.environ[&quot;HTTPS_PROXY&quot;] = proxy\r\n```\r\n\r\nbut looks no help and no difference.\r\n\r\n\r\n\r\nby official demo, I got \r\n```\r\nUnable to retrieve routing information\r\nTransaction failed and will be retried in 0.860454196033946s (Unable to retrieve routing information)\r\n...\r\n...\r\n...\r\nneo4j.exceptions.ServiceUnavailable: Unable to retrieve routing information\r\n```\r\n\r\nby py2neo demo, I got \r\n```\r\npy2neo.errors.ServiceUnavailable: Cannot connect to any known routers\r\n```\r\n\r\ncan I get some advice? thanks","link":"https://stackoverflow.com/questions/75798296/connect-to-neo4j-auradb-behind-a-proxy-by-python-api","title":"connect to neo4j auradb behind a proxy by python api"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679351198,"creation_date":1679351198,"answer_id":75795858,"question_id":75795623,"share_link":"https://stackoverflow.com/a/75795858","body_markdown":"I think you want a `COUNT` subquery here instead of `size`:\r\n\r\n```\r\nMATCH p=(a:LegalEntity)-[*..5]-(s:SanctionedEntity)\r\nWHERE all(n IN nodes(p) WHERE COUNT{(n)--() } &lt; 10)\r\nRETURN p\r\n```\r\n\r\nThere is also a [dense node APOC function](https://neo4j.com/labs/apoc/4.1/overview/apoc.nodes/). I think the threshold for dense nodes in this case is a degree of 50 or more.\r\n\r\n\r\n\r\n\r\n```\r\nMATCH p=(a:LegalEntity)-[*..5]-(s:SanctionedEntity)\r\nWHERE all(n IN nodes(p) WHERE NOT apoc.nodes.isDense(n))\r\nRETURN p\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/75795623/how-to-filter-out-paths-containing-super-nodes/75795858#75795858","title":"How to filter out paths containing super nodes?"}],"owner":{"reputation":535,"user_id":1692562,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/48eeff4fdd7d4746703b09182500c587?s=256&d=identicon&r=PG","display_name":"jvilledieu","link":"https://stackoverflow.com/users/1692562/jvilledieu"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75795858,"answer_count":1,"score":1,"last_activity_date":1679351198,"creation_date":1679348818,"question_id":75795623,"share_link":"https://stackoverflow.com/q/75795623","body_markdown":"I have a financial crime dataset stored in Neo4j. It contains things such as people, companies, addresses and sanctioned entities. I&#39;d like to find relationships between companies and sanctioned entities but I&#39;d like to remove paths that include super nodes. The super nodes are often not indicative of a meaningful connection.\r\n\r\nI could add some sort of label to the super nodes (see https://stackoverflow.com/questions/43052119/shortest-paths-without-supernodes-in-neo4j) but I&#39;m trying to avoid that. Here&#39;s the query I&#39;ve built to far:\r\n\r\n    MATCH p=(a:LegalEntity)-[*..5]-(s:SanctionedEntity)\r\n    WHERE all(n IN nodes(p) WHERE size((n)--()) &lt; 10)\r\n    RETURN p\r\n\r\nIt returns the following error message: \r\n\r\n&gt;     A pattern expression should only be used in order to test the existence of a pattern. It should therefore only be used in contexts that evaluate to a boolean, e.g. inside the function exists() or in a WHERE-clause. No other uses are allowed, instead they should be replaced by a pattern comprehension. (line 2, column 64 (offset: 115)) &quot;WHERE all(n IN nodes(p) WHERE size((n)--()) &lt; 10)&quot;\r\n\r\nWhat should I do?\r\n\r\nBest,","link":"https://stackoverflow.com/questions/75795623/how-to-filter-out-paths-containing-super-nodes","title":"How to filter out paths containing super nodes?"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679336874,"post_id":75793552,"comment_id":133700425,"link":"https://stackoverflow.com/questions/75793285/how-to-un-quarantine-a-neo4j-instance/75793552#comment133700425_75793552"}],"tags":[],"owner":{"reputation":41,"user_id":19169144,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AATXAJzA3pnZvt4_2-AVpVY-0XjDSQhzEEjHwPzGQ75s=k-s256","display_name":"Lavanya Kannan","link":"https://stackoverflow.com/users/19169144/lavanya-kannan"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679336780,"last_edit_date":1679336780,"creation_date":1679333998,"answer_id":75793552,"question_id":75793285,"share_link":"https://stackoverflow.com/a/75793552","body_markdown":"Resolved: CALL [dbms.quarantineDatabase](https://neo4j.com/docs/operations-manual/current/manage-databases/errors/#quarantine)(&quot;neo4j&quot;, false)","link":"https://stackoverflow.com/questions/75793285/how-to-un-quarantine-a-neo4j-instance/75793552#75793552","title":"How to un-quarantine a neo4j instance"}],"owner":{"reputation":41,"user_id":19169144,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AATXAJzA3pnZvt4_2-AVpVY-0XjDSQhzEEjHwPzGQ75s=k-s256","display_name":"Lavanya Kannan","link":"https://stackoverflow.com/users/19169144/lavanya-kannan"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1679336780,"creation_date":1679332141,"last_edit_date":1679336757,"question_id":75793285,"share_link":"https://stackoverflow.com/q/75793285","body_markdown":"I am on Neo4j 5.3 and recently I was working on some `LOAD CSV` commands that panicked the instance. As a result, I have the following error:\r\n\r\n    Database &quot;neo4j&quot; is unavailable, its status is &quot;quarantined&quot;. \r\n\r\nI changed the heap size in the `neo4j.conf` file and restarted the db:\r\n\r\n    server.memory.heap.initial_size=4096m\r\n    server.memory.heap.max_size=4096m\r\n\r\nBut still see the same error. Is there a command to start a quarantined instance (after bumping up the heap space)?  \r\n","link":"https://stackoverflow.com/questions/75793285/how-to-un-quarantine-a-neo4j-instance","title":"How to un-quarantine a neo4j instance"},{"tags":["neo4j","cypher","load-csv"],"comments":[{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1679333067,"post_id":75792425,"comment_id":133699405,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop#comment133699405_75792425"},{"owner":{"reputation":2514,"user_id":5314329,"user_type":"registered","accept_rate":64,"profile_image":"https://graph.facebook.com/10155955028705361/picture?type=large","display_name":"Windstorm1981","link":"https://stackoverflow.com/users/5314329/windstorm1981"},"reply_to_user":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1679333754,"post_id":75792425,"comment_id":133699639,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop#comment133699639_75792425"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679337761,"post_id":75792425,"comment_id":133700620,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop#comment133700620_75792425"},{"owner":{"reputation":2514,"user_id":5314329,"user_type":"registered","accept_rate":64,"profile_image":"https://graph.facebook.com/10155955028705361/picture?type=large","display_name":"Windstorm1981","link":"https://stackoverflow.com/users/5314329/windstorm1981"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679343894,"post_id":75792425,"comment_id":133702096,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop#comment133702096_75792425"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679345101,"post_id":75792425,"comment_id":133702355,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop#comment133702355_75792425"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679555934,"post_id":75792425,"comment_id":133743384,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop#comment133743384_75792425"}],"answers":[{"comments":[{"owner":{"reputation":2514,"user_id":5314329,"user_type":"registered","accept_rate":64,"profile_image":"https://graph.facebook.com/10155955028705361/picture?type=large","display_name":"Windstorm1981","link":"https://stackoverflow.com/users/5314329/windstorm1981"},"edited":false,"score":0,"creation_date":1679336422,"post_id":75793793,"comment_id":133700310,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop/75793793#comment133700310_75793793"},{"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"reply_to_user":{"reputation":2514,"user_id":5314329,"user_type":"registered","accept_rate":64,"profile_image":"https://graph.facebook.com/10155955028705361/picture?type=large","display_name":"Windstorm1981","link":"https://stackoverflow.com/users/5314329/windstorm1981"},"edited":false,"score":1,"creation_date":1679342257,"post_id":75793793,"comment_id":133701682,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop/75793793#comment133701682_75793793"},{"owner":{"reputation":2514,"user_id":5314329,"user_type":"registered","accept_rate":64,"profile_image":"https://graph.facebook.com/10155955028705361/picture?type=large","display_name":"Windstorm1981","link":"https://stackoverflow.com/users/5314329/windstorm1981"},"edited":false,"score":0,"creation_date":1679345649,"post_id":75793793,"comment_id":133702460,"link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop/75793793#comment133702460_75793793"}],"tags":[],"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679335378,"creation_date":1679335378,"answer_id":75793793,"question_id":75792425,"share_link":"https://stackoverflow.com/a/75793793","body_markdown":"Make sure you have a [uniqueness constraint](https://neo4j.com/docs/cypher-manual/current/constraints/syntax/) on `Registrant.row_wid`:\r\n\r\n```\r\nCREATE CONSTRAINT FOR (r:Registraint) REQUIRE r.row_wid IS UNIQUE;\r\n```\r\n\r\nExamine the query plan to make sure the index is being used by prepending `EXPLAIN` to the query and make sure there are no &quot;eager&quot; operations that would prevent batching (given the query I wouldn&#39;t expect there to be).\r\n\r\nIncrease the number of rows per transaction. It depends on how much memory is allocated for Neo4j transactions, but typically around 100k is what I use.","link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop/75793793#75793793","title":"Incredibly Long load time for Load CSV in Neo4j Desktop"}],"owner":{"reputation":2514,"user_id":5314329,"user_type":"registered","accept_rate":64,"profile_image":"https://graph.facebook.com/10155955028705361/picture?type=large","display_name":"Windstorm1981","link":"https://stackoverflow.com/users/5314329/windstorm1981"},"last_editor":{"reputation":2514,"user_id":5314329,"user_type":"registered","accept_rate":64,"profile_image":"https://graph.facebook.com/10155955028705361/picture?type=large","display_name":"Windstorm1981","link":"https://stackoverflow.com/users/5314329/windstorm1981"},"comment_count":6,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679335378,"creation_date":1679327169,"last_edit_date":1679327575,"question_id":75792425,"share_link":"https://stackoverflow.com/q/75792425","body_markdown":"Using straightforward Cypher to load data from a CSV and just create nodes.\r\n\r\nCode is as follows:\r\n\r\n```\r\n\r\n    :auto LOAD CSV WITH HEADERS FROM &#39;file:///registrants.csv&#39; AS row\r\n    CALL {\r\n        WITH row \r\n        MERGE (r:Registrant {row_wid: toInteger(row.ROW_WID)})\r\n        ON CREATE SET\r\n            r.row_wid = toInteger(row.ROW_WID), \r\n            r.w_insert_dt = row.W_INSERT_DT,\r\n            r.w_update_dt = row.W.UPDATE_DT,\r\n            r.email_address = row.EMAIL_ADDRESS,\r\n            r.attendee_contact_wid = toInteger(row.ATTENDEE_CONTACT_WID),\r\n            r.attendee_account_wid = toInteger(row.ATTENDEE_ACCOUNT_WID),\r\n            r.reg_contact_wid = toInteger(row.REG_CONTACT_WID),\r\n            r.reg_account_wid = toInteger(row.REG_ACCOUNT_WID),\r\n            r.event_wid = toInteger(row.EVENT_WID),\r\n            r.tkt1_wid = toInteger(row.TKT1_WID),\r\n            r.tkt2_wid = toInteger(row.TKT2_WID),\r\n            r.tkt3_wid = toInteger(row.TKT3_WID),\r\n            r.tkt4_wid = toInteger(row.TKT4_WID),\r\n            r.tkt5_wid = toInteger(row.TKT5_WID),\r\n            r.tkt6_wid = toInteger(row.TKT6_WID),\r\n            r.current_flg = row.CURRENT_FLG,\r\n            r.delete_flg = row.DELETE_FLG,\r\n            r.created_on_dt = row.CREATED_ON_DT,\r\n            r.updated_on_dt = row.UPDATED_ON_DT,\r\n            r.reg_dt = row.REG_DT,\r\n            r.attend_dt = row.ATTEND_DT,\r\n            r.cancel_dt = row.CANCEL_DT,\r\n            r.alumni = row.ALUMNI,\r\n            r.reg_channel = row.REG_CHANNEL\r\n            \r\n    } IN TRANSACTIONS of 1000 ROWS\r\n\r\n```\r\n\r\nDid this with 100 rows and it worked seamlessly. Trying to create with 700K rows and it has been running over 12 hours.\r\n\r\nI also have an index for creation of this node in the DB.\r\n\r\nI&#39;m a newbie so please excuse if I&#39;m doing something wrong.\r\n\r\nFrom my research this looks right.\r\n\r\nNot getting any errors.\r\n\r\nInsights appreciated\r\n\r\nThank you.\r\n\r\n\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/75792425/incredibly-long-load-time-for-load-csv-in-neo4j-desktop","title":"Incredibly Long load time for Load CSV in Neo4j Desktop"},{"tags":["neo4j"],"owner":{"reputation":1,"user_id":21438765,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AGNmyxZyVAn9vpxB6-LmjiehXe1wA1mm0aqKmJHMKhV5=k-s256","display_name":"Gowtham Murugan","link":"https://stackoverflow.com/users/21438765/gowtham-murugan"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679337134,"creation_date":1679314950,"last_edit_date":1679337134,"question_id":75790216,"share_link":"https://stackoverflow.com/q/75790216","body_markdown":"I was getting the below inconsistency during backup\r\n\r\n    ERROR [o.n.c.ConsistencyCheckService] This node was not found in the expected index.\r\n    \tNode[2317694,used=true,created=false,rel=12168688,prop=25684114,labels=Inline(0x1000000008:[8]),light]\r\n    \tInconsistent with: Index( id=13, name=&#39;constraint_d32ed228&#39;, type=&#39;UNIQUE BTREE&#39;, schema=(:Label[6] {PropertyKey[154]}), indexProvider=&#39;lucene+native-3.0&#39;, owningConstraint=15 ) []\r\n    2023-03-20 10:34:19.432+0000 WARN  [o.n.c.ConsistencyCheckService] Inconsistencies found: ConsistencySummaryStatistics{\r\n    \tNumber of errors: 1\r\n    \tNumber of warnings: 0\r\n    \tNumber of inconsistent NODE records: 1\r\n    }\r\n\r\nI followed the steps provided in [this article](https://support.neo4j.com/hc/en-us/articles/218047648-How-do-I-resolve-Consistency-Check-errors#:~:text=Node%20not%20found%20in%20the%20expected%20index).\r\n\r\nThe Backup was working fine temporarily but I started getting the same inconsistency error &quot;**This node was not found in the expected index**&quot; after a day. How do I solve this issue permanently.\r\n\r\n\r\nI tried :\r\nRebuild the index store. To do this stop the database and then remove the entire directory of graph.db/schema/index. Restarting Neo4j to rebuild these files.\r\n\r\nThe backup was working fine temporarily without inconsistency but the inconsistency reappeared after a day causing backup failures again.","link":"https://stackoverflow.com/questions/75790216/neo4j-inconsistency-during-backup-this-node-was-not-found-in-the-expected-index","title":"Neo4j Inconsistency During Backup &quot;This node was not found in the expected index.&quot;"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679303881,"post_id":75788092,"comment_id":133690825,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133690825_75788092"},{"owner":{"reputation":173,"user_id":5764770,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/aee228c78332bfc2b1ad8cd8cc5e2a5e?s=256&d=identicon&r=PG&f=1","display_name":"Vishal Jamdade","link":"https://stackoverflow.com/users/5764770/vishal-jamdade"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679304253,"post_id":75788092,"comment_id":133690927,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133690927_75788092"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679307744,"post_id":75788092,"comment_id":133691970,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133691970_75788092"},{"owner":{"reputation":173,"user_id":5764770,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/aee228c78332bfc2b1ad8cd8cc5e2a5e?s=256&d=identicon&r=PG&f=1","display_name":"Vishal Jamdade","link":"https://stackoverflow.com/users/5764770/vishal-jamdade"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679308701,"post_id":75788092,"comment_id":133692226,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133692226_75788092"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679309821,"post_id":75788092,"comment_id":133692532,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133692532_75788092"},{"owner":{"reputation":173,"user_id":5764770,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/aee228c78332bfc2b1ad8cd8cc5e2a5e?s=256&d=identicon&r=PG&f=1","display_name":"Vishal Jamdade","link":"https://stackoverflow.com/users/5764770/vishal-jamdade"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679311105,"post_id":75788092,"comment_id":133692875,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133692875_75788092"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679311265,"post_id":75788092,"comment_id":133692922,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133692922_75788092"},{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1679321016,"post_id":75788092,"comment_id":133695702,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133695702_75788092"},{"owner":{"reputation":173,"user_id":5764770,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/aee228c78332bfc2b1ad8cd8cc5e2a5e?s=256&d=identicon&r=PG&f=1","display_name":"Vishal Jamdade","link":"https://stackoverflow.com/users/5764770/vishal-jamdade"},"reply_to_user":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1679379787,"post_id":75788092,"comment_id":133706662,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries#comment133706662_75788092"}],"answers":[{"comments":[{"owner":{"reputation":173,"user_id":5764770,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/aee228c78332bfc2b1ad8cd8cc5e2a5e?s=256&d=identicon&r=PG&f=1","display_name":"Vishal Jamdade","link":"https://stackoverflow.com/users/5764770/vishal-jamdade"},"edited":false,"score":0,"creation_date":1679379914,"post_id":75793871,"comment_id":133706685,"link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries/75793871#comment133706685_75793871"}],"tags":[],"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679335841,"creation_date":1679335841,"answer_id":75793871,"question_id":75788092,"share_link":"https://stackoverflow.com/a/75793871","body_markdown":"Try not to use internal node ids in this way. Internal node ids can be recycled/reused and can make it difficult to make sure you are matching on the nodes you actually want. I would imagine you aren&#39;t actually computing distance for the nodes you want. Try returning the lat/lng coordinates as well as the distance to confirm what coordinates you are using:\r\n\r\n```\r\nMATCH (l1) where ID(l1) = 0\r\nMATCH (l2) where ID(l2) = 1\r\nRETURN point.distance(l1.location, l2.location) AS distance, l1.location, l2.location\r\n```\r\n\r\nAre there other properties you can use to reference the nodes in the `MATCH` clause (name, etc)?\r\n\r\nHere&#39;s the result I get just computing distance between the two points, units are meters (which is consistent with the results you found online):\r\n\r\n```\r\nRETURN point.distance(\r\n  point({latitude: 77.74457111606239, longitude: 12.958174189153517}), \r\n  point({latitude: 77.744577645, longitude: 13.958174189153517}))\r\n--------------------------------------------------------------------\r\n23629.536412350273\r\n```","link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries/75793871#75793871","title":"Getting wrong distance with neo4j geospatial queries"}],"owner":{"reputation":173,"user_id":5764770,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/aee228c78332bfc2b1ad8cd8cc5e2a5e?s=256&d=identicon&r=PG&f=1","display_name":"Vishal Jamdade","link":"https://stackoverflow.com/users/5764770/vishal-jamdade"},"comment_count":9,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679335841,"creation_date":1679301871,"question_id":75788092,"share_link":"https://stackoverflow.com/q/75788092","body_markdown":"I am doing some POC around neo4j. I have added nodes to graph using below queries.\r\n\r\n```\r\nCREATE p = (:Location {location: point({latitude: 77.74457111606239, longitude: 12.958174189153517})})\r\nRETURN p\r\n\r\nCREATE p = (:Location {location: point({latitude: 77.744577645, longitude: 13.958174189153517})})\r\nRETURN p\r\n```\r\n\r\nI am calculating the distance between these 2 nodes using below query.\r\n\r\n```\r\nMATCH (l1) where ID(l1) = 0\r\nMATCH (l2) where ID(l2) = 1\r\nRETURN point.distance(l1.location, l2.location) AS distance\r\n```\r\nI am getting output = 111319.54315539512\r\n\r\nBut when I calculate the distance between same lat long locations using online distance calculators it is 23.71 km or 14.73 miles which looks correct.\r\n\r\nNot able to understand what I am missing or doing wrong.","link":"https://stackoverflow.com/questions/75788092/getting-wrong-distance-with-neo4j-geospatial-queries","title":"Getting wrong distance with neo4j geospatial queries"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":13,"user_id":21434477,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AGNmyxavAhgFSTHx-fPBkVbjtkl7To8XivZnFLcHtWig=k-s256","display_name":"gizem tangalay","link":"https://stackoverflow.com/users/21434477/gizem-tangalay"},"edited":false,"score":1,"creation_date":1679322861,"post_id":75790770,"comment_id":133696314,"link":"https://stackoverflow.com/questions/75784968/multiple-values-in-column-in-csv-file/75790770#comment133696314_75790770"},{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"reply_to_user":{"reputation":13,"user_id":21434477,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AGNmyxavAhgFSTHx-fPBkVbjtkl7To8XivZnFLcHtWig=k-s256","display_name":"gizem tangalay","link":"https://stackoverflow.com/users/21434477/gizem-tangalay"},"edited":false,"score":0,"creation_date":1679416174,"post_id":75790770,"comment_id":133716720,"link":"https://stackoverflow.com/questions/75784968/multiple-values-in-column-in-csv-file/75790770#comment133716720_75790770"}],"tags":[],"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1679318300,"creation_date":1679318300,"answer_id":75790770,"question_id":75784968,"share_link":"https://stackoverflow.com/a/75790770","body_markdown":"You need to split the string into individual strings (delimiter is comma) then do unwind to create the relationship one at a time. Unwind is like a &quot;for loop&quot;.\r\n\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///FilmData.csv&#39; AS line \r\n    MERGE (n:Movie{title:line.Film_Adi_TR,released:line.Vizyon_Tarihi, genre:line.Film_Turu}) \r\n    WITH n, split(line.Yapimci,&quot;,&quot;) as manufacturers\r\n    UNWIND manufacturers as m\r\n    MERGE (y:Yapimci{title: m}) \r\n    MERGE (n)-[:Yapimci]-&gt;(y)\r\n\r\nSample:\r\n\r\n    Film_Adi_TR,Vizyon_Tarihi,Film_Turu,Yapimci\r\n    &quot;The Matrix&quot;,1999,Action,&quot;Warner Bros,Roadshow Entertainment,Silver Pictures&quot;\r\n\r\nResult:\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JYYZ9.png","link":"https://stackoverflow.com/questions/75784968/multiple-values-in-column-in-csv-file/75790770#75790770","title":"Multiple values in column in csv file"}],"owner":{"reputation":13,"user_id":21434477,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AGNmyxavAhgFSTHx-fPBkVbjtkl7To8XivZnFLcHtWig=k-s256","display_name":"gizem tangalay","link":"https://stackoverflow.com/users/21434477/gizem-tangalay"},"last_editor":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75790770,"answer_count":1,"score":1,"last_activity_date":1679323988,"creation_date":1679260540,"last_edit_date":1679281678,"question_id":75784968,"share_link":"https://stackoverflow.com/q/75784968","body_markdown":"I&#39;m new to neo4j. I searched for my problem but couldn&#39;t find it. I have a csv file with movie name, movie type, director, producer etc.\r\nSome of these columns contain more than one value. I want to import these values into neo4j database but I couldn&#39;t. \r\nFor example, the manufacturer column contains more than one value. When I export it to neo4j it writes 3 values as a single node. I want to show each value as different nodes.\r\nCan you help me?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n\r\n`LOAD CSV WITH HEADERS FROM &#39;.../FilmData.csv&#39; AS line\r\nMERGE (n:Movie{title:line.Film_Adi_TR,released:Vizyon_Tarihi, genre:Film_Turu})\r\nMerge(y:Yapimci{title:line.Yapimci})\r\nMerge (n)-[:Yapimci]-&gt;(y)`\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kIsqy.png\r\n  [2]: https://i.stack.imgur.com/3CxSE.png","link":"https://stackoverflow.com/questions/75784968/multiple-values-in-column-in-csv-file","title":"Multiple values in column in csv file"},{"tags":["spring-boot","neo4j"],"comments":[{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1679154232,"post_id":75774262,"comment_id":133672342,"link":"https://stackoverflow.com/questions/75774262/springboot-neo4j-query#comment133672342_75774262"}],"owner":{"reputation":1,"user_id":21424622,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/724e7e7b4421ea985eca08721c18c0fb?s=256&d=identicon&r=PG&f=y&so-version=2","display_name":"tdcy","link":"https://stackoverflow.com/users/21424622/tdcy"},"last_editor":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1679154065,"creation_date":1679122040,"last_edit_date":1679154065,"question_id":75774262,"share_link":"https://stackoverflow.com/q/75774262","body_markdown":"    @Query(&quot;match (.......) create (n)-[r::#{#createRelation.relation}]-&gt;(m) return r;&quot;)\r\n        Result createKnowledgePointRelation(@Param(&quot;createRelation&quot;) CreateRelation createRelation);\r\n\r\n\r\n[enter image description here](https://i.stack.imgur.com/ZWJms.png)\r\n\r\n    org.neo4j.driver.exceptions.ClientException: Invalid input &#39;$&#39;: expected &quot;%&quot;, &quot;(&quot; or an identifier (line 1, column 137 (offset: 136))\r\n    &quot;match (n:knowledge_point{name:$spel_expr0,subject:$spel_expr1}),(m:knowledge_point{name:$spel_expr2,subject:$spel_expr3}) create (n)-[r:$spel_expr4]-&gt;(m) return r&quot;\r\n                                                                                                                                    \r\n\r\ni use :#{#},but it not work.\r\nhow can i fit it?\r\n","link":"https://stackoverflow.com/questions/75774262/springboot-neo4j-query","title":"springboot neo4j @Query"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":19230,"user_id":2662355,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=256&d=identicon&r=PG","display_name":"Christophe Willemsen","link":"https://stackoverflow.com/users/2662355/christophe-willemsen"},"edited":false,"score":0,"creation_date":1679067576,"post_id":75769509,"comment_id":133660011,"link":"https://stackoverflow.com/questions/75769509/how-to-list-all-the-edges-associated-with-a-particular-node-in-neo4j#comment133660011_75769509"},{"owner":{"reputation":903,"user_id":18781306,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/88785b65c8114f5d2455e4a83dc20d94?s=256&d=identicon&r=PG","display_name":"KWriter","link":"https://stackoverflow.com/users/18781306/kwriter"},"edited":false,"score":0,"creation_date":1679068205,"post_id":75769509,"comment_id":133660176,"link":"https://stackoverflow.com/questions/75769509/how-to-list-all-the-edges-associated-with-a-particular-node-in-neo4j#comment133660176_75769509"}],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679072904,"last_edit_date":1679072904,"creation_date":1679072553,"answer_id":75770309,"question_id":75769509,"share_link":"https://stackoverflow.com/a/75770309","body_markdown":"You don&#39;t provide enough information about your data model. So I will assume here that the node you are interested in has the label `Foo` and that the `APT28` value is in the `id` property.\r\n\r\nTo get all of the `APT28` node&#39;s outgoing and incoming relationships, simply use this query (notice that it uses an [undirected](https://neo4j.com/docs/getting-started/current/cypher-intro/patterns/#cypher-intro-patterns-relationship-syntax) relationship pattern):\r\n\r\n\r\n    MATCH (n:Foo {id: &#39;APT28&#39;})-[r]-()\r\n    RETURN r","link":"https://stackoverflow.com/questions/75769509/how-to-list-all-the-edges-associated-with-a-particular-node-in-neo4j/75770309#75770309","title":"How to list all the edges associated with a particular node in Neo4j"}],"owner":{"reputation":657,"user_id":11668258,"user_type":"registered","profile_image":"https://i.stack.imgur.com/sgwny.jpg?s=256&g=1","display_name":"Tono Kuriakose","link":"https://stackoverflow.com/users/11668258/tono-kuriakose"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1679072904,"creation_date":1679067444,"last_edit_date":1679072684,"question_id":75769509,"share_link":"https://stackoverflow.com/q/75769509","body_markdown":"I want to use Cypher to get a list of all the relationships (incoming and outgoing) of a node.\r\n\r\nFor example, here we have 4 nodes and their associated relationships. I want to list all the relationships associated with the `APT28` node. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/6xlD9.png","link":"https://stackoverflow.com/questions/75769509/how-to-list-all-the-edges-associated-with-a-particular-node-in-neo4j","title":"How to list all the edges associated with a particular node in Neo4j"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":77,"user_id":6095520,"user_type":"registered","profile_image":"https://graph.facebook.com/215034385499496/picture?type=large","display_name":"David Apple","link":"https://stackoverflow.com/users/6095520/david-apple"},"edited":false,"score":0,"creation_date":1679028907,"post_id":75761512,"comment_id":133651018,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75761512#comment133651018_75761512"},{"owner":{"reputation":77,"user_id":6095520,"user_type":"registered","profile_image":"https://graph.facebook.com/215034385499496/picture?type=large","display_name":"David Apple","link":"https://stackoverflow.com/users/6095520/david-apple"},"edited":false,"score":0,"creation_date":1679030976,"post_id":75761512,"comment_id":133651230,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75761512#comment133651230_75761512"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":77,"user_id":6095520,"user_type":"registered","profile_image":"https://graph.facebook.com/215034385499496/picture?type=large","display_name":"David Apple","link":"https://stackoverflow.com/users/6095520/david-apple"},"edited":false,"score":1,"creation_date":1679085839,"post_id":75761512,"comment_id":133664341,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75761512#comment133664341_75761512"},{"owner":{"reputation":77,"user_id":6095520,"user_type":"registered","profile_image":"https://graph.facebook.com/215034385499496/picture?type=large","display_name":"David Apple","link":"https://stackoverflow.com/users/6095520/david-apple"},"edited":false,"score":0,"creation_date":1679166954,"post_id":75761512,"comment_id":133674366,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75761512#comment133674366_75761512"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":77,"user_id":6095520,"user_type":"registered","profile_image":"https://graph.facebook.com/215034385499496/picture?type=large","display_name":"David Apple","link":"https://stackoverflow.com/users/6095520/david-apple"},"edited":false,"score":1,"creation_date":1679207062,"post_id":75761512,"comment_id":133677802,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75761512#comment133677802_75761512"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679086115,"last_edit_date":1679086115,"creation_date":1678999854,"answer_id":75761512,"question_id":75761184,"share_link":"https://stackoverflow.com/a/75761512","body_markdown":"\r\n[UPDATE]\r\n\r\nThis update should satisfy the example at the bottom of your question.\r\n\r\nFor simplicity, I will assume that `Category` `id` values are strings. I will also assume you pass this `$input` [parameter](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) value:\r\n\r\n    {\r\n      14: {lo: 0.9, hi: 1},\r\n      17: {lo: 0.7, hi: 1},\r\n      20: {lo: 0.5, hi: 1},\r\n      21: {lo: 0.4, hi: 1}\r\n    }\r\n\r\nThis query will find the `Image`s that satisfy all the constraints in `$input`:\r\n\r\n    MATCH (i:Image)-[r:CLASSIFIED_AS]-&gt;(c:Category)\r\n    WHERE $input[c.id].lo &lt;= r.weight &lt;= $input[c.id].hi\r\n    WITH i, COUNT(DISTINCT c) AS catCount\r\n    WHERE catCount = SIZE(KEYS($input))\r\n    RETURN i LIMIT 100\r\n\r\n[ORIGINAL]\r\n\r\nAssuming you pass the lists as the [parameters](https://neo4j.com/docs/cypher-manual/current/syntax/parameters/) `$ids` and `$weights`, this should work:\r\n\r\n    MATCH (i:Image)-[r:CLASSIFIED_AS]-&gt;(c:Category)\r\n    WHERE c.id IN $ids AND r.weight IN $weights\r\n    RETURN DISTINCT i LIMIT 100\r\n\r\nBut if you actually want to specify a weight *range*, then pass a `$range` parameter in this format: `{lo: 0.9, hi: 1}`, and use this query:\r\n\r\n    MATCH (i:Image)-[r:CLASSIFIED_AS]-&gt;(c:Category)\r\n    WHERE c.id IN $ids AND $range.lo &lt;= r.weight &lt;= $range.hi\r\n    RETURN DISTINCT i LIMIT 100\r\n","link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75761512#75761512","title":"Neo4j cypher return all nodes where property and relationship matches any array element"},{"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679074115,"post_id":75769323,"comment_id":133661720,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75769323#comment133661720_75769323"},{"owner":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679075257,"post_id":75769323,"comment_id":133661982,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75769323#comment133661982_75769323"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679084128,"post_id":75769323,"comment_id":133663963,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75769323#comment133663963_75769323"},{"owner":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1679084229,"post_id":75769323,"comment_id":133663990,"link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75769323#comment133663990_75769323"}],"tags":[],"owner":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679066341,"creation_date":1679066341,"answer_id":75769323,"question_id":75761184,"share_link":"https://stackoverflow.com/a/75769323","body_markdown":"I tried this, which is fully reproducible.\r\n\r\nCreate the nodes and relationships. Only the imageids ending in 1 will be returned.\r\n```\r\nCREATE (:Image {imageid: 11})-[:CLASSIFIED_AS {weight: 0.95}]-&gt;(:Category {id: 14})\r\nCREATE (:Image {imageid: 10})-[:CLASSIFIED_AS {weight: 0.89}]-&gt;(:Category {id: 14})\r\nCREATE (:Image {imageid: 21})-[:CLASSIFIED_AS {weight: 0.73}]-&gt;(:Category {id: 17})\r\nCREATE (:Image {imageid: 20})-[:CLASSIFIED_AS {weight: 0.65}]-&gt;(:Category {id: 17})\r\nCREATE (:Image {imageid: 31})-[:CLASSIFIED_AS {weight: 0.55}]-&gt;(:Category {id: 20})\r\nCREATE (:Image {imageid: 30})-[:CLASSIFIED_AS {weight: 0.47}]-&gt;(:Category {id: 20})\r\nCREATE (:Image {imageid: 41})-[:CLASSIFIED_AS {weight: 0.42}]-&gt;(:Category {id: 21})\r\nCREATE (:Image {imageid: 40})-[:CLASSIFIED_AS {weight: 0.37}]-&gt;(:Category {id: 21})\r\n```\r\n\r\nNow for a combination of collect(), unwind, nested list creation, and list comprehension:\r\n```\r\nWITH [0.9, 0.7, 0.5, 0.4] as weights\r\nMATCH (i:Image)-[r:CLASSIFIED_AS]-&gt;(c:Category)\r\nWHERE c.id in [14, 17, 20, 21]\r\nWITH weights, i.imageid as iid, r.weight as rw, c.id as cid\r\nORDER BY c.id\r\nWITH weights, cid, collect(iid) as myims, collect(rw) as rweights\r\nwith weights, [myims, rweights] as myrwims\r\nwith weights, collect(myrwims) as allrwims\r\nWITH weights, [i in range(0, size(allrwims)-1) | [allrwims[i], weights[i]]] as allrwimswithweights\r\nunwind allrwimswithweights as x\r\nwith x, weights, x[0] as x40, x[0][1] as x401, x[1] as x41\r\nwith *, [i in range(0, size(x[0][1])-1) WHERE x[0][1][i] &gt;= x[1] | x[0][0][i]] as finalims\r\nreturn x, x40, x401, x41, finalims\r\n```\r\nNotes:\r\n- The whole goal of this is to get it into a form like `[[[imageids], [weights]], [comparison weight]]`\r\n- I left the versions of x in the return so it&#39;s clear what is happening with all the indexes\r\n- If you want the Image nodes instead of the imageids, just change `i.imageid as iid` to `i as iid`","link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array/75769323#75769323","title":"Neo4j cypher return all nodes where property and relationship matches any array element"}],"owner":{"reputation":77,"user_id":6095520,"user_type":"registered","profile_image":"https://graph.facebook.com/215034385499496/picture?type=large","display_name":"David Apple","link":"https://stackoverflow.com/users/6095520/david-apple"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75761512,"answer_count":2,"score":1,"last_activity_date":1679111837,"creation_date":1678997119,"last_edit_date":1679000015,"question_id":75761184,"share_link":"https://stackoverflow.com/q/75761184","body_markdown":"I&#39;ve used an image classifier AI to create a Neo4j database. There are 30 `Category` nodes with an `id` property. The `CLASSIFIED_AS` relationships have a `weight` property between 0 and 1.\r\n\r\nI have two arrays for category `id` and relationship `weight`: `[14, 17, 20, 21]`, `[0.9, 0.7, 0.5, 0.4]`.\r\n\r\nI know how to return images that fall into one of the categories in my array.\r\n\r\n    MATCH (i:Image)-[:CLASSIFIED_AS]-&gt;(c:Category)\r\n    WHERE c.id IN [14, 17, 20, 21]\r\n    RETURN i LIMIT 100\r\n\r\nBut how do I filter images by both category and corresponding relationship weight?\r\n\r\nSo in this example, I require:\r\n\r\n1. Images that are in category 14 with a CLASSIFIED_AS weight between 0.9 to 1\r\n2. And that are in category 17 with a CLASSIFIED_AS weight between 0.7 to 1\r\n3. And that are in category 20 with a CLASSIFIED_AS weight between 0.5 to 1\r\n4. And that are in category 21 with a CLASSIFIED_AS weight between 0.4 to 1\r\n\r\nHow is this possible with arrays of varying lengths?","link":"https://stackoverflow.com/questions/75761184/neo4j-cypher-return-all-nodes-where-property-and-relationship-matches-any-array","title":"Neo4j cypher return all nodes where property and relationship matches any array element"},{"tags":["java","spring","neo4j","spring-data-neo4j"],"answers":[{"comments":[{"owner":{"reputation":838,"user_id":3332879,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1","display_name":"Cugomastik","link":"https://stackoverflow.com/users/3332879/cugomastik"},"edited":false,"score":0,"creation_date":1679060192,"post_id":75765221,"comment_id":133657767,"link":"https://stackoverflow.com/questions/75758455/spring-data-neo4j-null-response/75765221#comment133657767_75765221"},{"owner":{"reputation":838,"user_id":3332879,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1","display_name":"Cugomastik","link":"https://stackoverflow.com/users/3332879/cugomastik"},"edited":false,"score":0,"creation_date":1679061033,"post_id":75765221,"comment_id":133657982,"link":"https://stackoverflow.com/questions/75758455/spring-data-neo4j-null-response/75765221#comment133657982_75765221"},{"owner":{"reputation":7852,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"reply_to_user":{"reputation":838,"user_id":3332879,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1","display_name":"Cugomastik","link":"https://stackoverflow.com/users/3332879/cugomastik"},"edited":false,"score":0,"creation_date":1679142653,"post_id":75765221,"comment_id":133670452,"link":"https://stackoverflow.com/questions/75758455/spring-data-neo4j-null-response/75765221#comment133670452_75765221"}],"tags":[],"owner":{"reputation":7852,"user_id":2650436,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/34ecacd077244d141a23c46ea094df5c?s=256&d=identicon&r=PG","display_name":"meistermeier","link":"https://stackoverflow.com/users/2650436/meistermeier"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679041390,"creation_date":1679041390,"answer_id":75765221,"question_id":75758455,"share_link":"https://stackoverflow.com/a/75765221","body_markdown":"Spring Data Neo4j repositories, like all Spring Data repositories, operate entity-centric. This means it will happily map anything that will result in a proper instance of your domain classes (the ones annotated with `NodeEntity`). For this it needs for example the id and labels.\r\nYou are returning a map with loose values and SDN does not really know what to do with this.\r\n\r\nThere are a few options:\r\n1. You could use the `Neo4jClient` for this use-case. \r\nIt has a fluent API to execute the query, bind parameters and map the result with a custom mapper. https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#neo4j-client\r\nAlso, it participates in the Spring transactions as the repository does.\r\n2. You could write your own repository extension to encapsulate (1) within the repository. This might be the way to go if you are using more functionality of the `ChildrenRepository`. https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#repositories.custom-implementations\r\n3. You could define DTOs for the data collection. But they are a little bit limited and won&#39;t support the map structure. You would have to return the values flatten. Here is a repository that should give you an impression: https://github.com/spring-projects/spring-data-neo4j/blob/a41fbad5ab2976db3b5bc2e2d0018afab6920678/src/test/java/org/springframework/data/neo4j/integration/lite/SomeDomainRepository.java#L28","link":"https://stackoverflow.com/questions/75758455/spring-data-neo4j-null-response/75765221#75765221","title":"Spring Data Neo4j - Null Response"}],"owner":{"reputation":838,"user_id":3332879,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1","display_name":"Cugomastik","link":"https://stackoverflow.com/users/3332879/cugomastik"},"last_editor":{"reputation":838,"user_id":3332879,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/WUGpQ.jpg?s=256&g=1","display_name":"Cugomastik","link":"https://stackoverflow.com/users/3332879/cugomastik"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1679041390,"creation_date":1678981300,"last_edit_date":1678986845,"question_id":75758455,"share_link":"https://stackoverflow.com/q/75758455","body_markdown":"I am trying to run a custom CQL using Spring Data Neo4j. I believe I have most of the code working but I am getting a **null** value. Below is the code I have so far;\r\n\r\n**.properties:**\r\n\r\n    spring.neo4j.uri=bolt://localhost:9486\r\n    spring.neo4j.authentication.username=neo4j\r\n    spring.neo4j.authentication.password=password\r\n    logging.level.org.springframework.data.neo4j=DEBUG\r\n\r\n**pom.xml**\r\n \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-neo4j&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;!--        &lt;dependency&gt;--&gt;\r\n    &lt;!--            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;--&gt;\r\n    &lt;!--            &lt;artifactId&gt;spring-data-neo4j&lt;/artifactId&gt;--&gt;\r\n    &lt;!--        &lt;/dependency&gt;--&gt;\r\n\r\n**Entity class**\r\n\r\n    @Node(&quot;Job&quot;)\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Data\r\n    public class Children {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private long id;\r\n        private ArrayList&lt;Children&gt; children;\r\n        private Text text;\r\n    \r\n    \r\n        @Getter\r\n        @Setter\r\n        public static class Text {\r\n            public String name;\r\n        }\r\n    }\r\n\r\n**Repository**\r\n\r\n    import com.horsefly.analyticsapi.model.node4j.Children;\r\n    import org.springframework.data.neo4j.repository.Neo4jRepository;\r\n    import org.springframework.data.neo4j.repository.query.Query;\r\n    import org.springframework.data.repository.query.Param;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface ChildrenRepository extends Neo4jRepository&lt;Children, Long&gt; {\r\n    \r\n        @Query(&quot;MATCH (j0:Job {Position: &#39;supervisor&#39;, jobCountryCode:&#39;uk&#39;}) WHERE j0.id=1 RETURN {text:{name: j0.Position}, children: []} AS Tree&quot;)\r\n        Children cqlTest();\r\n    \r\n    }\r\n\r\n**Component**\r\n\r\n    @Component\r\n    public class Neo4jBuilder {\r\n    \r\n        @Autowired\r\n        private ChildrenRepository childrenRepository;\r\n    \r\n        public String getChildren() {\r\n    \r\n            return childrenRepository.cqlTest();\r\n    \r\n        }\r\n    }\r\n\r\nI am trying to log the query that I am sending via the property in .properties but I am not seeing anything interesting. \r\n\r\n    2023-03-16 15:29:51.980 DEBUG 17480 --- [           main] o.s.d.n.r.c.StartupLogger                : Bootstrapping reactive Neo4j repositories based on SDN v6.1.6 with Spring Data Commons v2.5.6 and Neo4j Driver v4.2.7-b09866e7932eff1844519ce1a75c0cfdc3c782b3.\r\n    2023-03-16 15:29:52.005 DEBUG 17480 --- [           main] o.s.d.n.r.c.StartupLogger                : Bootstrapping imperative Neo4j repositories based on SDN v6.1.6 with Spring Data Commons v2.5.6 and Neo4j Driver v4.2.7-b09866e7932eff1844519ce1a75c0cfdc3c782b3.\r\n\r\n\r\nAlso, I used both dependencies individually and did not see any difference. \r\n\r\nThe &quot;*cqlTest*&quot; function returns null. However, when I run the same query on the browser, I am seeing the below result. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/J1UwK.png\r\n\r\nI have a matching node (Job) and fields in the Children object but not sure why I am getting a null. Any help would be great. I tried **String** as the return type on the cqlTest() but no luck there as well\r\nThanks","link":"https://stackoverflow.com/questions/75758455/spring-data-neo4j-null-response","title":"Spring Data Neo4j - Null Response"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678982757,"post_id":75756156,"comment_id":133642354,"link":"https://stackoverflow.com/questions/75756156/node4j-notintransactionexception#comment133642354_75756156"}],"owner":{"reputation":9,"user_id":11714142,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a1da712df7c89c7e743672ad05464f81?s=256&d=identicon&r=PG","display_name":"KENLUVX","link":"https://stackoverflow.com/users/11714142/kenluvx"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678979369,"creation_date":1678969077,"last_edit_date":1678979369,"question_id":75756156,"share_link":"https://stackoverflow.com/q/75756156","body_markdown":"I am learning Cypher queries and have encountered an exception:\r\n\r\n    Exception in thread &quot;main&quot; org.neo4j.graphdb.NotInTransactionException: The transaction has been closed.\r\n     \tat org.neo4j.kernel.impl.coreapi.TransactionImpl.checkInTransaction(TransactionImpl.java:503)\r\n     \tat org.neo4j.kernel.impl.coreapi.TransactionImpl.kernelTransaction(TransactionImpl.java:358)\r\n     \tat org.neo4j.kernel.impl.core.NodeEntity.getProperty(NodeEntity.java:237)\r\n     \tat org.example.Main.main(Main.java:59)\r\n\r\nMy code is as below. Exception occurs at this line:\r\n\r\n&gt;  System.out.print( firstNode.getProperty( &quot;message&quot; ) );\r\n\r\n    package org.example;\r\n    \r\n    import org.neo4j.dbms.api.DatabaseManagementService;\r\n    import org.neo4j.dbms.api.DatabaseManagementServiceBuilder;\r\n    import org.neo4j.graphdb.GraphDatabaseService;\r\n    import org.neo4j.graphdb.Node;\r\n    import org.neo4j.graphdb.Relationship;\r\n    import org.neo4j.graphdb.RelationshipType;\r\n    import org.neo4j.graphdb.Transaction;\r\n    \r\n    import java.io.IOException;\r\n    import java.nio.file.Files;\r\n    \r\n    import static org.neo4j.configuration.GraphDatabaseSettings.DEFAULT_DATABASE_NAME;\r\n    \r\n    public class Main {\r\n      private enum RelTypes implements RelationshipType\r\n      {\r\n        KNOWS\r\n      }\r\n       private static DatabaseManagementService managementService;\r\n      private static void registerShutdownHook( final DatabaseManagementService managementService )\r\n      {\r\n        // Registers a shutdown hook for the Neo4j instance so that it\r\n        // shuts down nicely when the VM exits (even if you &quot;Ctrl-C&quot; the\r\n        // running application).\r\n        Runtime.getRuntime().addShutdownHook( new Thread()\r\n        {\r\n          @Override\r\n          public void run()\r\n          {\r\n            managementService.shutdown();\r\n          }\r\n        } );\r\n      }\r\n      public static void main(String[] args) throws IOException {\r\n        GraphDatabaseService graphDb;\r\n        Node firstNode;\r\n        Node secondNode;\r\n        Relationship relationship;\r\n        managementService = new DatabaseManagementServiceBuilder(Files.\r\n                createTempDirectory(&quot;neo4j&quot;).toFile().toPath()).build();\r\n        graphDb = managementService.database( DEFAULT_DATABASE_NAME );\r\n        registerShutdownHook( managementService );\r\n    \r\n        try ( Transaction tx = graphDb.beginTx() )\r\n        {\r\n          //few nodes\r\n          firstNode = tx.createNode();\r\n          firstNode.setProperty( &quot;message&quot;, &quot;Hello, &quot; );\r\n          secondNode = tx.createNode();\r\n          secondNode.setProperty( &quot;message&quot;, &quot;World!&quot; );\r\n    \r\n          relationship = firstNode.createRelationshipTo( secondNode, RelTypes.KNOWS );\r\n          relationship.setProperty( &quot;message&quot;, &quot;brave Neo4j &quot; );\r\n          tx.commit();\r\n        }\r\n        /* output */\r\n        System.out.print( firstNode.getProperty( &quot;message&quot; ) );\r\n        System.out.print( relationship.getProperty( &quot;message&quot; ) );\r\n        System.out.print( secondNode.getProperty( &quot;message&quot; ) );\r\n      }\r\n    }\r\n\r\nI have tried moving the output lines into the `try` clause.","link":"https://stackoverflow.com/questions/75756156/node4j-notintransactionexception","title":"Node4j NotInTransactionException"},{"tags":["neo4j","cypher","memgraphdb","opencypher"],"answers":[{"comments":[{"owner":{"reputation":10111,"user_id":506522,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/5kwS1.png?s=256&g=1","display_name":"Jeroen De Dauw","link":"https://stackoverflow.com/users/506522/jeroen-de-dauw"},"edited":false,"score":1,"creation_date":1678975314,"post_id":75750960,"comment_id":133639880,"link":"https://stackoverflow.com/questions/75750819/update-neo4j-node-labels-via-cypher/75750960#comment133639880_75750960"},{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"reply_to_user":{"reputation":10111,"user_id":506522,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/5kwS1.png?s=256&g=1","display_name":"Jeroen De Dauw","link":"https://stackoverflow.com/users/506522/jeroen-de-dauw"},"edited":false,"score":0,"creation_date":1678987788,"post_id":75750960,"comment_id":133643897,"link":"https://stackoverflow.com/questions/75750819/update-neo4j-node-labels-via-cypher/75750960#comment133643897_75750960"}],"tags":[],"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"last_editor":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678987770,"last_edit_date":1678987770,"creation_date":1678923077,"answer_id":75750960,"question_id":75750819,"share_link":"https://stackoverflow.com/a/75750960","body_markdown":"If you have no idea on the old labels to remove then you can collect all labels on that node and use the apoc function removeLabels to remove the labels.  Then assign new labels on this node.\r\n\r\n    // find nodes\r\n    MATCH (n:Person)\r\n    // get all labels attached to these nodes (except Person itself)\r\n    WITH n, [lbl in labels(n) WHERE lbl &lt;&gt; &#39;Person&#39; | lbl] as lbls\r\n    // call apoc function removeLabels using the list of nodes and labels to remove\r\n    CALL apoc.create.removeLabels(n, lbls) YIELD node  \r\n    // assign new labels to these nodes\r\n    SET node:FOO:BAR","link":"https://stackoverflow.com/questions/75750819/update-neo4j-node-labels-via-cypher/75750960#75750960","title":"Update Neo4j node labels via Cypher"},{"tags":[],"owner":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678923585,"creation_date":1678923585,"answer_id":75750988,"question_id":75750819,"share_link":"https://stackoverflow.com/a/75750988","body_markdown":"You can use apoc functions to add and remove labels when they are in a list:\r\n```\r\ncreate (t:Temp:Foo)\r\nwith [&quot;Temper&quot;, &quot;Tempest&quot;] as newlabels\r\nmatch (t:Temp)\r\nwith t, newlabels, labels(t) as oldlabels\r\ncall apoc.create.addLabels(t, newlabels)\r\nyield node\r\nwith node as t, oldlabels\r\ncall apoc.create.removeLabels(t, oldlabels)\r\nyield node\r\nreturn node\r\n```\r\nThat will create a new node with labels Test and Foo, add the labels Temper and Tempest, and remove the existing labels.\r\n\r\nThere is also:\r\n```\r\nmatch (t:Temp)\r\nwith collect(t) as mynodes\r\ncall apoc.refactor.rename.label(&quot;Temp&quot;, &quot;Tempest&quot;, mynodes)\r\nyield total\r\nreturn total\r\n```\r\nThat one does a 1-for-1 replacement of labels though, so it doesn&#39;t sound like what you are looking for.","link":"https://stackoverflow.com/questions/75750819/update-neo4j-node-labels-via-cypher/75750988#75750988","title":"Update Neo4j node labels via Cypher"}],"owner":{"reputation":10111,"user_id":506522,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/5kwS1.png?s=256&g=1","display_name":"Jeroen De Dauw","link":"https://stackoverflow.com/users/506522/jeroen-de-dauw"},"last_editor":{"reputation":10111,"user_id":506522,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/5kwS1.png?s=256&g=1","display_name":"Jeroen De Dauw","link":"https://stackoverflow.com/users/506522/jeroen-de-dauw"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1678987770,"creation_date":1678921204,"last_edit_date":1678975238,"question_id":75750819,"share_link":"https://stackoverflow.com/q/75750819","body_markdown":"Is there a clean way to replace a node&#39;s labels with a new list of labels?\r\n\r\nYou can replace properties with the Cypher below. Is there something similar for labels?\r\n\r\n    MERGE (n)\r\n    SET n = {foo: 42, bar: 69}\r\n\r\nI am aware that you can set several labels with the below Cypher. This however does not remove labels that are not in the new list.\r\n\r\n    MERGE (n)\r\n    SET n:Foo:Bar\r\n\r\nMy code that executes the Cypher query gets a new list of labels and does not know what the old labels are.","link":"https://stackoverflow.com/questions/75750819/update-neo4j-node-labels-via-cypher","title":"Update Neo4j node labels via Cypher"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1678878144,"post_id":75743172,"comment_id":133617194,"link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path#comment133617194_75743172"}],"answers":[{"comments":[{"owner":{"reputation":600,"user_id":9195823,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ab0472400651a9e20a6008350c1a65b1?s=256&d=identicon&r=PG","display_name":"Tix","link":"https://stackoverflow.com/users/9195823/tix"},"edited":false,"score":0,"creation_date":1678884404,"post_id":75743841,"comment_id":133619013,"link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path/75743841#comment133619013_75743841"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"reply_to_user":{"reputation":600,"user_id":9195823,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ab0472400651a9e20a6008350c1a65b1?s=256&d=identicon&r=PG","display_name":"Tix","link":"https://stackoverflow.com/users/9195823/tix"},"edited":false,"score":0,"creation_date":1678889311,"post_id":75743841,"comment_id":133620588,"link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path/75743841#comment133620588_75743841"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678904892,"post_id":75743841,"comment_id":133625450,"link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path/75743841#comment133625450_75743841"}],"tags":[],"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"last_editor":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678937250,"last_edit_date":1678937250,"creation_date":1678878148,"answer_id":75743841,"question_id":75743172,"share_link":"https://stackoverflow.com/a/75743841","body_markdown":"There are two cases I can think of.\r\n\r\na. `SECOND` is the last relationship linked to b. Something like this:\r\n\r\n    (a)-[:FIRST]-&gt;()-[:SECOND]-&gt;()-[:SECOND]-&gt;()-[:SECOND]-&gt;(b)\r\n\r\nFor this, you can try this query:\r\n\r\n    MATCH path=(a)-[r:FIRST|SECOND*1..]-&gt;()-[:SECOND]-&gt;(b)\r\n    WHERE SIZE([r1 in relationships(path) WHERE type(r1) = &#39;SECOND&#39; | r1]) = 3\r\n    RETURN path\r\n\r\nIn this query, I fix the last relationship linked to `b` is of type &#39;SECOND&#39;, and we check whether the count of `SECOND` relationships is 3.\r\n\r\nb. Another case is, any relationship can be linked to `b` at the end of the path, provided you have 3 `SECOND` relations on the path. Something like this:\r\n\r\n    (a)-[:SECOND]-&gt;()-[:SECOND]-&gt;()-[:SECOND]-&gt;()-[:FIRST]-&gt;(b)\r\n\r\nFor this case, try the following query:\r\n\r\n     MATCH path=(a)-[r:FIRST|SECOND*1..]-&gt;(b)\r\n     WHERE SIZE([r1 in relationships(path) WHERE type(r1) = &#39;SECOND&#39; | r1]) = 3\r\n     RETURN path\r\n\r\nAs noted by @cybersam in the comments, to avoid out-of-memory errors, you should put an upper bound in the pattern match, which suits your purpose. Also, if upto 3 `SECOND` relationships are required, then this query will work:\r\n\r\n     MATCH path=(a)-[r:FIRST|SECOND*1..10]-&gt;(b)\r\n     WHERE SIZE([r1 in relationships(path) WHERE type(r1) = &#39;SECOND&#39; | r1]) &lt;= 3\r\n     RETURN path\r\n\r\nNote, I have provided an upper limit of 10 here, you can modify it accordingly.","link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path/75743841#75743841","title":"Neo4j Cypher, exclude relationship from counting in variable-length path"},{"comments":[{"owner":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"edited":false,"score":0,"creation_date":1679095568,"post_id":75762951,"comment_id":133665845,"link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path/75762951#comment133665845_75762951"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"edited":false,"score":0,"creation_date":1679099516,"post_id":75762951,"comment_id":133666263,"link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path/75762951#comment133666263_75762951"},{"owner":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"edited":false,"score":0,"creation_date":1679152778,"post_id":75762951,"comment_id":133672075,"link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path/75762951#comment133672075_75762951"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679207918,"last_edit_date":1679207918,"creation_date":1679015473,"answer_id":75762951,"question_id":75743172,"share_link":"https://stackoverflow.com/a/75762951","body_markdown":"This turned out to be a very hard problem. Your use case does not allow there to be an upper bound on the variable-length path pattern (which is normally [best practice](https://stackoverflow.com/questions/61663220/cypher-unlimited-path-length-and-large-path-length-queries-hang/61666860#61666860)), because the first (or second, or third) `SECOND` relationship could appear after *any number* of relationships.\r\n\r\nAlthough the following query does not impose any upper bounds, it also does not attempt to extend a subpath any further after finding each `SECOND` relationship. So it **avoids needlessly searching to the end of every possible path**. The `FIRST*0..` syntax use a [zero lower bound](https://neo4j.com/docs/cypher-manual/current/clauses/match/#zero-length-paths) and means &quot;match paths having 0 or more consecutive `FIRST` relationships&quot;.\r\n\r\nThis query is able to find all paths with up to 3 `SECOND` relationships by chaining together 3 separate subpath queries, and then using the APOC method [apoc.path.combine](https://neo4j.com/labs/apoc/4.1/overview/apoc.path/apoc.path.combine/) to stitch together the subpaths into the final full paths. The `NULL` checks are used to ignore subpaths that found no match.\r\n\r\n    MATCH (a:Test {testid: 1})\r\n    OPTIONAL MATCH p1=(a)-[:FIRST*0..]-&gt;()-[:SECOND]-&gt;(b)\r\n    OPTIONAL MATCH p2=(b)-[:FIRST*0..]-&gt;()-[:SECOND]-&gt;(c)\r\n    OPTIONAL MATCH p3=(c)-[:FIRST*0..]-&gt;()-[:SECOND]-&gt;(d)\r\n    WITH p1, p3,\r\n      CASE WHEN p2 IS NOT NULL THEN apoc.path.combine(p1, p2) END AS p12\r\n    WITH p1, p12,\r\n      CASE WHEN p3 IS NOT NULL THEN apoc.path.combine(p12, p3) END AS p123\r\n    WITH (COLLECT(p1) + COLLECT(p12) + COLLECT(p123)) AS paths\r\n    UNWIND paths AS p\r\n    RETURN p\r\n\r\nCaveat: this query is not efficient unless most paths contain at least 3 `SECOND` relationships. If that is not what your graph looks like, then create a new question providing details of your data model and how densely it is populated with `SECOND` nodes. Your data model may need to be modified.","link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path/75762951#75762951","title":"Neo4j Cypher, exclude relationship from counting in variable-length path"}],"owner":{"reputation":600,"user_id":9195823,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ab0472400651a9e20a6008350c1a65b1?s=256&d=identicon&r=PG","display_name":"Tix","link":"https://stackoverflow.com/users/9195823/tix"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1679207918,"creation_date":1678874612,"last_edit_date":1678903051,"question_id":75743172,"share_link":"https://stackoverflow.com/q/75743172","body_markdown":"We can limit a variable-length `FIRST|SECOND` path using this pattern:\r\n\r\n    (a)-[r:FIRST|SECOND*..3]-&gt;(b)\r\n\r\nBut what is the best way to return `FIRST|SECOND` paths that contain up to 3 `SECOND` relationships?","link":"https://stackoverflow.com/questions/75743172/neo4j-cypher-exclude-relationship-from-counting-in-variable-length-path","title":"Neo4j Cypher, exclude relationship from counting in variable-length path"},{"tags":["python","neo4j","py2neo","knowledge-graph"],"answers":[{"comments":[{"owner":{"reputation":11,"user_id":21394741,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/63bd629d03173759fba7f0319da72d91?s=256&d=identicon&r=PG","display_name":"lambda","link":"https://stackoverflow.com/users/21394741/lambda"},"edited":false,"score":1,"creation_date":1678880503,"post_id":75732963,"comment_id":133617875,"link":"https://stackoverflow.com/questions/75730711/py2neo-create-keyerror/75732963#comment133617875_75732963"}],"tags":[],"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678795761,"creation_date":1678795761,"answer_id":75732963,"question_id":75730711,"share_link":"https://stackoverflow.com/a/75732963","body_markdown":"Your code works well when I run it so something is not working on your neo4j server when calling it. Below is the code from py2neo http.py (&quot;D:\\python3.8\\lib\\site-packages\\py2neo\\client\\http.py&quot;)\r\n\r\n                   # connecting to your graph\r\n    198            r = self._post(HTTPTransactionRef.begin_uri(graph_name))\r\n                   # converting the response into json format\r\n    199            rs = HTTPResponse.from_json(r.status, r.data.decode(&quot;utf-8&quot;))\r\n                   # get the path of the header location\r\n    200            location_path = urlsplit(r.headers[&quot;Location&quot;]).path\r\n\r\nThus the http response has no header location, and raising an error.\r\n\r\nTry using http://localhost:7474/ instead of http://127.0.0.1:7474/.  ","link":"https://stackoverflow.com/questions/75730711/py2neo-create-keyerror/75732963#75732963","title":"py2neo create keyError"}],"owner":{"reputation":11,"user_id":21394741,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/63bd629d03173759fba7f0319da72d91?s=256&d=identicon&r=PG","display_name":"lambda","link":"https://stackoverflow.com/users/21394741/lambda"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1678795761,"creation_date":1678782889,"question_id":75730711,"share_link":"https://stackoverflow.com/q/75730711","body_markdown":"I&#39;m a newbe with py2neo.\r\nTrying to create a KG which includes some nodes like\r\n\r\n```\r\ngraph = Graph(&#39;http://127.0.0.1:7474/&#39;, name=&quot;test&quot;, password=&quot;12345678&quot;)\r\nnode1 = Node(&#39;Person&#39;, name=&#39;Bob&#39;)\r\ngraph.create(node1)\r\n```\r\n\r\nbut I&#39;m getting a `KeyError: &#39;location&#39;`, in detail:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File &quot;D:\\PyCharm-workspace\\learn_Neo4j\\test.py&quot;, line 23, in &lt;module&gt;\r\n    graph.create(node4)\r\n  File &quot;D:\\python3.8\\lib\\site-packages\\py2neo\\database.py&quot;, line 591, in create\r\n    self.update(lambda tx: tx.create(subgraph))\r\n  File &quot;D:\\python3.8\\lib\\site-packages\\py2neo\\database.py&quot;, line 445, in update\r\n    self._update(cypher, timeout=timeout)\r\n  File &quot;D:\\python3.8\\lib\\site-packages\\py2neo\\database.py&quot;, line 467, in _update\r\n    tx = self.begin(\r\n  File &quot;D:\\python3.8\\lib\\site-packages\\py2neo\\database.py&quot;, line 351, in begin\r\n    return Transaction(self, autocommit=False, readonly=readonly,\r\n  File &quot;D:\\python3.8\\lib\\site-packages\\py2neo\\database.py&quot;, line 915, in __init__\r\n    self._ref = self._connector.begin(self.graph.name, readonly=readonly,\r\n  File &quot;D:\\python3.8\\lib\\site-packages\\py2neo\\client\\__init__.py&quot;, line 1359, in begin\r\n    return cx.begin(graph_name, readonly=readonly,\r\n  File &quot;D:\\python3.8\\lib\\site-packages\\py2neo\\client\\http.py&quot;, line 200, in begin\r\n    location_path = urlsplit(r.headers[&quot;Location&quot;]).path\r\n  File &quot;D:\\python3.8\\lib\\site-packages\\urllib3\\_collections.py&quot;, line 157, in __getitem__\r\n    val = self._container[key.lower()]\r\nKeyError: &#39;location&#39;\r\n```\r\n\r\n\r\nHere are the whole codes:\r\n\r\n```\r\nfrom py2neo import Graph, Node, Relationship, NodeMatcher\r\n\r\n\r\ngraph = Graph(&#39;http://127.0.0.1:7474/&#39;, name=&quot;test&quot;, password=&quot;12345678&quot;)\r\n\r\nnode1 = Node(&#39;Person&#39;, name=&#39;Bob&#39;)\r\nnode2 = Node(&#39;Person&#39;, name=&#39;Alice&#39;)\r\nnode3 = Node(&#39;animal&#39;, name=&#39;cat&#39;)\r\nnode4 = Node(&#39;animal&#39;, name=&#39;dog&#39;)\r\n\r\nr1 = Relationship(node2, &#39;know&#39;, node1)\r\nr2 = Relationship(node1, &#39;know&#39;, node3)\r\nr3 = Relationship(node2, &#39;has&#39;, node3)\r\nr4 = Relationship(node2, &#39;has&#39;, node4)\r\n\r\ngraph.create(node1)\r\ngraph.create(node2)\r\ngraph.create(node3)\r\ngraph.create(node4)\r\ngraph.create(r1)\r\ngraph.create(r2)\r\ngraph.create(r3)\r\ngraph.create(r4)\r\n\r\nmatcher = NodeMatcher(graph)\r\nprint(list(matcher.match(&#39;animal&#39;)))\r\n```\r\n\r\n\r\n\r\nPlease tell me the reason, thank you in advance.","link":"https://stackoverflow.com/questions/75730711/py2neo-create-keyerror","title":"py2neo create keyError"},{"tags":["neo4j","graph-databases"],"comments":[{"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"edited":false,"score":1,"creation_date":1678820512,"post_id":75730632,"comment_id":133606711,"link":"https://stackoverflow.com/questions/75730632/which-neo4j-driver-is-more-performant-has-better-support-golang-or-python#comment133606711_75730632"}],"owner":{"reputation":9,"user_id":2582798,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XNhld.jpg?s=256&g=1","display_name":"Robin Bruce","link":"https://stackoverflow.com/users/2582798/robin-bruce"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1678782436,"creation_date":1678782436,"question_id":75730632,"share_link":"https://stackoverflow.com/q/75730632","body_markdown":"I have a month-old hobby project to test out some ideas that I&#39;d like to later apply to a real, fairly large-scale, production environment. I&#39;m new to both graph programming and neo4j. \r\n\r\nPython is the official language we use for similar tooling currently, with golang allowed only by exception. However, there is a lot of momentum towards golang with the new hires. I am in a position to influence this decision - the language we use in this project would be important in that.\r\n\r\nSo, without having a language holy war - are there any practical neo4j reasons to prefer Python or Golang to interface with neo4j?\r\n\r\nIn my system, I want to scale to to 1 million nodes with a lot of interconnectivity. Query performance is the determining factor to how usable this system will be - obviously it&#39;s not the biggest graph in history - But I&#39;ll need to be able to run a series of queries across the whole graph before each change to the graph (representing a large, heterogeneous, tightly-coupled application environment and its deployment plane) - so it&#39;s not real-time, but it (the series of queries) has to converge in the time that a human operator is itching to make a potentially-critical change to the environment.\r\n\r\nSearched the history of the neo4j tag for a similar question - didn’t find my question.","link":"https://stackoverflow.com/questions/75730632/which-neo4j-driver-is-more-performant-has-better-support-golang-or-python","title":"Which neo4j driver is more performant / has better support, golang or python?"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":1,"creation_date":1678814812,"post_id":75729975,"comment_id":133605164,"link":"https://stackoverflow.com/questions/75729975/how-to-create-unique-constraint-on-relationship#comment133605164_75729975"},{"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678857392,"post_id":75729975,"comment_id":133612655,"link":"https://stackoverflow.com/questions/75729975/how-to-create-unique-constraint-on-relationship#comment133612655_75729975"}],"answers":[{"comments":[{"owner":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"edited":false,"score":0,"creation_date":1678905004,"post_id":75742234,"comment_id":133625484,"link":"https://stackoverflow.com/questions/75729975/how-to-create-unique-constraint-on-relationship/75742234#comment133625484_75742234"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"edited":false,"score":2,"creation_date":1678905708,"post_id":75742234,"comment_id":133625660,"link":"https://stackoverflow.com/questions/75729975/how-to-create-unique-constraint-on-relationship/75742234#comment133625660_75742234"},{"owner":{"reputation":537,"user_id":4024409,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-4JS5nVp4cYs/AAAAAAAAAAI/AAAAAAAAAAA/9dswBlPXPdw/photo.jpg?sz=256","display_name":"Vincent Rupp","link":"https://stackoverflow.com/users/4024409/vincent-rupp"},"edited":false,"score":0,"creation_date":1678912363,"post_id":75742234,"comment_id":133627238,"link":"https://stackoverflow.com/questions/75729975/how-to-create-unique-constraint-on-relationship/75742234#comment133627238_75742234"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678905533,"last_edit_date":1678905533,"creation_date":1678869294,"answer_id":75742234,"question_id":75729975,"share_link":"https://stackoverflow.com/a/75742234","body_markdown":"There is no way to create a `CONSTRAINT` that only allows at most one `CONTAINS` relationship between 2 specific `Folder` and `Item` nodes.\r\n\r\nAs a workaround, you can use `MERGE` instead of `CREATE` whenever you want to create a `CONTAINS`.\r\n\r\n**BUT: you must carefully read the [documentation on `MERGE`](https://neo4j.com/docs/cypher-manual/current/clauses/merge). It is easy to get unexpected results if you do not understand how to use it properly.**\r\n\r\nSample snippet:\r\n\r\n    ...\r\n    // Assumed: `folder` and `item` are defined earlier in query\r\n    MERGE (folder)-[:CONTAINS]-&gt;(item)\r\n    ...","link":"https://stackoverflow.com/questions/75729975/how-to-create-unique-constraint-on-relationship/75742234#75742234","title":"How to create unique CONSTRAINT on relationship?"}],"owner":{"reputation":6349,"user_id":583367,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/3e0c104f28bb57676287ba630707410a?s=256&d=identicon&r=PG","display_name":"Arjun","link":"https://stackoverflow.com/users/583367/arjun"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678905533,"creation_date":1678777446,"question_id":75729975,"share_link":"https://stackoverflow.com/q/75729975","body_markdown":"How to create UNIQUE CONSTRAINT to relationship by neo4j(v4.4 or newer) cypher?\r\n\r\nBasically, I have FOLDER node and few ITEM nodes, I want to make sure that there is only one CONTAINS relationship from FOLDER to ITEM, even if multiple threads try creating the same relationship.\r\n\r\nNote: I found some old threads(dated 2014), but, re-asking this to find if there is a better way of handling it in newer versions.\r\n\r\nThanks In Advance!","link":"https://stackoverflow.com/questions/75729975/how-to-create-unique-constraint-on-relationship","title":"How to create unique CONSTRAINT on relationship?"},{"tags":["graph","neo4j","cypher","graph-theory","pagerank"],"answers":[{"tags":[],"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678894580,"creation_date":1678894580,"answer_id":75746916,"question_id":75728735,"share_link":"https://stackoverflow.com/a/75746916","body_markdown":"Below is the query to put the number of reviews done by that user. It will put a new property &#39;weight&#39; on REVIEWS based on the number of times that user posted a review on any beer. \r\n\r\n    MATCH (u:USER)\r\n    WITH u\r\n    MATCH (u)&lt;-[p:POSTED]-(r:REVIEWS)&lt;-[rw:REVIEWED]-(b:BEERS)\r\n    WITH u, count(r) as cnt, collect(distinct r) as reviews\r\n    UNWIND reviews as r\r\n    SET r.weight =  cnt\r\n\r\n\r\nFor example:\r\n\r\n    ╒════════════════════════════════╕\r\n    │&quot;review&quot;                        │\r\n    ╞════════════════════════════════╡\r\n    │{&quot;review&quot;:&quot;review11&quot;,&quot;weight&quot;:2}│\r\n    ├────────────────────────────────┤\r\n    │{&quot;review&quot;:&quot;review12&quot;,&quot;weight&quot;:2}│\r\n    ├────────────────────────────────┤\r\n    │{&quot;review&quot;:&quot;review21&quot;,&quot;weight&quot;:1}│\r\n    ├────────────────────────────────┤\r\n    │{&quot;review&quot;:&quot;review32&quot;,&quot;weight&quot;:1}│\r\n    └────────────────────────────────┘","link":"https://stackoverflow.com/questions/75728735/how-to-create-a-weighted-vertices-in-cypher-for-graph-database/75746916#75746916","title":"How to create a weighted vertices in Cypher for Graph Database?"}],"owner":{"reputation":13,"user_id":20603306,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b56b98bfe21c6ce842f4341d4ff11b9b?s=256&d=identicon&r=PG","display_name":"KollerBy","link":"https://stackoverflow.com/users/20603306/kollerby"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75746916,"answer_count":1,"score":1,"last_activity_date":1678894580,"creation_date":1678762872,"question_id":75728735,"share_link":"https://stackoverflow.com/q/75728735","body_markdown":"I am trying to understand which user has the most influence based on the amount of the reviews that was done by the user, i user the following code to project my graph\r\n\r\n```\r\nCALL gds.graph.project.cypher(\r\n            &#39;last_try&#39;,\r\n            &#39;match (n) WHERE (n:USER) OR (n:REVIEWS) return id(n) AS id&#39;,\r\n            &#39;MATCH (u:USER)&lt;-[:POSTED]-(r:REVIEWS)&lt;-[:REVIEWED]-(b:BEERS)\r\n            RETURN id(u) AS source, id(b) AS target, count(distinct r) as weight&#39;\r\n            )\r\n```\r\n\r\nI am trying to create a weight variable but when i run it through the algorithm, i do not receive anything, or ai receive static values\r\n\r\n```\r\nCALL gds.pageRank.stream(&#39;last_try&#39;, {relationshipWeightProperty:&#39;weight&#39;})\r\n            YIELD nodeId, score\r\n            RETURN gds.util.asNode(nodeId).username AS name, score\r\n            ORDER BY score desc\r\n            limit 5\r\n    \r\n```\r\n\r\nAlso here is the algorithm that i am trying to run but unsuccessfully i can not get a logic result\r\n\r\nI tried to implement different solutions, but i did not manage to find any solution, i tried to count the attributes of the reviews  made by those users, and the hard part is to understand what to attribute to the weight parameter.","link":"https://stackoverflow.com/questions/75728735/how-to-create-a-weighted-vertices-in-cypher-for-graph-database","title":"How to create a weighted vertices in Cypher for Graph Database?"},{"tags":["database","graph","neo4j","cypher","graph-databases"],"comments":[{"owner":{"reputation":2187,"user_id":5475219,"user_type":"registered","profile_image":"https://i.stack.imgur.com/epI9G.jpg?s=256&g=1","display_name":"Brakebein","link":"https://stackoverflow.com/users/5475219/brakebein"},"edited":false,"score":1,"creation_date":1679065275,"post_id":75728251,"comment_id":133659278,"link":"https://stackoverflow.com/questions/75728251/multi-node-graph-projection-gds-graph-project-cypher-for-similarity-algoritm-in#comment133659278_75728251"},{"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"edited":false,"score":0,"creation_date":1679162567,"post_id":75728251,"comment_id":133673741,"link":"https://stackoverflow.com/questions/75728251/multi-node-graph-projection-gds-graph-project-cypher-for-similarity-algoritm-in#comment133673741_75728251"},{"owner":{"reputation":13,"user_id":20603306,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b56b98bfe21c6ce842f4341d4ff11b9b?s=256&d=identicon&r=PG","display_name":"KollerBy","link":"https://stackoverflow.com/users/20603306/kollerby"},"edited":false,"score":0,"creation_date":1679227416,"post_id":75728251,"comment_id":133680036,"link":"https://stackoverflow.com/questions/75728251/multi-node-graph-projection-gds-graph-project-cypher-for-similarity-algoritm-in#comment133680036_75728251"}],"owner":{"reputation":13,"user_id":20603306,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b56b98bfe21c6ce842f4341d4ff11b9b?s=256&d=identicon&r=PG","display_name":"KollerBy","link":"https://stackoverflow.com/users/20603306/kollerby"},"last_editor":{"reputation":725507,"user_id":13302,"user_type":"registered","accept_rate":99,"profile_image":"https://www.gravatar.com/avatar/b4779212f57ff2e9549ea90a4499c2d7?s=256&d=identicon&r=PG","display_name":"marc_s","link":"https://stackoverflow.com/users/13302/marc-s"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678978827,"creation_date":1678756212,"last_edit_date":1678978827,"question_id":75728251,"share_link":"https://stackoverflow.com/q/75728251","body_markdown":"I want to understand which beers have the similar reviews with a specific beers, and for that i am using Graph db, I am using cypher to queries the data. I am trying to project a graph and run in through the algorithm to receive similar nodes.\r\n\r\n```\r\nCALL gds.graph.project.cypher(\r\n&#39;my&#39;, \r\n&quot;MATCH (n) where head(Labels(n))=&#39;BEERS&#39; or head(Labels(n))=&#39;REVIEWS&#39; \r\nRETURN id(n) AS id&quot;,\r\n&quot;MATCH (b:BEERS {name:&#39;Super Bock Stout&#39;})-[n:REVIEWED]-&gt;(r:REVIEWS)-[]-&gt;(u:USER)&lt;-[]-(r1:REVIEWS)&lt;-[]-(b1:BEERS)\r\nWHERE id(b)&lt;&gt;id(b1)\r\nAND r.look = r1.look\r\nAND r.taste = r1.taste\r\nAND r.overall = r1.overall\r\nAND r.smell = r1.smell\r\nAND r.score = r1.score\r\nAND r.feel = r1.feel\r\nRETURN id(r) AS source, id(r1) AS target, count(*)&quot;)\r\n```\r\n\r\nI try to build the projection using this code, I understood that cypher similarity algorithm decide the similarity base on common nodes that both source and target are connected, I created the relationship accordingly to that but still after running through the algorithm I received empty brackets \r\n\r\n```\r\nCALL gds.graph.project.cypher(\r\n&#39;my1&#39;, \r\n&quot;MATCH (n) where head(Labels(n))=&#39;BEERS&#39; or head(Labels(n))=&#39;REVIEWS&#39; \r\nRETURN id(n) AS id&quot;,\r\n&quot;MATCH (b:BEERS)-[n:REVIEWED]-&gt;(r:REVIEWS)\r\nRETURN id(b) AS source, id(r) AS target&quot;)\r\n```\r\n\r\nThis is the algorithm that I am using. It would be really helpful if someone could explain what I am doing wrong.\r\n\r\nI tried to do different approaches, different nodes, different relationships between nodes, I tried to apply different filter, but unfortunately not success until now.","link":"https://stackoverflow.com/questions/75728251/multi-node-graph-projection-gds-graph-project-cypher-for-similarity-algoritm-in","title":"Multi node graph projection gds.graph.project.cypher for similarity algoritm in cypher"},{"tags":["python","neo4j","cypher"],"comments":[{"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"edited":false,"score":2,"creation_date":1678736697,"post_id":75726190,"comment_id":133588418,"link":"https://stackoverflow.com/questions/75726190/adding-graphs-in-the-neo4j-browser#comment133588418_75726190"},{"owner":{"reputation":25,"user_id":20505088,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c24d68e787cad4af43b50ab542895a91?s=256&d=identicon&r=PG&f=1","display_name":"kamalika ray","link":"https://stackoverflow.com/users/20505088/kamalika-ray"},"reply_to_user":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"edited":false,"score":0,"creation_date":1678784952,"post_id":75726190,"comment_id":133596209,"link":"https://stackoverflow.com/questions/75726190/adding-graphs-in-the-neo4j-browser#comment133596209_75726190"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678838988,"post_id":75726190,"comment_id":133610565,"link":"https://stackoverflow.com/questions/75726190/adding-graphs-in-the-neo4j-browser#comment133610565_75726190"}],"owner":{"reputation":25,"user_id":20505088,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c24d68e787cad4af43b50ab542895a91?s=256&d=identicon&r=PG&f=1","display_name":"kamalika ray","link":"https://stackoverflow.com/users/20505088/kamalika-ray"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1678735988,"creation_date":1678735988,"question_id":75726190,"share_link":"https://stackoverflow.com/q/75726190","body_markdown":"I am working with the Neo4j Browser. I have a csv file with edge list and other node properties in it. I want to upload it on Neo4j Browser and write queries to extract information. How can I do that using python? \r\n\r\nI know that using cypher queries I can add nodes and edges, but for a large graph, it is tedious to add to nodes and edges to Neo4j one-by-one. My browser looks like this. I am unable to find any way to add my graph to this.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hXIVr.png","link":"https://stackoverflow.com/questions/75726190/adding-graphs-in-the-neo4j-browser","title":"Adding graphs in the Neo4j browser"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678771798,"post_id":75724907,"comment_id":133593609,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133593609_75724907"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678785313,"post_id":75724907,"comment_id":133596328,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133596328_75724907"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678785639,"post_id":75724907,"comment_id":133596437,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133596437_75724907"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678786562,"post_id":75724907,"comment_id":133596712,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133596712_75724907"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678789497,"post_id":75724907,"comment_id":133597497,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133597497_75724907"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678793620,"post_id":75724907,"comment_id":133598602,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133598602_75724907"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678794386,"post_id":75724907,"comment_id":133598771,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133598771_75724907"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678871070,"post_id":75724907,"comment_id":133615313,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133615313_75724907"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"reply_to_user":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678882899,"post_id":75724907,"comment_id":133618577,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133618577_75724907"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":0,"creation_date":1678894301,"post_id":75724907,"comment_id":133622303,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig#comment133622303_75724907"}],"answers":[{"comments":[{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"edited":false,"score":0,"creation_date":1679045425,"post_id":75746861,"comment_id":133654068,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#comment133654068_75746861"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"edited":false,"score":0,"creation_date":1679046640,"post_id":75746861,"comment_id":133654373,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#comment133654373_75746861"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"reply_to_user":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"edited":false,"score":0,"creation_date":1679049893,"post_id":75746861,"comment_id":133655237,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#comment133655237_75746861"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"edited":false,"score":0,"creation_date":1679051180,"post_id":75746861,"comment_id":133655539,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#comment133655539_75746861"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"reply_to_user":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"edited":false,"score":0,"creation_date":1679053078,"post_id":75746861,"comment_id":133655948,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#comment133655948_75746861"},{"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"edited":false,"score":1,"creation_date":1679068668,"post_id":75746861,"comment_id":133660296,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#comment133660296_75746861"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"reply_to_user":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"edited":false,"score":0,"creation_date":1679069039,"post_id":75746861,"comment_id":133660394,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#comment133660394_75746861"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"reply_to_user":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"edited":false,"score":0,"creation_date":1679070261,"post_id":75746861,"comment_id":133660705,"link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#comment133660705_75746861"}],"tags":[],"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"last_editor":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679070224,"last_edit_date":1679070224,"creation_date":1678894285,"answer_id":75746861,"question_id":75724907,"share_link":"https://stackoverflow.com/a/75746861","body_markdown":"As per the graph, present in the picture, you can create a binary string, which will be a concatenation of the `order` properties of the relationships on the path, and use it for sorting, like this:\r\n\r\n    MATCH (a:A)\r\n    CALL apoc.path.expandConfig(a, {\r\n        relationshipFilter: &quot;child&quot;,\r\n        bfs: false,\r\n    })\r\n    YIELD path\r\n    WITH path, reduce(str = &#39;&#39;, r in relationships(path) | str + toString(r.order) ) as orders\r\n    RETURN path\r\n    ORDER BY orders\r\n    SKIP 0 LIMIT 40000;\r\n\r\nThe graph was created by the following query:\r\n\r\n    MERGE (a:A)-[:child{order: 0}]-&gt;(b:B)-[:child{order: 0}]-&gt;(c:C)\r\n    MERGE (b)-[:child{order: 1}]-&gt;(d:D)\r\n    MERGE (a)-[:child{order:1}]-&gt;(e:E)\r\n\r\nIf you want to order using integer try this:\r\n\r\n    MATCH (a:A)\r\n    CALL apoc.path.expandConfig(a, {\r\n        relationshipFilter: &quot;child&quot;,\r\n        bfs: false,\r\n    })\r\n    YIELD path\r\n    WITH path, reduce(str = &#39;&#39;, r in relationships(path) | str + toString(r.order) ) as orders\r\n    WITH path, toInteger(orders) as orders\r\n    RETURN path\r\n    ORDER BY orders\r\n    SKIP 0 LIMIT 40000;\r\n\r\nThis query should give you the most correct output:\r\n\r\n    MATCH (a:A)\r\n    CALL apoc.path.expandConfig(a, {\r\n        relationshipFilter: &quot;child&quot;,\r\n        bfs: false,\r\n    })\r\n    YIELD path\r\n    WITH path, reduce(str = &#39;&#39;, r in relationships(path) | str + toString(r.order) ) as ordersAsString\r\n    WITH path, toInteger(ordersAsString) as ordersAsInt\r\n    RETURN path\r\n    ORDER BY ordersAsInt, ordersAsString\r\n    SKIP 0 LIMIT 40000;","link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig/75746861#75746861","title":"Neo4j Server Out of Memory using expandConfig"}],"owner":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"last_editor":{"reputation":1701,"user_id":759196,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/3ff7ba0a81ed200e81b1649fb763cfce?s=256&d=identicon&r=PG","display_name":"Richard","link":"https://stackoverflow.com/users/759196/richard"},"comment_count":10,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75746861,"answer_count":1,"score":1,"last_activity_date":1679070224,"creation_date":1678727379,"last_edit_date":1678882846,"question_id":75724907,"share_link":"https://stackoverflow.com/q/75724907","body_markdown":"**Note**: please see the update towards the end.\r\n\r\nI&#39;m running this query against a graph that contains at least 300,000 nodes and after a while the memory usage on the server suddenly spikes to about 55Gb (killing the query). Typical safe usage is about 30Gb.\r\n\r\n    MATCH (d:Doc)\r\n    \tWHERE d.id = &lt;docId&gt;\r\n    \tMATCH (d)-[:pages]-&gt;(p:Page)\r\n    \tCALL apoc.path.expandConfig(p, {\r\n    \t  relationshipFilter: &quot;child&quot;,\r\n    \t  bfs: false\r\n    \t})\r\n    \tYIELD path\r\n    \tWITH path, [r in relationships(path) | [r.order, id(r)]] as orders\r\n    \tRETURN path\r\n    \tORDER BY orders\r\n    \tSKIP 0 LIMIT 40000;\r\n\r\nI can make it run for longer before failing by reducing the batch size, but ultimately it still fails.\r\n\r\nThis is the error I get in my C# code when the server becomes unresponsive.\r\n\r\n&gt; Connection with the server breaks due to IOException: Unexpected end\r\n&gt; of stream, unable to read expected data from the network connection\r\n&gt; Please ensure that your database is listening on the correct host and\r\n&gt; port and that you have compatible encryption settings both on Neo4j\r\n&gt; server and driver. Note that the default encryption setting has\r\n&gt; changed in Neo4j 4.0.\r\n\r\nThe database does recover after a while, but it&#39;s impossible for me to process all my records successfully.\r\n\r\nThe strange thing is I only get this behaviour in one of our databases. I can process the exact same set data in other Neo4j instances no problem (and no memory spike either) despite them all being provisioned the same way with the same config (they&#39;re running in Docker containers in Azure). \r\n\r\nCan anyone suggest why? I&#39;m using Neo4j Community 4.2.4 and APOC 4.2.0.5. \r\n\r\n**Update**:\r\nAs Charchit pointed out, the way we are doing the ordering is very inefficient and in fact produced 11m database hits each time we ran the query. Removing this altogether fixed the memory spike on the server. However now our paths are not returned in the correct order. \r\n\r\nWe store the order on each relationship, and need to bring the paths back using that. In the example below, we need path (a)-(b)-(c), then (a)-(b)-(d) and finally (a)-(e). \r\n\r\n[![Order stored on relationships][1]][1]\r\n\r\nI found [an open issue][2] that sounds like it might help us in the future (not sure if it will support ordering though). In the meantime, is there a way of achieving this without the huge memory usage caused by our original implementation?\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aHxVW.png\r\n  [2]: https://github.com/neo4j/apoc/issues/136","link":"https://stackoverflow.com/questions/75724907/neo4j-server-out-of-memory-using-expandconfig","title":"Neo4j Server Out of Memory using expandConfig"},{"tags":[".net","api","neo4j"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678722836,"post_id":75722565,"comment_id":133584667,"link":"https://stackoverflow.com/questions/75722565/windows-neo4j-cannot-login-connect-to-database-browser#comment133584667_75722565"},{"owner":{"reputation":2020,"user_id":2807741,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Diego Perez","link":"https://stackoverflow.com/users/2807741/diego-perez"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678789705,"post_id":75722565,"comment_id":133597574,"link":"https://stackoverflow.com/questions/75722565/windows-neo4j-cannot-login-connect-to-database-browser#comment133597574_75722565"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678815623,"post_id":75722565,"comment_id":133605393,"link":"https://stackoverflow.com/questions/75722565/windows-neo4j-cannot-login-connect-to-database-browser#comment133605393_75722565"},{"owner":{"reputation":2020,"user_id":2807741,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Diego Perez","link":"https://stackoverflow.com/users/2807741/diego-perez"},"reply_to_user":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678981284,"post_id":75722565,"comment_id":133641911,"link":"https://stackoverflow.com/questions/75722565/windows-neo4j-cannot-login-connect-to-database-browser#comment133641911_75722565"}],"answers":[{"comments":[{"owner":{"reputation":2020,"user_id":2807741,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Diego Perez","link":"https://stackoverflow.com/users/2807741/diego-perez"},"edited":false,"score":0,"creation_date":1678789894,"post_id":75725884,"comment_id":133597632,"link":"https://stackoverflow.com/questions/75722565/windows-neo4j-cannot-login-connect-to-database-browser/75725884#comment133597632_75725884"},{"owner":{"reputation":2020,"user_id":2807741,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Diego Perez","link":"https://stackoverflow.com/users/2807741/diego-perez"},"edited":false,"score":1,"creation_date":1678790866,"post_id":75725884,"comment_id":133597938,"link":"https://stackoverflow.com/questions/75722565/windows-neo4j-cannot-login-connect-to-database-browser/75725884#comment133597938_75725884"}],"tags":[],"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678733707,"creation_date":1678733707,"answer_id":75725884,"question_id":75722565,"share_link":"https://stackoverflow.com/a/75725884","body_markdown":"Typically when using Neo4j Desktop the initial database password is set via the Neo4j Desktop UI:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSo whatever text you use here will be the initial password for the `neo4j` database user. \r\n\r\nAlso, note that the default minimum password length is 8 characters so it is possible your attempts to set an initial password with fewer characters was ignored if the password is less than the minimum number of characters. More information in the docs here: https://neo4j.com/docs/operations-manual/current/configuration/set-initial-password/\r\n\r\n  [1]: https://i.stack.imgur.com/YG2qo.png","link":"https://stackoverflow.com/questions/75722565/windows-neo4j-cannot-login-connect-to-database-browser/75725884#75725884","title":"Windows neo4j: Cannot login / connect to database / browser"}],"owner":{"reputation":2020,"user_id":2807741,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1","display_name":"Diego Perez","link":"https://stackoverflow.com/users/2807741/diego-perez"},"last_editor":{"reputation":19775,"user_id":472495,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/4rtxd.png?s=256&g=1","display_name":"halfer","link":"https://stackoverflow.com/users/472495/halfer"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75725884,"answer_count":1,"score":0,"last_activity_date":1680047978,"creation_date":1678714351,"last_edit_date":1680047978,"question_id":75722565,"share_link":"https://stackoverflow.com/q/75722565","body_markdown":"I&#39;ve just installed neo4j desktop 5.6.0 (which I&#39;m going to use in a dotnet 7 API), but no matter what I try, my login / password is always refused.\r\n\r\nI didn&#39;t make any changes to default config, so username/password should be neo4j/neo4j, but they obviously doesn&#39;t work.\r\n\r\nif I open browser URL via:\r\n\r\n    http://localhost:7474/browser/\r\n\r\nand try to connect using bolt via:\r\n\r\n    bolt://localhost:7687\r\n\r\nI always get\r\n\r\n&gt;Neo.ClientError.Security.Unauthorized: The client is unauthorized due to authentication failure.\r\n\r\nRunning\r\n\r\n    .\\neo4j.bat start\r\n\r\nvia a PowerShell Windows console:\r\n\r\nPops up a &quot;Apache Commons Daemon Service Runner&quot; asking for confirmation, and after I hit &quot;Yes&quot; it returns:\r\n\r\n    Started neo4j. It is available at http://localhost:7474\r\n    There may be a short delay until the server is ready.\r\n\r\nBut then \r\n\r\n    .\\neo4j.bat status --verbose\r\n\r\n returns:\r\n\r\n    neo4j 5.3.0\r\n    VM Name: Java HotSpot(TM) 64-Bit Server VM\r\n    VM Vendor: Oracle Corporation\r\n    VM Version: 17.0.6+9-LTS-190\r\n    JIT compiler: HotSpot 64-Bit Tiered Compilers\r\n    VM Arguments: [-Dbasedir=C:\\Users\\diego.estebanperez_a\\.Neo4jDesktop\\relate-data\\dbmss\\dbms-7b389a4d-222f-44d9-b8f1-dca7064ee5a9]\r\n    Configuration files used (ordered by priority):\r\n    C:\\Users\\diego.estebanperez_a\\.Neo4jDesktop\\relate-data\\dbmss\\dbms-7b389a4d-222f-44d9-b8f1-dca7064ee5a9\\conf\\neo4j.conf\r\n    --------------------\r\n    Executing command line: powershell.exe -OutputFormat Text -ExecutionPolicy Bypass -Command Get-Service neo4j | Format-Table -AutoSize\r\n    org.neo4j.cli.CommandFailedException: Neo4j is not running.\r\n            at org.neo4j.server.startup.Bootloader$Dbms.status(Bootloader.java:479)\r\n            at org.neo4j.server.startup.StatusCommand.execute(StatusCommand.java:37)\r\n            at org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:92)\r\n            at org.neo4j.cli.AbstractCommand.call(AbstractCommand.java:37)\r\n            at picocli.CommandLine.executeUserObject(CommandLine.java:1953)\r\n            at picocli.CommandLine.access$1300(CommandLine.java:145)\r\n            at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)\r\n            at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)\r\n            at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)\r\n            at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)\r\n            at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)\r\n            at picocli.CommandLine.execute(CommandLine.java:2078)\r\n            at org.neo4j.server.startup.Neo4jAdminCommand.call(Neo4jAdminCommand.java:122)\r\n            at org.neo4j.server.startup.Neo4jAdminCommand.call(Neo4jAdminCommand.java:42)\r\n            at picocli.CommandLine.executeUserObject(CommandLine.java:1953)\r\n            at picocli.CommandLine.access$1300(CommandLine.java:145)\r\n            at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2358)\r\n            at picocli.CommandLine$RunLast.handle(CommandLine.java:2352)\r\n            at picocli.CommandLine$RunLast.handle(CommandLine.java:2314)\r\n            at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2179)\r\n            at picocli.CommandLine$RunLast.execute(CommandLine.java:2316)\r\n            at picocli.CommandLine.execute(CommandLine.java:2078)\r\n            at org.neo4j.server.startup.Neo4jCommand.main(Neo4jCommand.java:41)\r\n\r\nOf course I tried to use it in a .net api registering the neo4j client like this (neo4jclient Nuget previously installed):\r\n\r\n    var client = new BoltGraphClient(new Uri(&quot;bolt://localhost:&quot;), &quot;neo4j&quot;, &quot;neo4j&quot;);\r\n    client.ConnectAsync();\r\n    builder.Services.AddSingleton&lt;IGraphClient&gt;(client);\r\n\r\nTo no avail too.\r\n\r\nI&#39;ve also installed the service via:\r\n\r\n    .\\neo4j.bat windows-service install\r\n\r\nAnd also tried setting an initial password via:\r\n\r\n    ./neo4j-admin dbms set-initial-password root\r\n\r\nTo no avail too.\r\n\r\nWhat can I try next?\r\n\r\nPS. Already investigated and tried some links like \r\n\r\n[https://stackoverflow.com/questions/32666453/cannot-log-in-neo4j-server][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/32666453/cannot-log-in-neo4j-server","link":"https://stackoverflow.com/questions/75722565/windows-neo4j-cannot-login-connect-to-database-browser","title":"Windows neo4j: Cannot login / connect to database / browser"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":3450,"user_id":1106134,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/8f5222c8dd89d2c52a67998eeb5b0fd3?s=256&d=identicon&r=PG","display_name":"Kaliyug Antagonist","link":"https://stackoverflow.com/users/1106134/kaliyug-antagonist"},"edited":false,"score":0,"creation_date":1678733793,"post_id":75725859,"comment_id":133587723,"link":"https://stackoverflow.com/questions/75722417/relationships-between-nodes-scattered-in-multiple-databases/75725859#comment133587723_75725859"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":3450,"user_id":1106134,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/8f5222c8dd89d2c52a67998eeb5b0fd3?s=256&d=identicon&r=PG","display_name":"Kaliyug Antagonist","link":"https://stackoverflow.com/users/1106134/kaliyug-antagonist"},"edited":false,"score":0,"creation_date":1678733895,"post_id":75725859,"comment_id":133587749,"link":"https://stackoverflow.com/questions/75722417/relationships-between-nodes-scattered-in-multiple-databases/75725859#comment133587749_75725859"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678733794,"last_edit_date":1678733794,"creation_date":1678733524,"answer_id":75725859,"question_id":75722417,"share_link":"https://stackoverflow.com/a/75725859","body_markdown":"[Fabric](https://neo4j.com/docs/operations-manual/4.0/fabric/configuration/?ref=blog) is only supported in neo4j Enterprise Edition. In neo4j 5.x, Fabric was replaced with [composite databases](https://neo4j.com/docs/operations-manual/5/composite-databases/), which are also only supported in EE.","link":"https://stackoverflow.com/questions/75722417/relationships-between-nodes-scattered-in-multiple-databases/75725859#75725859","title":"relationships between nodes scattered in multiple databases"}],"owner":{"reputation":3450,"user_id":1106134,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/8f5222c8dd89d2c52a67998eeb5b0fd3?s=256&d=identicon&r=PG","display_name":"Kaliyug Antagonist","link":"https://stackoverflow.com/users/1106134/kaliyug-antagonist"},"last_editor":{"reputation":3450,"user_id":1106134,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/8f5222c8dd89d2c52a67998eeb5b0fd3?s=256&d=identicon&r=PG","display_name":"Kaliyug Antagonist","link":"https://stackoverflow.com/users/1106134/kaliyug-antagonist"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678733886,"creation_date":1678713615,"last_edit_date":1678733886,"question_id":75722417,"share_link":"https://stackoverflow.com/q/75722417","body_markdown":"Neo4j Desktop 1.5.7\r\n\r\nI have two separate databases(in separate dbms, project):\r\n- Suppliers\r\n\r\nSome nodes:\r\n\r\n    create(n: Bolts: {name: &#39;Holding Corp.&#39;, type &#39;public&#39;})\r\n    create(n: Pistons: {name: &#39;Flemings Company.&#39;, type &#39;private&#39;})\r\n\r\n- Factories\r\n\r\nsome nodes:\r\n\r\n    create(n: Boilers: {name: &#39;xyz&#39;})\r\n    create(n: CoolingSystems: {name: &#39;abc&#39;})\r\n    create(n: Piping: {name: &#39;efg&#39;})\r\n\r\nExpected relationships:\r\n\r\n    MATCH\r\n      (supplier:Supplier),\r\n      (factory:Factory)\r\n    WHERE supplier.name = &#39;Holding Corp.&#39; AND factory.name = &quot;abc&quot;\r\n    CREATE (supplier)-[fixationUnits:SUPPLIES_FIXATION {name: &#39;SUPPLIES_FIXATION&#39;, description: &#39;sample.&#39;}]-&gt;(factory)\r\n    RETURN type(fixationUnits), participatedIn.name\r\n\r\nI couldn&#39;t figure out anything from the standard command docs.\r\n\r\nNow, based on Google search results, and a peek in blogs about [neo4j Fabric][1], it seems I am expecting a feature that is either unsupported by Neo4j or perhaps is limited to the enterprise edition.\r\n\r\nIs Fabric or similar enterprise feature the only way to achieve what I wish to do?\r\n\r\n\r\n  [1]: https://neo4j.com/blog/getting-started-with-neo4j-fabric/","link":"https://stackoverflow.com/questions/75722417/relationships-between-nodes-scattered-in-multiple-databases","title":"relationships between nodes scattered in multiple databases"},{"tags":["neo4j","py2neo"],"comments":[{"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"edited":false,"score":0,"creation_date":1678721031,"post_id":75721917,"comment_id":133584093,"link":"https://stackoverflow.com/questions/75721917/defining-neo4j-relationships#comment133584093_75721917"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1678726653,"post_id":75721917,"comment_id":133585827,"link":"https://stackoverflow.com/questions/75721917/defining-neo4j-relationships#comment133585827_75721917"}],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678743780,"last_edit_date":1678743780,"creation_date":1678728929,"answer_id":75725151,"question_id":75721917,"share_link":"https://stackoverflow.com/a/75725151","body_markdown":"Some immediate issues are evident:\r\n\r\n 1. A relationship type cannot have embedded space characters (unless [escaped](https://neo4j.com/docs/cypher-manual/current/syntax/naming/#_using_special_characters_in_names)). Use something like `REGISTERED_ADDRESS` instead of `Registered Address`. *(Relationship types [should be all-uppercased](https://neo4j.com/docs/cypher-manual/current/syntax/naming/#_recommendations).)*\r\n 2. Is the relationship type actually supposed to come from `row[&quot;rel_type&quot;]`? If so, use *that* instead of `Registered Address`, and do not store it in the relationship as a property.\r\n 3. The relationship map does not contain a `sourceID` property, so `row[&#39;sourceID&#39;]` will cause an error. If the property is actually supposed to be `node_id_start`, then don&#39;t store it in the relationship (i.e., the relationship would have the corresponding start node as an endpoint, so storing its id in the relationship would be redundant).\r\n","link":"https://stackoverflow.com/questions/75721917/defining-neo4j-relationships/75725151#75725151","title":"Defining neo4j relationships"}],"owner":{"reputation":1,"user_id":21389118,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dce8812ebec6a7a4e2d2cc8f47f0671b?s=256&d=identicon&r=PG","display_name":"Thomas","link":"https://stackoverflow.com/users/21389118/thomas"},"last_editor":{"reputation":1,"user_id":21389118,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dce8812ebec6a7a4e2d2cc8f47f0671b?s=256&d=identicon&r=PG","display_name":"Thomas","link":"https://stackoverflow.com/users/21389118/thomas"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678785651,"creation_date":1678710804,"last_edit_date":1678785651,"question_id":75721917,"share_link":"https://stackoverflow.com/q/75721917","body_markdown":"I am trying to define relationships between nodes. Each type of node has it own csv file and the relationships are defined in a csv file as well. The nodes have an unique node id and based on the node id&#39;s the relationships are defined in the csv file. Now I am unable to define the relationships in neo4j without making new nodes for each relation. This code snippet might give some insight in what I am trying to do, although it is not correct:\r\n\r\n    # create relationships between entities and addresses\r\n    for i, row in dfRelationships.iterrows():\r\n        entity_node = graph.nodes.match(&quot;Entity&quot;, name=row[&#39;node_id_start&#39;]).first()\r\n        address_node = graph.nodes.match(&quot;Address&quot;, address=row[&#39;node_id_end&#39;]).first()\r\n        if entity_node and address_node:\r\n            rel_properties = {\r\n                &quot;start_date&quot;: row[&#39;start_date&#39;],\r\n                &quot;end_date&quot;: row[&#39;end_date&#39;],\r\n                &quot;sourceID&quot;: row[&#39;sourceID&#39;],\r\n                &quot;status&quot;: row[&#39;status&#39;],\r\n                &quot;rel_type&quot;: row[&quot;rel_type&quot;],\r\n                &quot;link&quot;: row[&quot;link&quot;]\r\n            }\r\n            rel = Relationship(entity_node, &quot;Registered Address&quot;, address_node, **rel_properties)\r\n            graph.create(rel)\r\n\r\nThe csv file of the relationships contain the following columns: node_id_start, node_id_end, rel_type, link, status, start_date, end_date, sourceID. \r\n\r\nSee the following picture for the instances:\r\n https://i.stack.imgur.com/88cVJ.png\r\n\r\nSorry for the messy post, it&#39;s my first one :)","link":"https://stackoverflow.com/questions/75721917/defining-neo4j-relationships","title":"Defining neo4j relationships"},{"tags":["node.js","neo4j"],"owner":{"reputation":22879,"user_id":766570,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/urpdN.jpg?s=256&g=1","display_name":"abbood","link":"https://stackoverflow.com/users/766570/abbood"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1678709245,"creation_date":1678708231,"question_id":75721501,"share_link":"https://stackoverflow.com/q/75721501","body_markdown":"I inherited a node.js project that uses neo4j as the database. I noticed that the database changes were done manually. Is there any library that does neo4j migrations (ie similar to [laravel][1], [django][2] and almost all other web mvc frameworks)?\r\n\r\nThe only one I could find is [this one][3] but it&#39;s more geared towards java/spring projects. I would like a library that would include the migrations file inside my node.js project\r\n\r\n\r\n  [1]: https://laravel.com/docs/10.x/migrations\r\n  [2]: https://docs.djangoproject.com/en/4.1/topics/migrations/\r\n  [3]: https://michael-simons.github.io/neo4j-migrations/2.2.0/","link":"https://stackoverflow.com/questions/75721501/neo4j-migrations-for-a-node-js-project","title":"neo4j migrations for a node.js project"},{"tags":["neo4j","cypher","apoc"],"answers":[{"tags":[],"owner":{"reputation":11937,"user_id":7371893,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ris3Z.png?s=256&g=1","display_name":"jose_bacoy","link":"https://stackoverflow.com/users/7371893/jose-bacoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678663014,"creation_date":1678663014,"answer_id":75716958,"question_id":75716752,"share_link":"https://stackoverflow.com/a/75716958","body_markdown":"You can unwind the combined list then collect the distinct elements as union list.\r\n\r\n    WITH [1,2] as list1, [1,2,3,4] as list2 \r\n    UNWIND list1 + list2 as l \r\n    RETURN collect(distinct l) as union_list\r\n\r\nResult:\r\n\r\n    ╒════════════╕\r\n    │&quot;union_list&quot;│\r\n    ╞════════════╡\r\n    │[1,2,3,4]   │\r\n    └────────────┘","link":"https://stackoverflow.com/questions/75716752/neo4j-cypher-alternative-for-apoc-coll-union-and-apoc-coll-unionall/75716958#75716958","title":"Neo4j Cypher alternative for apoc.coll.union and apoc.coll.unionAll"}],"owner":{"reputation":23265,"user_id":1219755,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1","display_name":"alexanoid","link":"https://stackoverflow.com/users/1219755/alexanoid"},"last_editor":{"reputation":3531,"user_id":214143,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/61025b3df4700620a5d9099293f23a5d?s=256&d=identicon&r=PG","display_name":"Jason Aller","link":"https://stackoverflow.com/users/214143/jason-aller"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75716958,"answer_count":1,"score":1,"last_activity_date":1678663014,"creation_date":1678660088,"last_edit_date":1678661142,"question_id":75716752,"share_link":"https://stackoverflow.com/q/75716752","body_markdown":"In order to substitute \r\n\r\n    apoc.coll.unionAll(list1, list2) as list3 \r\n\r\nlooks like I may use `+` sign in pure Cypher:\r\n\r\n    WITH [1,2] as list1, [1,2,3,4] as list2 WITH list1 + list2 as list3 \r\n\r\nbut how to implement `apoc.coll.union` in plain Cypher which returns a distinct union of the 2 lists?","link":"https://stackoverflow.com/questions/75716752/neo4j-cypher-alternative-for-apoc-coll-union-and-apoc-coll-unionall","title":"Neo4j Cypher alternative for apoc.coll.union and apoc.coll.unionAll"},{"tags":["neo4j","apoc","load.csv"],"comments":[{"owner":{"reputation":17022,"user_id":8431111,"user_type":"registered","profile_image":"https://i.stack.imgur.com/GteAE.jpg?s=256&g=1","display_name":"J_H","link":"https://stackoverflow.com/users/8431111/j-h"},"edited":false,"score":0,"creation_date":1678668545,"post_id":75716573,"comment_id":133573077,"link":"https://stackoverflow.com/questions/75716573/what-happened-to-apoc-load-csv#comment133573077_75716573"},{"owner":{"reputation":8026,"user_id":12368154,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1a4a7a891ec65724e0a00ba86585011?s=256&d=identicon&r=PG&f=1","display_name":"Charchit Kapoor","link":"https://stackoverflow.com/users/12368154/charchit-kapoor"},"edited":false,"score":1,"creation_date":1678684556,"post_id":75716573,"comment_id":133574659,"link":"https://stackoverflow.com/questions/75716573/what-happened-to-apoc-load-csv#comment133574659_75716573"}],"answers":[{"tags":[],"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678732191,"creation_date":1678732191,"answer_id":75725664,"question_id":75716573,"share_link":"https://stackoverflow.com/a/75725664","body_markdown":"As of Neo4j 5 APOC has been split into two separate distributions: [APOC Core](https://neo4j.com/docs/apoc/5/) and [APOC Extended](https://neo4j.com/labs/apoc/5/). `apoc.load.csv` has been moved to APOC Extended so you&#39;ll want to be sure you have that distribution installed.\r\n\r\nThis page has more information and installation instructions for APOC Extended: https://neo4j.com/labs/apoc/#_availability_installation","link":"https://stackoverflow.com/questions/75716573/what-happened-to-apoc-load-csv/75725664#75725664","title":"What happened to apoc.load.csv"}],"owner":{"reputation":1736,"user_id":2299692,"user_type":"registered","accept_rate":17,"profile_image":"https://i.stack.imgur.com/4Y3SE.png?s=256&g=1","display_name":"David Makovoz","link":"https://stackoverflow.com/users/2299692/david-makovoz"},"last_editor":{"reputation":1736,"user_id":2299692,"user_type":"registered","accept_rate":17,"profile_image":"https://i.stack.imgur.com/4Y3SE.png?s=256&g=1","display_name":"David Makovoz","link":"https://stackoverflow.com/users/2299692/david-makovoz"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75725664,"answer_count":1,"score":1,"last_activity_date":1678732191,"creation_date":1678657605,"last_edit_date":1678668269,"question_id":75716573,"share_link":"https://stackoverflow.com/q/75716573","body_markdown":"I am using neo4j \r\n\r\nNeo4j Browser version: 5.3.0\r\n\r\nNeo4j Server version: 5.3.0 (community)\r\n\r\nNeo4j Browser Changelog\r\n\r\nBuild number: 207\r\n\r\nBuild date: 11/21/2022\r\n\r\nI installed the corresponding version of apoc &#39;https://github.com/neo4j/apoc/releases/download/5.3.0/apoc-5.3.0-core.jar&#39;\r\n\r\nThe apoc.load.csv is missing:\r\n\r\n`There is no procedure with the name ``apoc.load.csv`` registered for this database instance.`\r\n\r\nWhen I run\r\n```SHOW PROCEDURES yield name, description, signature```\r\n\r\nIt should&#39;ve been between these two lines:\r\n```\r\n&quot;apoc.load.arrow.stream&quot;\t&quot;Imports nodes and relationships from the provided arrow byte array.&quot;\t&quot;apoc.load.arrow.stream(source :: BYTEARRAY?, config = {} :: MAP?) :: (value :: MAP?)&quot;\r\n&quot;apoc.load.json&quot;\t&quot;Imports JSON file as a stream of values if the given JSON file is an array.\r\nIf the given JSON file is a map, this procedure imports a single value instead.&quot;\r\n```\r\n\r\nThe version 5 documentation has it listed [here][1]\r\n\r\n\r\n  [1]: https://neo4j.com/labs/apoc/5/import/load-csv/","link":"https://stackoverflow.com/questions/75716573/what-happened-to-apoc-load-csv","title":"What happened to apoc.load.csv"},{"tags":["neo4j","cypher","apoc"],"answers":[{"tags":[],"owner":{"reputation":6213,"user_id":6692895,"user_type":"registered","accept_rate":89,"profile_image":"https://graph.facebook.com/10154498103378258/picture?type=large","display_name":"Tomaž Bratanič","link":"https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678649761,"creation_date":1678649761,"answer_id":75715866,"question_id":75715748,"share_link":"https://stackoverflow.com/a/75715866","body_markdown":"You can use list comprehension.\r\n\r\n    [x IN list1 WHERE x IN list2 | x]\r\n\r\nIn this example, you iterate over all elements in `list1` and only keep those elements that are also in `list2`","link":"https://stackoverflow.com/questions/75715748/neo4j-pure-cypher-alternative-for-apoc-coll-intersection/75715866#75715866","title":"Neo4j pure Cypher alternative for apoc.coll.intersection"}],"owner":{"reputation":23265,"user_id":1219755,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/UmjNt.jpg?s=256&g=1","display_name":"alexanoid","link":"https://stackoverflow.com/users/1219755/alexanoid"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75715866,"answer_count":1,"score":0,"last_activity_date":1678649761,"creation_date":1678648656,"question_id":75715748,"share_link":"https://stackoverflow.com/q/75715748","body_markdown":"In order to find an intersection of two arrays, I use the following APOC call:\r\n\r\n    apoc.coll.intersection($detailedCriterionIds, childD.detailedCriterionIds) \r\n\r\nCould you please show how to implement the same with pure Cypher without APOC help? Thanks!","link":"https://stackoverflow.com/questions/75715748/neo4j-pure-cypher-alternative-for-apoc-coll-intersection","title":"Neo4j pure Cypher alternative for apoc.coll.intersection"},{"tags":["neo4j","cypher","opencypher"],"answers":[{"comments":[{"owner":{"reputation":3,"user_id":20680828,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1abfcc0995e31fd3a93dfcd40363c738?s=256&d=identicon&r=PG","display_name":"Audrin","link":"https://stackoverflow.com/users/20680828/audrin"},"edited":false,"score":0,"creation_date":1678713414,"post_id":75717199,"comment_id":133581444,"link":"https://stackoverflow.com/questions/75711383/how-to-make-two-cypher-optional-matches-not-multiply-results/75717199#comment133581444_75717199"},{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":3,"user_id":20680828,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1abfcc0995e31fd3a93dfcd40363c738?s=256&d=identicon&r=PG","display_name":"Audrin","link":"https://stackoverflow.com/users/20680828/audrin"},"edited":false,"score":1,"creation_date":1678720672,"post_id":75717199,"comment_id":133583937,"link":"https://stackoverflow.com/questions/75711383/how-to-make-two-cypher-optional-matches-not-multiply-results/75717199#comment133583937_75717199"}],"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678667665,"last_edit_date":1678667665,"creation_date":1678667290,"answer_id":75717199,"question_id":75711383,"share_link":"https://stackoverflow.com/a/75717199","body_markdown":"If the start node of every `LIKED` and `DISLIKED` relationship is always a `User`, then we can use a path pattern that leaves the start node unspecific. In this case, the most efficient way to get the counts is as follows (since it causes the Cypher planner to count relationships using the `getDegree` operation, which does not need to hit the DB):\r\n\r\n    OPTIONAL MATCH (u:User {username: $username})\r\n    RETURN\r\n      SIZE([()-[:LIKED]-&gt;(u)|1]) AS count_l,\r\n      SIZE([()-[:DISLIKED]-&gt;(u)|1]) AS count_d\r\n\r\n[This answer](https://stackoverflow.com/questions/75523865/how-can-i-select-nodes-that-have-zero-relationships-except-pointing-to-themselve/75525810#75525810) to another question provides more details.","link":"https://stackoverflow.com/questions/75711383/how-to-make-two-cypher-optional-matches-not-multiply-results/75717199#75717199","title":"How to make two Cypher optional matches not multiply results?"}],"owner":{"reputation":3,"user_id":20680828,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1abfcc0995e31fd3a93dfcd40363c738?s=256&d=identicon&r=PG","display_name":"Audrin","link":"https://stackoverflow.com/users/20680828/audrin"},"last_editor":{"reputation":7881,"user_id":588967,"user_type":"registered","accept_rate":68,"profile_image":"https://i.stack.imgur.com/UFvc3.png?s=256&g=1","display_name":"Andrea Mario Lufino","link":"https://stackoverflow.com/users/588967/andrea-mario-lufino"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75717199,"answer_count":1,"score":0,"last_activity_date":1678794033,"creation_date":1678602029,"last_edit_date":1678794033,"question_id":75711383,"share_link":"https://stackoverflow.com/q/75711383","body_markdown":"```\r\nOPTIONAL MATCH (:User)-[l:LIKED]-&gt;(:User {username: $username})\r\nOPTIONAL MATCH (:User)-[d:DISLIKED]-&gt;(:User {username: $username})\r\nRETURN count(l),count(d)\r\n```\r\nI have this Cypher query to return the count of 2 types of relationships. Currently there are 7 :LIKED edges and 5 :DISLIKED edges running into the given username, but when I run this I get both counts as 35. How can I change it to not be multiplied?\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/75711383/how-to-make-two-cypher-optional-matches-not-multiply-results","title":"How to make two Cypher optional matches not multiply results?"},{"tags":["spring-boot","kotlin","neo4j"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678635629,"last_edit_date":1678635629,"creation_date":1678589752,"answer_id":75710821,"question_id":75710280,"share_link":"https://stackoverflow.com/a/75710821","body_markdown":"Cypher does not support dynamic relationship types in a *path pattern*. Nevertheless, you still can use dynamic relationship types in a Cypher query (although it will not be efficient).\r\n\r\nThis should work work you:\r\n\r\n    @Query(&quot;MATCH (c1:Character)-[r]-&gt;(c2:Character) WHERE TYPE(r) = \\$relation AND c1.id = \\$id RETURN c2&quot;)","link":"https://stackoverflow.com/questions/75710280/unable-to-pass-a-second-param-in-query/75710821#75710821","title":"Unable to pass a second param in query"}],"owner":{"reputation":483,"user_id":5728508,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/e58497ab98da699c609389434ffc122e?s=256&d=identicon&r=PG&f=1","display_name":"JasSy","link":"https://stackoverflow.com/users/5728508/jassy"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75710821,"answer_count":1,"score":1,"last_activity_date":1678635629,"creation_date":1678578374,"question_id":75710280,"share_link":"https://stackoverflow.com/q/75710280","body_markdown":"The following query works fine. \r\n\r\n    interface MyRepository : Neo4jRepository&lt;Character?, Long?&gt; {\r\n        @Query(&quot;MATCH (c1:Character)-[:positive]-&gt;(c2:Character) WHERE c1.id = \\$id RETURN c2&quot;)\r\n        fun findRelations(relation: String, id: Long): List&lt;Character&gt;\r\n    }\r\n\r\nBut I want to pass that relation as a param too. \r\n\r\nBut when I perform this I end up with errors. \r\n\r\n    interface MyRepository : Neo4jRepository&lt;Character?, Long?&gt; {\r\n        @Query(&quot;MATCH (c1:Character)-[:\\$relation]-&gt;(c2:Character) WHERE c1.id = \\$id RETURN c2&quot;)\r\n        fun findRelations(relation: String, id: Long): List&lt;Character&gt;\r\n    }\r\n\r\nThe error. \r\n\r\n&gt; org.springframework.dao.InvalidDataAccessResourceUsageException:\r\n&gt; Invalid input &#39;$&#39;: expected \\&quot;%\\&quot;, \\&quot;(\\&quot; or an identifier (line 1,\r\n&gt; column 24 (offset: 23))\\n\\&quot;MATCH\r\n&gt; (c1:Character)-[:$relation]-&gt;(c2:Character) WHERE c1.id = $id RETURN\r\n&gt; c2\\&quot;\\n                        ^; Error code\r\n&gt; &#39;Neo.ClientError.Statement.SyntaxError\r\n\r\nSo I tried with % as suggested. That throws error too. `\\%` throws compilation error thus using double `\\\\`. \r\n\r\n    interface MyRepository : Neo4jRepository&lt;Character?, Long?&gt; {\r\n        @Query(&quot;MATCH (c1:Character)-[:\\\\%relation]-&gt;(c2:Character) WHERE c1.id = \\$id RETURN c2&quot;)\r\n        fun findRelations(relation: String, id: Long): List&lt;Character&gt;\r\n    }\r\n\r\nThe error.\r\n\r\n&gt; org.springframework.dao.InvalidDataAccessResourceUsageException:\r\n&gt; Invalid input &#39;\\\\&#39;: expected \\&quot;%\\&quot;, \\&quot;(\\&quot; or an identifier (line 1,\r\n&gt; column 25 (offset: 24))\\n\\&quot;MATCH\r\n&gt; (c1:Character)-[:\\\\%relation]-&gt;(c2:Character) WHERE c1.id = $id RETURN\r\n&gt; c2\\&quot;\\n                         ^; Error code\r\n&gt; &#39;Neo.ClientError.Statement.SyntaxError\r\n\r\nWhat am I missing, what is the syntax error? ","link":"https://stackoverflow.com/questions/75710280/unable-to-pass-a-second-param-in-query","title":"Unable to pass a second param in query"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678476897,"last_edit_date":1678476897,"creation_date":1678476529,"answer_id":75700293,"question_id":75699981,"share_link":"https://stackoverflow.com/a/75700293","body_markdown":"Here is a possible explanation.\r\n\r\nThe `MERGE` clause needs to verify that the relationship does not already exist. Therefore, it needs to scan *all* the `CREATED` relationships of either `u` or `a`. In your DB, it is probably the case that on average a `User` has fewer such relationships than an `Action`. Therefore, the Cypher planner has decided to scan all outgoing `CREATED` relationships of `u` to verify that `a` is not on the other side.\r\n\r\nSome `User` nodes, however, may have an enormous number of outgoing `CREATED` relationships. For such users, the scan could take a very long time.","link":"https://stackoverflow.com/questions/75699981/creating-a-new-relation-in-neo4j-takes-to-long-over-488000-ms/75700293#75700293","title":"Creating a new relation in neo4j takes to long. (over 488000 ms)"}],"owner":{"reputation":163,"user_id":2160743,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8cd07858d3cdf23959da934219a3ce39?s=256&d=identicon&r=PG","display_name":"Bogdan Oloeriu","link":"https://stackoverflow.com/users/2160743/bogdan-oloeriu"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678476897,"creation_date":1678474363,"question_id":75699981,"share_link":"https://stackoverflow.com/q/75699981","body_markdown":"What could be the reason for this cypher query to take over 488000 ms? \r\n```\r\nMATCH (u:User {objectId: &#39;idUusera&#39;}) \r\nMATCH (a:Action {objectId: &#39;idActiona&#39;}) \r\nMERGE (u)-[r:CREATED]-&gt;(a)\r\n```\r\nThe database contains tens of thousands of actions but this happens only for some users. There is already an index on User.objectId and Action.objectId \r\n\r\n","link":"https://stackoverflow.com/questions/75699981/creating-a-new-relation-in-neo4j-takes-to-long-over-488000-ms","title":"Creating a new relation in neo4j takes to long. (over 488000 ms)"},{"tags":["go","neo4j","graphql","go-gin"],"answers":[{"comments":[{"owner":{"reputation":61,"user_id":19445483,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AATXAJxM3Yf8KEp-U19oFLYymKn0n1UeIm7KoZW4e759=k-s256","display_name":"Isaac Cooke","link":"https://stackoverflow.com/users/19445483/isaac-cooke"},"edited":false,"score":0,"creation_date":1678486052,"post_id":75701186,"comment_id":133548534,"link":"https://stackoverflow.com/questions/75698863/error-when-trying-to-query-neo4j-database-using-golang-and-graphql/75701186#comment133548534_75701186"}],"tags":[],"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678483811,"creation_date":1678483811,"answer_id":75701186,"question_id":75698863,"share_link":"https://stackoverflow.com/a/75701186","body_markdown":"It looks like the type of the `Query.movieByTitle` field is an array of Movie objects, but is your resolver returning a single movie instead of a list/array? \r\n\r\nIn other GraphQL server implementations, this is typically handled gracefully, not sure about the Go GraphQL implementation you&#39;re using.","link":"https://stackoverflow.com/questions/75698863/error-when-trying-to-query-neo4j-database-using-golang-and-graphql/75701186#75701186","title":"Error when trying to query neo4j database using golang and graphql"}],"owner":{"reputation":61,"user_id":19445483,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AATXAJxM3Yf8KEp-U19oFLYymKn0n1UeIm7KoZW4e759=k-s256","display_name":"Isaac Cooke","link":"https://stackoverflow.com/users/19445483/isaac-cooke"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75701186,"answer_count":1,"score":1,"last_activity_date":1678483811,"creation_date":1678466822,"question_id":75698863,"share_link":"https://stackoverflow.com/q/75698863","body_markdown":"I tried making a simple server for graphql and go using a neo4j database but I keep getting this error:\r\n```\r\n{\r\n  &quot;data&quot;: {\r\n    &quot;movieByTitle&quot;: null\r\n  },\r\n  &quot;errors&quot;: [\r\n    {\r\n      &quot;message&quot;: &quot;User Error: expected iterable, but did not find one for field Query.movieByTitle.&quot;,\r\n      &quot;locations&quot;: [\r\n        {\r\n          &quot;line&quot;: 2,\r\n          &quot;column&quot;: 3\r\n        }\r\n      ],\r\n      &quot;path&quot;: [\r\n        &quot;movieByTitle&quot;\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\nwhen I make a request. This is my graphql field:\r\n```\r\nvar getMovieByTitle = &amp;graphql.Field{\r\n\tType: graphql.NewList(models.MovieType),\r\n\tArgs: graphql.FieldConfigArgument{\r\n\t\t&quot;title&quot;: &amp;graphql.ArgumentConfig{\r\n\t\t\tType: graphql.String,\r\n\t\t},\r\n\t},\r\n\tResolve: func(params graphql.ResolveParams) (interface{}, error) {\r\n\t\ttitle := params.Args[&quot;title&quot;].(string)\r\n\r\n\t\tconfiguration := data.ParseConfiguration()\r\n\t\tdriver, err := configuration.NewDriver()\r\n\t\tif err != nil {\r\n\t\t\tlog.Fatal(err)\r\n\t\t}\r\n\t\tdefer data.UnsafeClose(driver)\r\n\r\n\t\tsession := driver.NewSession(neo4j.SessionConfig{\r\n\t\t\tAccessMode:   neo4j.AccessModeRead,\r\n\t\t\tDatabaseName: configuration.Database,\r\n\t\t})\r\n\t\tdefer data.UnsafeClose(session)\r\n\r\n\t\tmovie, err := session.ReadTransaction(func(tx neo4j.Transaction) (interface{}, error) {\r\n\t\t\trecords, err := tx.Run(\r\n\t\t\t\t`MATCH (movie:Movie {title:$title})\r\n\t\t\t\t  OPTIONAL MATCH (movie)&lt;-[r]-(person:Person)\r\n\t\t\t\t  WITH movie.title as title,\r\n\t\t\t\t\t\t collect({name:person.name,\r\n\t\t\t\t\t\t job:head(split(toLower(type(r)),&#39;_&#39;)),\r\n\t\t\t\t\t\t role:r.roles}) as cast \r\n\t\t\t\t  LIMIT 1\r\n\t\t\t\t  UNWIND cast as c \r\n\t\t\t\t  RETURN title, c.name as name, c.job as job, c.role as role`,\r\n\t\t\t\tmap[string]interface{}{&quot;title&quot;: title})\r\n\t\t\tif err != nil {\r\n\t\t\t\treturn nil, err\r\n\t\t\t}\r\n\t\t\tvar result models.Movie\r\n\t\t\tfor records.Next() {\r\n\t\t\t\trecord := records.Record()\r\n\t\t\t\ttitle, _ := record.Get(&quot;title&quot;)\r\n\t\t\t\tresult.Title = title.(string)\r\n\t\t\t\tname, _ := record.Get(&quot;name&quot;)\r\n\t\t\t\tjob, _ := record.Get(&quot;job&quot;)\r\n\t\t\t\trole, _ := record.Get(&quot;role&quot;)\r\n\t\t\t\tswitch role.(type) {\r\n\t\t\t\tcase []interface{}:\r\n\t\t\t\t\tresult.Cast = append(result.Cast, models.Person{Name: name.(string), Job: job.(string), Role: data.ToStringSlice(role.([]interface{}))})\r\n\t\t\t\tdefault: // handle nulls or unexpected stuff\r\n\t\t\t\t\tresult.Cast = append(result.Cast, models.Person{Name: name.(string), Job: job.(string)})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result, nil\r\n\t\t})\r\n\t\tif movie == nil {\r\n\t\t\tlog.Println(movie)\r\n\t\t\treturn nil, fmt.Errorf(&quot;movie not found&quot;)\r\n\t\t}\r\n\t\tfmt.Println(movie)\r\n\t\treturn movie, nil\r\n\t},\r\n}\r\n```\r\nI am using gin to run the server. I tried running the same query with an http endpoint instead of graphql and I got the expected response. How can I fix the error? I am using the example movie dataset in neo4j.","link":"https://stackoverflow.com/questions/75698863/error-when-trying-to-query-neo4j-database-using-golang-and-graphql","title":"Error when trying to query neo4j database using golang and graphql"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":1,"creation_date":1678474774,"post_id":75698854,"comment_id":133546054,"link":"https://stackoverflow.com/questions/75698854/graphdb-cypher#comment133546054_75698854"}],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678475340,"creation_date":1678475340,"answer_id":75700120,"question_id":75698854,"share_link":"https://stackoverflow.com/a/75700120","body_markdown":"&quot;This query builds a cartesian product between disconnected patterns.&quot; is only a warning, not an error.\r\n\r\nI think your real issue is very different. Your `CREATE` clauses are not even using the 2 nodes found by your `MATCH` clauses.\r\n\r\nYou probably meant to do something like this instead:\r\n\r\n    MATCH (a: KL {name:&#39;T97D&#39;}), (j:JCL {name:&#39;A02D&#39;})\r\n    CREATE (a)-[:DEPEND_ON]-&gt;(j)\r\n\r\nBy the way, in this case, a cartesian product is unavoidable. But you may want to create appropriate [indexes](https://neo4j.com/docs/cypher-manual/current/indexes-for-search-performance/) to make the `MATCH` faster.","link":"https://stackoverflow.com/questions/75698854/graphdb-cypher/75700120#75700120","title":"GraphDB - Cypher"}],"owner":{"reputation":11,"user_id":21372210,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a/AGNmyxZ2LQOsApJgrqaEHZHk4Bxt6nqtwLpHhznIwDIjhg=k-s256","display_name":"Spectre","link":"https://stackoverflow.com/users/21372210/spectre"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1678475340,"creation_date":1678466780,"last_edit_date":1678474636,"question_id":75698854,"share_link":"https://stackoverflow.com/q/75698854","body_markdown":"![enter image description here](https://i.stack.imgur.com/x7HWH.png)\r\n\r\nHow can I create relationship in already-created node like `T97` and `A02`?\r\n\r\nI tried below query but it did not work and I received this warning: &quot;This query builds a cartesian product between disconnected patterns.&quot;\r\n\r\n    match (a: KL {name:&#39;T97D&#39;}),(j:JCL {name:&#39;A02D&#39;})\r\n    with j,a\r\n    create (v_zt30_PT97D)-[:DEPEND_ON ]-&gt;(v_zt30_PA02D)\r\n    \r\n    match (a: KL {name:&#39;T97D&#39;}),(j:JCL {name:&#39;A02D&#39;})\r\n    with j,a\r\n    create (v_zt30_PT97D)-[:DEPEND_ON ]-&gt;(v_zt30_PA02D)","link":"https://stackoverflow.com/questions/75698854/graphdb-cypher","title":"GraphDB - Cypher"},{"tags":["neo4j","neo4j-apoc"],"comments":[{"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"edited":false,"score":0,"creation_date":1678463435,"post_id":75696740,"comment_id":133543080,"link":"https://stackoverflow.com/questions/75696740/neo4j-error-neo-clienterror-procedure-procedurecallfailed#comment133543080_75696740"},{"owner":{"reputation":13,"user_id":21351077,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG","display_name":"newbie","link":"https://stackoverflow.com/users/21351077/newbie"},"reply_to_user":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"edited":false,"score":0,"creation_date":1678471400,"post_id":75696740,"comment_id":133545287,"link":"https://stackoverflow.com/questions/75696740/neo4j-error-neo-clienterror-procedure-procedurecallfailed#comment133545287_75696740"}],"answers":[{"tags":[],"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678473214,"creation_date":1678473214,"answer_id":75699833,"question_id":75696740,"share_link":"https://stackoverflow.com/a/75699833","body_markdown":"For the Neo4j import tool if you can set the `--skip-bad-relationships` flag then I think those rows will be ignored. From looking at the [`apoc.import.csv` docs](https://neo4j.com/docs/apoc/current/import/import-csv/) it&#39;s not clear if `apoc.import.csv` supports `skip-bad-relationships`. You could try passing `{skipBadRelationships: True}` in the config object, otherwise the `neo4j-admin` CLI can be used to set the `--skip-bad-relationships` flag. \r\n\r\nSee this section of the docs for more info: https://neo4j.com/docs/operations-manual/current/tutorial/neo4j-admin-import/#_skip_relationships_referring_to_missing_nodes","link":"https://stackoverflow.com/questions/75696740/neo4j-error-neo-clienterror-procedure-procedurecallfailed/75699833#75699833","title":"Neo4j ERROR (Neo.ClientError.Procedure.ProcedureCallFailed)"},{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678496667,"creation_date":1678496667,"answer_id":75702203,"question_id":75696740,"share_link":"https://stackoverflow.com/a/75702203","body_markdown":"Your `IllegalStateException` occurs because &quot;xxxxxxx&quot; occurs as a value in either the `:START_ID` or `:START_ID` column in your relationships file `Trade_History.csv`. Ideally, you should cleanse your data before you do an import. For example:\r\n\r\n  - If your node ID values are supposed to be numeric strings, verify that the `:START_ID` or `:START_ID` values are all numeric strings. For each violation, figure out how to fix the data or remove that row.\r\n  - Remove extraneous spaces (like the one at the start of &quot; 047316281&quot;). That can be another cause of errors in CSV files.\r\n\r\nAnother observation is that you are using the syntax for defining [ID spaces](https://neo4j.com/docs/operations-manual/current/tools/neo4j-admin/neo4j-admin-import/#import-tool-id-spaces) in your relationship file, whereas ID spaces can only be defined in a node file. That is, your relationship file is not supposed to have &quot;ACCOUT&quot; in `ACCOUT:START_ID` and `ACCOUT:END_ID` (it does not cause an error, but the bad syntax should be fixed to avoid confusion and possible future issues). If you really need ID spaces (and you wouldn&#39;t if you only have one node file), then you should read and follow the documentation.\r\n\r\n","link":"https://stackoverflow.com/questions/75696740/neo4j-error-neo-clienterror-procedure-procedurecallfailed/75702203#75702203","title":"Neo4j ERROR (Neo.ClientError.Procedure.ProcedureCallFailed)"}],"owner":{"reputation":13,"user_id":21351077,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG","display_name":"newbie","link":"https://stackoverflow.com/users/21351077/newbie"},"last_editor":{"reputation":13,"user_id":21351077,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7d6d7314300326b880f3893ac03cb64c?s=256&d=identicon&r=PG","display_name":"newbie","link":"https://stackoverflow.com/users/21351077/newbie"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1678496667,"creation_date":1678454893,"last_edit_date":1678471674,"question_id":75696740,"share_link":"https://stackoverflow.com/q/75696740","body_markdown":"I am new to Neo4j. I tried to create &quot;Account&quot; nodes and &quot;Trade_History&quot; relations at the same time using apoc.import.csv.\r\n\r\n```\r\nCALL apoc.import.csv(\r\n            [{fileName: &quot;file:///Account.csv&quot;, labels: [&#39;Account&#39;]}],\r\n            [{fileName: &quot;file:///Trade_History.csv&quot;, type: &#39;TRANSACTION&#39;}],\r\n            {}\r\n)\r\n```\r\n\r\nHowever, I received the following error message.\r\n\r\n&gt; Neo.ClientError.Procedure.ProcedureCallFailed\r\n&gt; Failed to invoke procedure `apoc.import.csv`: Caused by: java.lang.IllegalStateException: Node for id space __CSV_DEFAULT_IDSPACE and id xxxxxxx not found\r\n\r\nI think the error is that the id &quot;xxxxxxx&quot; is not found, but which id, Account or Trade_History, is missing?\r\nIs there an ID that exists in Trade_History that does not exist in Account?\r\nIf so, is it possible to implement any way to skip (not create a relationship) if the Trade_History ID pair does not exist in the Account?\r\nOr, If you know of another candidate query, it would be appreciated.\r\n\r\nThis might be basic, but could you tell me some advice? Thank you in advance.\r\n\r\n----------------------------\r\nP.S.\r\nThe first three lines of Account.csv and Trade_History.csv are as follows;\r\n\r\nAccount.csv\r\n\r\n    :ID,name\r\n    000000000080,James\r\n    000000000056,Kevin\r\n    000000000039,Thomas\r\n\r\n\r\nTrade_History.csv\r\n\r\n    LABEL:STRING,ACCOUT:START_ID,ACCOUT:END_ID\r\n    XYZ36417771,AAA_20670095845, 047316281\r\n    XYZ56315967,BBB_0000970982, 456317783746\r\n    XYZ61489917,CCC_00209200036399,093891638","link":"https://stackoverflow.com/questions/75696740/neo4j-error-neo-clienterror-procedure-procedurecallfailed","title":"Neo4j ERROR (Neo.ClientError.Procedure.ProcedureCallFailed)"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":364,"user_id":4985560,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/12b4b2270faae6d712f609a9bcad5741?s=256&d=identicon&r=PG&f=1","display_name":"Nithin A","link":"https://stackoverflow.com/users/4985560/nithin-a"},"edited":false,"score":0,"creation_date":1678640440,"post_id":75696602,"comment_id":133568635,"link":"https://stackoverflow.com/questions/75694664/neo4j-cypher-batch-query-passing-node-label-and-property-key-dynamically-via-th/75696602#comment133568635_75696602"},{"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"reply_to_user":{"reputation":364,"user_id":4985560,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/12b4b2270faae6d712f609a9bcad5741?s=256&d=identicon&r=PG&f=1","display_name":"Nithin A","link":"https://stackoverflow.com/users/4985560/nithin-a"},"edited":false,"score":0,"creation_date":1678644253,"post_id":75696602,"comment_id":133569412,"link":"https://stackoverflow.com/questions/75694664/neo4j-cypher-batch-query-passing-node-label-and-property-key-dynamically-via-th/75696602#comment133569412_75696602"}],"tags":[],"owner":{"reputation":8316,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=256&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678454154,"creation_date":1678454154,"answer_id":75696602,"question_id":75694664,"share_link":"https://stackoverflow.com/a/75696602","body_markdown":"You can accomplish this with the [apoc.merge.node](https://neo4j.com/labs/apoc/4.4/overview/apoc.merge/apoc.merge.node/) procedure which allows for dynamically specifying node labels and properties:\r\n\r\n```\r\nUNWIND $batch as row\r\nCALL apoc.merge.node([row.label], apoc.map.fromValues([row.key, row.value]);\r\n```","link":"https://stackoverflow.com/questions/75694664/neo4j-cypher-batch-query-passing-node-label-and-property-key-dynamically-via-th/75696602#75696602","title":"Neo4j Cypher Batch Query passing node label and property key dynamically( via the parameter list of maps)"}],"owner":{"reputation":364,"user_id":4985560,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/12b4b2270faae6d712f609a9bcad5741?s=256&d=identicon&r=PG&f=1","display_name":"Nithin A","link":"https://stackoverflow.com/users/4985560/nithin-a"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678493878,"creation_date":1678442436,"last_edit_date":1678493878,"question_id":75694664,"share_link":"https://stackoverflow.com/q/75694664","body_markdown":"I want to create nodes using labels and property keys dynamically retrieved from a `$batch` parameter list.\r\n\r\nI expected this to work:\r\n\r\n    UNWIND $batch as row\r\n    MERGE (s:CAR:row.label {row.key: row.value})\r\n\r\nEach `row` looks something like: `{label: &#39;typeA&#39;, key: &#39;Mileage&#39;, value: 20}`\r\n\r\nRight now, the query is working only if the label and key are statically typed. It is not accepting dynamic values for labels and property keys key. Dynamic values are only working for property values.\r\n\r\nThat is, it works only if the query is:\r\n\r\n    UNWIND $batch as row\r\n    MERGE (s:CAR:typeA {Mileage: row.value}\r\n\r\nAny way to achieve what I want?\r\n\r\n","link":"https://stackoverflow.com/questions/75694664/neo4j-cypher-batch-query-passing-node-label-and-property-key-dynamically-via-th","title":"Neo4j Cypher Batch Query passing node label and property key dynamically( via the parameter list of maps)"},{"tags":["neo4j","neo4j-apoc"],"answers":[{"tags":[],"owner":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1678390075,"creation_date":1678390075,"answer_id":75689204,"question_id":75689037,"share_link":"https://stackoverflow.com/a/75689204","body_markdown":"This [Knowledge Base article](https://neo4j.com/developer/kb/ldap-error-unable-to-find-valid-certification-path-to-requested-target/) may be related.\r\n\r\nTo quote from the article:\r\n\r\n&gt; The problem appears when your server uses a self-signed certificate.\r\n&gt; To workaround it, you can add this certificate to the list of trusted\r\n&gt; certificates for your JVM. The Root Certificate will need to be added\r\n&gt; to the Java CAstore using keytool.\r\n&gt; \r\n&gt;  keytool -import -alias _alias_name_ -keystore ..\\lib\\security\\cacerts\r\n&gt; -file _path_to_cer_file\r\n\r\n","link":"https://stackoverflow.com/questions/75689037/error-when-calling-apoc-spatial-geocodeonce-in-neo4j/75689204#75689204","title":"Error when calling apoc.spatial.geocodeOnce() in neo4j"}],"owner":{"reputation":1,"user_id":19873970,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/915dabf5454eecec680ec5c3b707ed9b?s=256&d=identicon&r=PG","display_name":"minottimat","link":"https://stackoverflow.com/users/19873970/minottimat"},"last_editor":{"reputation":61312,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=256&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1678390075,"creation_date":1678388883,"last_edit_date":1678389707,"question_id":75689037,"share_link":"https://stackoverflow.com/q/75689037","body_markdown":"I&#39;m getting an error when trying to call `apoc.spatial.geoCodeOnce()` on neo4j Desktop version 5.2 on Windows.\r\n\r\nHere is the code I&#39;m trying to run (apoc version 5.2.1):\r\n\r\n    call apoc.spatial.geocodeOnce(&#39;44113&#39;) yield location\r\n    return location.longitude, location.latitude\r\n\r\nHere is the error that is returned:\r\n\r\n&gt; Failed to invoke procedure `apoc.spatial.geocodeOnce`: Caused by:\r\n&gt; sun.security.provider.certpath.SunCertPathBuilderException: unable to\r\n&gt; find valid certification path to requested target\r\n\r\nI have tried manipulating the neo4j.config file, along with experimenting with different versions of neo4j/apoc.\r\n\r\nI was expecting the output to provide longitude/latitude coordinates for the zipcode 44113.\r\n\r\nWould appreciate any help!","link":"https://stackoverflow.com/questions/75689037/error-when-calling-apoc-spatial-geocodeonce-in-neo4j","title":"Error when calling apoc.spatial.geocodeOnce() in neo4j"}],"has_more":true,"quota_max":300,"quota_remaining":299}